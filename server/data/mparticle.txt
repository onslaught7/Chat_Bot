Data Subject Request API Version 1 and 2
Data Subject Request API Version 3
Preventing Blocked HTTP Traffic with CNAME
Preventing Blocked HTTP Traffic with CNAME
Web SDK via Google Tag Manager
Preventing Blocked HTTP Traffic with CNAME
Upgrade to Version 2 of the SDK
Step 3. Set up your output
Step 8. Create a data plan
Step 9. Test your local app
Step 3. Set up your output
Step 8. Create a data plan
Step 3. Set up your output
Step 8. Create a data plan
Migrate from Segment to Client-side mParticle
Migrate from Segment to Server-side mParticle
The Developer's Guided Journey to mParticle
Download an audience from a journey
Audience A/B testing from a journey
Create a Next Best Action (NBA)
Activate Next Best Actions in Campaigns
Usage metering for value-based pricing (VBP)
Sync and Activate Analytics User Segments in mParticle
Apply All for Filter Where Clauses
Date Range and Time Settings Overview
Cumulative vs. Non-Cumulative Analysis in Segmentation
Total Count of vs. Users Who Performed
Time and Interval Settings in Dashboards
Optimize User Flow with A/B Testing
AWS Redshift (Define Your Own Schema)
AWS S3 Integration (Define Your Own Schema)
Snap is a camera company whose flagship application Snapchat, the Spectacles product, and a variety of publisher tools provide brands a unique platform to reach targeted audience segments with engaging and personalized content.
In order to enable the mParticle integration with Snapchat you will need the account credentials for a Snapchat account.  The integration activation process will prompt you to log into your Snapchat account, and once logged in, mParticle will automatically retrieve the credentials that it needs to forward audience data to Snapchat. If you intend to use the optional Value Based Audience feature, you will need to request Snap to enable the feature for your ad account and ensure they complete such request before you create a Value Based Audience connection in mParticle.
Select Directory, and click the Snapchat tile.
Select theOutput AudienceIntegration Type and clickAdd to Setup.
Select theSnapchatoutput configuration group and clickConfigure.
ClickLogin to Snapchat- A pop-up window will appear allowing you to enter your account credentials to access your Snapchat account.
Select your Account Credentials and clickSave.
ClickAcceptto authorize mParticle to access your Snapchat account.
You can now connect your audiences to Snapchat.
Minimum- An audience is selectable for targeting in Snapchat as long as it has a minimum of 1000 users.
Snapchat has a limit of 1000custom audiencesper ad account.
When forwarding audience data to Snapchat, mParticle will send SHA-256 hash of the following identities based on the values of the Connection Settings:
Device IDs (IDFA or Google Advertising ID)
Phone Numbers (Mobile Telephone Number, Phone Number 2, Phone Number 3, and$mobilereserved user attribute)
The Snapchat Audience Integration uses Bulk Forwarding. Bulk Forwarding means that, instead of uploading updates to an audience in real time, mParticle compiles updates into a queue until either a given amount of time has passed since the last upload, or until a certain number of updates are waiting to be sent.
By default, mParticle uploads to Snapchat whenever at least one of the following conditions is met:
3 hours have passed since the last update.
At least 500000 messages are in the queue.
Upload frequency can sometimes be adjusted. Reach out to your mParticle Customer Success Manager if you need to discuss upload frequency.
When you delete a connection or audience, the downstream segment in Snap will be deleted.
You can use the mParticle audience integration to create value-based audiences with Snap. As a prerequisite, Snap must enable value-based audience support for your ad account.
By default, mParticle will forward all users in a value-based audience to Snap even if their user attribute representing value is missing or negative. You can exclude users with negative, missing, and zero values by unchecking theAllow Zero And Negative Valuesconnection setting when creating your value-based audience.
Do Not Sell or Share My Personal Data
These cookies are necessary for the website to function and cannot be switched off in our systems. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.
Share Or Sale of Personal Data
Under the CPRA, you have the right to opt-out of the sale or sharing of your personal information to third parties. These cookies collect information for analytics and to personalize your experience with targeted ads. You may exercise your right to opt out of the sale or sharing of personal information by using this toggle switch. If you opt out we will not be able to offer you personalized ads and will not hand over your personal information to any third parties. Additionally, you may contact our legal department for further clarification about your rights as a California consumer by using this Exercise My Rights link.If you have enabled privacy controls on your browser (such as a plugin), we have to take that as a valid request to opt-out. Therefore we would not be able to track your activity through the web. This may affect our ability to personalize ads according to your preferences.
Targeting CookiesSwitch LabellabelThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
These cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
Performance CookiesSwitch LabellabelThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
Data Subject Request API Version 1 and 2
Data Subject Request API Version 3
Preventing Blocked HTTP Traffic with CNAME
Preventing Blocked HTTP Traffic with CNAME
Web SDK via Google Tag Manager
Preventing Blocked HTTP Traffic with CNAME
Upgrade to Version 2 of the SDK
Step 3. Set up your output
Step 8. Create a data plan
Step 9. Test your local app
Step 3. Set up your output
Step 8. Create a data plan
Step 3. Set up your output
Step 8. Create a data plan
Migrate from Segment to Client-side mParticle
Migrate from Segment to Server-side mParticle
The Developer's Guided Journey to mParticle
Download an audience from a journey
Audience A/B testing from a journey
Create a Next Best Action (NBA)
Activate Next Best Actions in Campaigns
Usage metering for value-based pricing (VBP)
Sync and Activate Analytics User Segments in mParticle
Apply All for Filter Where Clauses
Date Range and Time Settings Overview
Cumulative vs. Non-Cumulative Analysis in Segmentation
Total Count of vs. Users Who Performed
Time and Interval Settings in Dashboards
Optimize User Flow with A/B Testing
AWS Redshift (Define Your Own Schema)
AWS S3 Integration (Define Your Own Schema)
Manage your consent and opt-out privacy obligations under the GDPR and CCPA with Data Privacy Controls. This feature is not prescriptive and there is no single way to implement consent or opt-out. Instead, mParticle gives you a simple, standard technique for storing and applying consent and opt-out choices. Consent state powers both GDPR consent and CCPA data sale opt-out.
This guide introduces you to mParticle’s data privacy control functionality and shows you how to collect an individual’s consent and apply it to your data flows.
Common uses of data privacy controls
Data privacy controls are flexible and customizable, allowing you to build any data flow or consent-based logic you need.
Use mParticle’s data privacy controls to help comply with CCPA’s “do not sell my data” requirement by collecting users who opt-out and blocking those users’ data from flowing to any ‘data sale’ output by:
Recording a CCPA data sale opt-out as a user consent (more information below)
Identify which outputs count as ‘data sale’ and apply the below forwarding rule to them
Applying a forwarding rule of: Do not forward if CCPA Data sale opt out is present
GDPR defines consent as one method of lawful data processing. One common setup is to:
Define a processing purpose of ‘marketing’
Prompt users for affirmative consent for ‘marketing’
Identify which outputs would perform ‘analytics’ processing
Apply a forwarding rule of: Only forward user data if GDPR Consent for ‘marketing’ is true
Data privacy and the mParticle platform
Once enabled and configured, data privacy work with the mParticle platform to ingest and pass on consent state:
Define categories of data collection called consent purposes.
Store the consent state in a user’s profile.
Control data flow based on stored consent.
Send user consent state to your integrations (outputs).
Data privacy controls save user consent decisions and applies them to data flows.
Enable GDPR and/or CCPA compliance features on your workspace fromWorkspace Settings>Workspace>Regulation.
For GDPR, create a set of purposes fromPrivacy > Privacy Settingsin the dashboard.
For CCPA, once it is enabled in your workspace, the purposedata_sale_opt_outis automatically created. The SDKs and mParticle UIs facilitate using this purpose, so you don’t need to hardcode it anywhere.
The mParticle format for a single record of a user decision on a privacy prompt,.consent, is ourconsent_stateobject. This is used for both GDPR-style opt-in consent and for CCPA-style opt-out.
For each user or workspace, consent state can be stored for each possible combination of regulation and purpose. For each purpose, the following fields are supported.
All fields are optional, exceptconsented,timestamp_unixtime_ms,regulationandpurpose. Theregulationandpurposefields are built into the structure. Be sure to include your privacy and compliance experts when deciding how to implement optional fields.
Consent state can be logged via the HTTP API simply by including a consent state object in a batch, mirroring the structure of the user profile (above):
For detailed definitions of how to report consent state, review the sections of our API and SDK references that cover data privacy controls:
Additionally, ourintegration with OneTrustallows you to ingest customer consent states into mParticle.
Consent state is maintained per person on the User Profile using the structure defined above.
For testing consent, you can useUser Activity Viewto check that a consent was recorded correctly. Here is an example of how CCPA data sale opt-out will appear:
Consent state can be used to create conditions in the Audience Builder to check a users’ consent state as a requirement for audience inclusion or exclusion.
For example, for CCPA you may want to include only users who have NOT opted out of data sale, by adding a criteria like this:
For GDPR, you may want to include only users that have an opt-in consent for a given purpose, shown here as ‘Advertising’:
Consent state can be used to create forwarding rules that selectively filter data based on a users consent state, in real time and per-person.
For example, you can choose to only forward data from users who have given consent for a particular purpose.
For CCPA, you may want a forwarding rule to apply a data sale opt-out. In this example, users’ who have a consent state oftruefor the CCPA purpose ofdata_sale_opt_outwill NOT have their data forwarded (if the consent state is missing or false for that purpose, data will flow):
For GDPR, you may want a forwarding rule to only send data when a single purpose is consented:
If you set up a Forwarding Rule for an embedded kit integration, the iOS and Android SDKs will check consent status for the user on initialization. If the rule condition fails, the kit will not be initialized. Note that kits are only initialized when a session begins or on user change, so if consent status changes in the course of a session, while mParticle will immediately stop forwarding data to the kit, it is possible that an embedded kit may remain active and independently forwarding data to a partner from the client until the session ends.
When the consent state of a profile changes, that change can be communicated to mParticle event integrations. If theconsent_stateobject on an incoming event batch contains changes from the existing profile, mParticle adds a ‘system notification’ to the batch for each consent state change before the batch is sent to incoming forwarders. This notification contains the full old and new consent state objects:
"system_notifications":[{"data":{"purpose":"location_collection","current":{"regulation":"GDPR","document":"location_collection_agreement_v4","consented":false,"timestamp_unixtime_ms":1523045332033,"location":"17 Cherry Tree Lane","hardware_id":"IDFA:a5d934n0-232f-4afc-2e9a-3832d95zc702"},"old":{"regulation":"GDPR","document":"location_collection_agreement_v4","consented":true,"timestamp_unixtime_ms":1523039002083,"location":"17 Cherry Tree Lane","hardware_id":"IDFA:a5d934n0-232f-4afc-2e9a-3832d95zc702"}},"type":"gdpr_change"}]
"system_notifications":[{"data":{"purpose":"location_collection","current":{"regulation":"GDPR","document":"location_collection_agreement_v4","consented":false,"timestamp_unixtime_ms":1523045332033,"location":"17 Cherry Tree Lane","hardware_id":"IDFA:a5d934n0-232f-4afc-2e9a-3832d95zc702"},"old":{"regulation":"GDPR","document":"location_collection_agreement_v4","consented":true,"timestamp_unixtime_ms":1523039002083,"location":"17 Cherry Tree Lane","hardware_id":"IDFA:a5d934n0-232f-4afc-2e9a-3832d95zc702"}},"type":"gdpr_change"}]
There are currently two ways that consent state changes are forwarded to mParticle event integrations:
Some partners accept raw event batch data from mParticle, mostly for data storage or custom analytics use cases. For these partners, mParticle will forward the ‘system_notifications’ object with each relevant event batch. Forwarding of system notifications can be turned off with a user setting. Integrations that can currently receive the system notifications object include:Amazon KinesisAmazon S3Amazon SNSAmazon SQSGoogle Pub/SubGoogle Cloud StorageMicrosoft Azure Event HubsSlackWebhook
Some partners accept raw event batch data from mParticle, mostly for data storage or custom analytics use cases. For these partners, mParticle will forward the ‘system_notifications’ object with each relevant event batch. Forwarding of system notifications can be turned off with a user setting. Integrations that can currently receive the system notifications object include:
mParticle is working with other partners to support forwarding consent state changes as a Custom Event. These events contain the new consent state information as custom attributes, a custom event type of"Consent", and an event name of"Consent Given"or"Consent Rejected". These consent events are forwarded to supporting partners as standard custom events.{"data":{"event_name":"Consent Given","custom_event_type":"Consent","custom_attributes":{"consented":"true","document":"location_collection_agreement_v4","hardware_id":"IDFA:a5d934n0-232f-4afc-2e9a-3832d95zc702","purpose":"location_collection","location":"17 Cherry Tree Lane","regulation":"GDPR","timestamp_unixtime_ms":1523039002083},"event_type":"custom_event"}}Partners that currently accept these custom consent state events include:AmplitudeSnowplowMixpanelGoogle AnalyticsSalesforce DMP
mParticle is working with other partners to support forwarding consent state changes as a Custom Event. These events contain the new consent state information as custom attributes, a custom event type of"Consent", and an event name of"Consent Given"or"Consent Rejected". These consent events are forwarded to supporting partners as standard custom events.
Partners that currently accept these custom consent state events include:
“GDPR Consent Change” is  listed as a data type in theIntegrations directoryand we will update this list as more partners add support. Please reach out to your success manager if you would like to distribute consent to an additional partner.
mParticle helps you respond todata subject requestsas mandated by the GDPR and CCPA regulations.
You can search for integrations that support data subject requests in theIntegrationspage. Search on categoryData Subject Request.
The California Consumer Protection Act (CCPA) and the upcoming CPRA (California Privacy Rights Act) require that users can signal their privacy choices. In support of that requirement, you can ingestGlobal Privacy Control (GPC) signalswith mParticle.
Browsers append the GPC signal to HTTP requests and make it queryable via the DOM. This signal is designed to convey a person’s request to websites and services to not sell or share their personal information with third parties, perthe Global Privacy Control specification. This opt-out is at the browser level, allowing users to turn on the GPC signal for all or specific websites.
The workflow for ingesting and forwarding GPC signals via SDK or Events API:
This sample code show two options: mapping to a GDPR purpose and mapping to a user attribute.
/*
 First, grab the GPC signal. "true" indicates the user has signaled an opt-out
 See here for more details on querying the GPC signal:
 https://globalprivacycontrol.github.io/gpc-spec/
*/vargpcSignal=navigator.globalPrivacyControl;/*
 Option 1:
 In this example, the GPC signal is mapped to a "targeting_collection" GDPR purpose.
 This is only an example, you determine the GDPR purposes and how GPC maps to them.
 You can do the same mapping to CPPA.
*/vartargeting_consent=mParticle.Consent.createGDPRConsent(!gpcSignal,// note that this is invertedDate.now(),// Timestamp"browser_gpc_signal",// Document"17 Cherry Tree Lane",// Location"browser-id:a5d934n0-232f-4afc-2e9a-3832d95zc702"// Hardware ID);// Add to your consent statevarconsentState=mParticle.Consent.createConsentState();consentState.addGDPRConsentState("targeting_collection",targeting_consent);varuser=mParticle.Identity.getCurrentUser();user.setConsentState(consentState);/*
 Option 2:
 In this example, the GPC signal is mapped to a user attribute
*/varuser=mParticle.Identity.getCurrentUser();user.setUserAttribute("gpc_signal",gpcSignal);
/*
 First, grab the GPC signal. "true" indicates the user has signaled an opt-out
 See here for more details on querying the GPC signal:
 https://globalprivacycontrol.github.io/gpc-spec/
*/vargpcSignal=navigator.globalPrivacyControl;/*
 Option 1:
 In this example, the GPC signal is mapped to a "targeting_collection" GDPR purpose.
 This is only an example, you determine the GDPR purposes and how GPC maps to them.
 You can do the same mapping to CPPA.
*/vartargeting_consent=mParticle.Consent.createGDPRConsent(!gpcSignal,// note that this is invertedDate.now(),// Timestamp"browser_gpc_signal",// Document"17 Cherry Tree Lane",// Location"browser-id:a5d934n0-232f-4afc-2e9a-3832d95zc702"// Hardware ID);// Add to your consent statevarconsentState=mParticle.Consent.createConsentState();consentState.addGDPRConsentState("targeting_collection",targeting_consent);varuser=mParticle.Identity.getCurrentUser();user.setConsentState(consentState);/*
 Option 2:
 In this example, the GPC signal is mapped to a user attribute
*/varuser=mParticle.Identity.getCurrentUser();user.setUserAttribute("gpc_signal",gpcSignal);
Common uses of data privacy controls
Data privacy and the mParticle platform
Do Not Sell or Share My Personal Data
These cookies are necessary for the website to function and cannot be switched off in our systems. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.
Share Or Sale of Personal Data
Under the CPRA, you have the right to opt-out of the sale or sharing of your personal information to third parties. These cookies collect information for analytics and to personalize your experience with targeted ads. You may exercise your right to opt out of the sale or sharing of personal information by using this toggle switch. If you opt out we will not be able to offer you personalized ads and will not hand over your personal information to any third parties. Additionally, you may contact our legal department for further clarification about your rights as a California consumer by using this Exercise My Rights link.If you have enabled privacy controls on your browser (such as a plugin), we have to take that as a valid request to opt-out. Therefore we would not be able to track your activity through the web. This may affect our ability to personalize ads according to your preferences.
Targeting CookiesSwitch LabellabelThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
These cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
Performance CookiesSwitch LabellabelThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
Data Subject Request API Version 1 and 2
Data Subject Request API Version 3
Preventing Blocked HTTP Traffic with CNAME
Preventing Blocked HTTP Traffic with CNAME
Web SDK via Google Tag Manager
Preventing Blocked HTTP Traffic with CNAME
Upgrade to Version 2 of the SDK
Step 3. Set up your output
Step 8. Create a data plan
Step 9. Test your local app
Step 3. Set up your output
Step 8. Create a data plan
Step 3. Set up your output
Step 8. Create a data plan
Migrate from Segment to Client-side mParticle
Migrate from Segment to Server-side mParticle
The Developer's Guided Journey to mParticle
Download an audience from a journey
Audience A/B testing from a journey
Create a Next Best Action (NBA)
Activate Next Best Actions in Campaigns
Usage metering for value-based pricing (VBP)
Sync and Activate Analytics User Segments in mParticle
Apply All for Filter Where Clauses
Date Range and Time Settings Overview
Cumulative vs. Non-Cumulative Analysis in Segmentation
Total Count of vs. Users Who Performed
Time and Interval Settings in Dashboards
Optimize User Flow with A/B Testing
AWS Redshift (Define Your Own Schema)
AWS S3 Integration (Define Your Own Schema)
Brazeis a comprehensive customer engagement platform that powers relevant experiences between consumers and brands they love. Braze helps brands foster human connection through interactive conversations across channels.
The Braze Feed allows mParticle to receive Braze interaction data for the iOS, Android and Web platforms. It also supports an ‘unbound’ feed for events, such as emails, that are not connected to an app platform.
The Braze Feed Integration supports four separate feeds: iOS, Android, Web and Unbound. You will need to create an input for each feed. You can create additional inputs fromSetup > Inputs, on theFeed Configurationstab.For each feed, select an ‘Act as Application’ platform. For iOS, Android and Web, just select the appropriate option from the list. For your Unbound feed, leave this setting at ‘Select Application’.
The Braze Feed Integration supports four separate feeds: iOS, Android, Web and Unbound. You will need to create an input for each feed. You can create additional inputs fromSetup > Inputs, on theFeed Configurationstab.
For each feed, select an ‘Act as Application’ platform. For iOS, Android and Web, just select the appropriate option from the list. For your Unbound feed, leave this setting at ‘Select Application’.
As you create each input, mParticle will provide you with a Key and Secret. Copy these credentials, making sure to note which feed each pair of credentials is for. Provide the credentials to your Braze account manager and ask them to enable the mParticle feed.
All events from the Braze Feed will include any available user/device identifiers. Platform feeds will include basic device information.
The Braze Feed sends events for tracking campaign performance. Included as custom attributes for each event are Braze’s IDs for the relevant Campaign, News Feed Card, Button, Canvas, etc. You can find the ID’s in the relevant sections of the Braze Dashboard underAPI Identifier. SeeBraze’s Identifier Typesfor more details.
You can also see a full list of your API Identifiers on Braze’sDeveloper Console.
A full list of events and their allowed attributes can be found inBraze’s Documentation. For events withcampaign_id,canvas_id,canvas_step_id, andcanvas_variation_idlisted note that an individual event may have acampaign_id, thecanvas_*attributes, or neither.
Do Not Sell or Share My Personal Data
These cookies are necessary for the website to function and cannot be switched off in our systems. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.
Share Or Sale of Personal Data
Under the CPRA, you have the right to opt-out of the sale or sharing of your personal information to third parties. These cookies collect information for analytics and to personalize your experience with targeted ads. You may exercise your right to opt out of the sale or sharing of personal information by using this toggle switch. If you opt out we will not be able to offer you personalized ads and will not hand over your personal information to any third parties. Additionally, you may contact our legal department for further clarification about your rights as a California consumer by using this Exercise My Rights link.If you have enabled privacy controls on your browser (such as a plugin), we have to take that as a valid request to opt-out. Therefore we would not be able to track your activity through the web. This may affect our ability to personalize ads according to your preferences.
Targeting CookiesSwitch LabellabelThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
These cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
Performance CookiesSwitch LabellabelThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
Data Subject Request API Version 1 and 2
Data Subject Request API Version 3
Preventing Blocked HTTP Traffic with CNAME
Preventing Blocked HTTP Traffic with CNAME
Web SDK via Google Tag Manager
Preventing Blocked HTTP Traffic with CNAME
Upgrade to Version 2 of the SDK
Step 3. Set up your output
Step 8. Create a data plan
Step 9. Test your local app
Step 3. Set up your output
Step 8. Create a data plan
Step 3. Set up your output
Step 8. Create a data plan
Migrate from Segment to Client-side mParticle
Migrate from Segment to Server-side mParticle
The Developer's Guided Journey to mParticle
Download an audience from a journey
Audience A/B testing from a journey
Create a Next Best Action (NBA)
Activate Next Best Actions in Campaigns
Usage metering for value-based pricing (VBP)
Sync and Activate Analytics User Segments in mParticle
Apply All for Filter Where Clauses
Date Range and Time Settings Overview
Cumulative vs. Non-Cumulative Analysis in Segmentation
Total Count of vs. Users Who Performed
Time and Interval Settings in Dashboards
Optimize User Flow with A/B Testing
AWS Redshift (Define Your Own Schema)
AWS S3 Integration (Define Your Own Schema)
The Python SDK is a helper library for the mParticle Events HTTP API that exposes the mParticle schema as simple models and provides an HTTP client interface. This SDK is stateless and only sends the data that you populate, whereas our mobile SDKs automatically collect app and device information, session events, install events, and maintain persistence.
Though the SDK may work on earlier versions of Python, we officially support Python version 3.5 or higher.
Read this page for a general overview and examples, visit thePython SDK repo), and if needed,contact our customer support teamto make sure you’re feeding the platform with the right data to power your integrations.
All data sent via the SDK must be encapsulated in aBatchobject. Each Batch is associated with asingle user. Batch objects must be associated with an environment (productionordevelopment) to properly silo your testing and production data.
Most use-cases require that data be associated with a user identity, for example:
If you’re also sending data to mParticle via our mobile SDKs, set a customer ID both via the mobile SDKs and this SDK so that mParticle can correctly associate data with each user.
Several marketing automation and audience integrations are powered by email.
TheDeviceInformationobject describes a mobile device that should be associated with this batch. Crucially, it exposes properties for device identities (Apple IDFA and Google Advertising ID) which are required for nearly all mParticle Audience integrations.
device_info=mparticle.DeviceInformation()# set any IDs that you have for this userdevice_info.ios_advertising_id='07d2ebaa-e956-407e-a1e6-f05f871bf4e2'device_info.android_advertising_id='a26f9736-c262-47ea-988b-0b0504cee874'batch.device_info=device_info
device_info=mparticle.DeviceInformation()# set any IDs that you have for this userdevice_info.ios_advertising_id='07d2ebaa-e956-407e-a1e6-f05f871bf4e2'device_info.android_advertising_id='a26f9736-c262-47ea-988b-0b0504cee874'batch.device_info=device_info
The mParticle audience platform can be powered by only sending a combination of user attributes, used to describe segments of users, and device identities/user identities used to then target those users.
# arbitrary example allowing you to create a segment of users trial usersbatch.user_attributes={'Account type':'trial','TrialEndDate':'2016-12-01'}
# arbitrary example allowing you to create a segment of users trial usersbatch.user_attributes={'Account type':'trial','TrialEndDate':'2016-12-01'}
Events are central to many of mParticle’s integrations; analytics integrations typically require events, and you can create mParticle Audiences based on the recency and frequency of different events. All events should be associated with a timestamp reflecting when they actually occurred, otherwise they will be assigned a timestamp when mParticle receives them.
App Events represent specific actions that a user has taken in your app. At minimum they require a name and a type, but can also be associate with a free-form dictionary of key/value pairs.
The CommerceEvent is central to mParticle’s eCommerce measurement. CommerceEvents can contain many data points but it’s important to understand that there are 3 core variations:
Product-based: Used to measure measured datapoints associated with one or more products
Promotion-base: Used to measure datapoints associated with internal promotions or campaigns
Impression-based: Used to measure interactions with impressions of products and product-listings
Custom attributes can be added to both products and commerce events using thecustom_attributesproperty, which accepts a dictionary of key/value pairs of strings.
product=mparticle.Product()product.name='Example Product'product.id='sample-sku'product.price=19.99product.custom_attributes={'color':'red','size':'small'}# optional dictionary containing custom attributes for the productproduct_action=mparticle.ProductAction('purchase')product_action.products=[product]product_action.tax_amount=1.50product_action.total_amount=21.49commerce_event=mparticle.CommerceEvent(product_action)commerce_event.timestamp_unixtime_ms=example_timestamp
commerce_event.custom_attributes={'sale':'true'}# optional dictionary containing custom attributes for the commerce eventbatch.events=[commerce_event]
product=mparticle.Product()product.name='Example Product'product.id='sample-sku'product.price=19.99product.custom_attributes={'color':'red','size':'small'}# optional dictionary containing custom attributes for the productproduct_action=mparticle.ProductAction('purchase')product_action.products=[product]product_action.tax_amount=1.50product_action.total_amount=21.49commerce_event=mparticle.CommerceEvent(product_action)commerce_event.timestamp_unixtime_ms=example_timestamp
commerce_event.custom_attributes={'sale':'true'}# optional dictionary containing custom attributes for the commerce eventbatch.events=[commerce_event]
The SessionStartEvent and SessionEndEvent should be used to describe the details of user session such as its length, which is a common metric used in many mParticle integrations. Additonally, length, recency, and frequency of sessions are powerful data-points by which an mParticle audience can be defined.
session_start=mparticle.SessionStartEvent()session_start.session_id=12345678session_start.timestamp_unixtime_ms=example_timestamp

session_end=mparticle.SessionEndEvent()session_end.session_id=session_start.session_id# its mandatory that these matchsession_end.session_duration_ms=example_duration
session_end.timestamp_unixtime_ms=example_timestamp+example_duration

batch.events=[session_start,session_end]
session_start=mparticle.SessionStartEvent()session_start.session_id=12345678session_start.timestamp_unixtime_ms=example_timestamp

session_end=mparticle.SessionEndEvent()session_end.session_id=session_start.session_id# its mandatory that these matchsession_end.session_duration_ms=example_duration
session_end.timestamp_unixtime_ms=example_timestamp+example_duration

batch.events=[session_start,session_end]
Use these events to represent the nuances of inter- and intra-session user-behavior with your app. Install events are crucial to power many attribution integrations and to judge the success of marketing campaigns.
To conform to the ever growing global regulations on data privacy, mParticle providesData Privacy Controls.
Data privacy is configured in the dashboard and is attached via a batch’sconsent_state.
In this example,'My Purpose'should match theConsent Purposedefined in your GDPR Setting
The SDK provides an interface to the mParticle HTTP API by way of the EventsApi class.
At minimum, theEventsApimust be initialized with an mParticle key and secret. You can find your mParticle key and secret by navigating to theAppssection of the mParticle platform UI.
You must associate your data with the correct key and secret. If your app is multi-platform, for example, be sure to send your Android data to your Android key/secret, and your iOS data to your iOS key/secret.
configuration=mparticle.Configuration()configuration.api_key='REPLACE WITH APP KEY'configuration.api_secret='REPLACE WITH APP SECRET'configuration.debug=True#enable logging of HTTP traffic
configuration=mparticle.Configuration()configuration.api_key='REPLACE WITH APP KEY'configuration.api_secret='REPLACE WITH APP SECRET'configuration.debug=True#enable logging of HTTP traffic
If your workspace is in a pod other than US1, make sure to set the host to theappropriate URL.
# Example for the EU1 pod, replace eu1 with the pod's nameconfiguration.host='https://s2s.eu1.mparticle.com/v2'
# Example for the EU1 pod, replace eu1 with the pod's nameconfiguration.host='https://s2s.eu1.mparticle.com/v2'
Finally, initialize the SDK with the configuration.
The EventsAPI class exposes two interfaces:
bulk_upload_events- Accepts up to 100Batchobjects for up to 100 users.
upload_events- Accepts a singleBatchobject for a single user
try:api_instance.upload_events(batch)# you can also send multiple batches at a time to decrease the amount of network calls#api_instance.bulk_upload_events([batch, batch])exceptmparticle.rest.ApiExceptionase:print(f'Exception while calling mParticle: %{e}\n')
try:api_instance.upload_events(batch)# you can also send multiple batches at a time to decrease the amount of network calls#api_instance.bulk_upload_events([batch, batch])exceptmparticle.rest.ApiExceptionase:print(f'Exception while calling mParticle: %{e}\n')
Do Not Sell or Share My Personal Data
These cookies are necessary for the website to function and cannot be switched off in our systems. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.
Share Or Sale of Personal Data
Under the CPRA, you have the right to opt-out of the sale or sharing of your personal information to third parties. These cookies collect information for analytics and to personalize your experience with targeted ads. You may exercise your right to opt out of the sale or sharing of personal information by using this toggle switch. If you opt out we will not be able to offer you personalized ads and will not hand over your personal information to any third parties. Additionally, you may contact our legal department for further clarification about your rights as a California consumer by using this Exercise My Rights link.If you have enabled privacy controls on your browser (such as a plugin), we have to take that as a valid request to opt-out. Therefore we would not be able to track your activity through the web. This may affect our ability to personalize ads according to your preferences.
Targeting CookiesSwitch LabellabelThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
These cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
Performance CookiesSwitch LabellabelThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
Data Subject Request API Version 1 and 2
Data Subject Request API Version 3
Preventing Blocked HTTP Traffic with CNAME
Preventing Blocked HTTP Traffic with CNAME
Web SDK via Google Tag Manager
Preventing Blocked HTTP Traffic with CNAME
Upgrade to Version 2 of the SDK
Step 3. Set up your output
Step 8. Create a data plan
Step 9. Test your local app
Step 3. Set up your output
Step 8. Create a data plan
Step 3. Set up your output
Step 8. Create a data plan
Migrate from Segment to Client-side mParticle
Migrate from Segment to Server-side mParticle
The Developer's Guided Journey to mParticle
Download an audience from a journey
Audience A/B testing from a journey
Create a Next Best Action (NBA)
Activate Next Best Actions in Campaigns
Usage metering for value-based pricing (VBP)
Sync and Activate Analytics User Segments in mParticle
Apply All for Filter Where Clauses
Date Range and Time Settings Overview
Cumulative vs. Non-Cumulative Analysis in Segmentation
Total Count of vs. Users Who Performed
Time and Interval Settings in Dashboards
Optimize User Flow with A/B Testing
AWS Redshift (Define Your Own Schema)
AWS S3 Integration (Define Your Own Schema)
Rules allow you to cleanse, enrich and transform your incoming and outgoing data. A rule is a script which accepts an incoming mParticle Events API “batch” object and modifies it according to your business logic. Some example use-cases for a rule are:
Drop an event from a batch
Each of your Inputs, such as for your web, mobile, or server-to-server data, has an individually configured data pipeline, and each Input’s pipeline contains the same key stages. Rules are therefore applied for a specific Input’s pipeline, and it’s up to you choose where in that Input’s pipeline each Rule is executed. A single Input pipeline may contain multiple Rules each stage.
Data is received by mParticle for a specific Input (such as Web, iOS, or a custom server feed).
Stage 2 - Storage and Processing
The Input’s data is stored and processed by mParticle, including:
mParticle’s profile system, which stores user data and enriches the Input’s data based on the existing profile of that user.
The Input’s data is sent individually to the mParticle Audience system and 300+ partner integrations. In this stage the pipeline actually branches out with a single Input potentially being connected to many Outputs.
Rules are applied to a specific Input’s pipeline. There are two places in the pipeline where rules can be applied:
In between Stage 1 and Stage 2
Rules executed between Stage 1 and Stage 2 affect the data sent to both Stage 2 and then Stage 3, including the mParticle profile store, audience store, and all outputs. These are labeled “All Output” Rules in your mParticle dashboard.
In between Stage 2 and Stage 3
You can also apply a rule right before it’s sent to aspecificOutput. This lets you mutate data to handle specific requirements or mappings that need to occur for a given partner integration.
All rules accept an mParticle Events API batch object and can return a modified or null batch object.
There are some differences in error handling and available fields depending on pipeline location. SeeRules Developer Guidefor details.
A 200ms timeout applies to all rules. You can choose if a batch should be dropped or continue unprocessed by the rules in the case of a timeout.
Rules are executed on the server and only act on data forwarded downstream server-to-server. A warning is shown in the dashboard if you set up one of the following rules:A rule for integrations that forwards data client-side via a kit.A rule for hybrid integrations that support forwarding via client-side and server-to-server.
Rules are executed on the server and only act on data forwarded downstream server-to-server. A warning is shown in the dashboard if you set up one of the following rules:
A rule for integrations that forwards data client-side via a kit.
A rule for hybrid integrations that support forwarding via client-side and server-to-server.
If you are using a rule to modify user identities or user attributes, you must include a “User Identity Change Event” (user_identity_change) or a “User Attribute Change Event” (user_attribute_change). SeeRules Developer Guidefor an example ofuser_attribute_changein a rule.
mParticle rules are hosted in your AWS account as Lambda functions. To do this, you need to be able to provide an Amazon Resource Number (ARN) for your rule. See theAWS Lambda documentationfor help creating a function.  The Lambda functions used for rules must be hosted in the same AWS region as yourmParticle account.
The name of the function must begin with “mpr”
Your development rule must have an alias of “$LATEST”
Your production rule must have an alias of “PROD”
Your ARNs should look something like this:
To connect to your AWS Lambda function, you must provide the AWS Access Key ID and Secret Access Key for anIAM user.
In the IAM dashboard, add the following permissions policy for the user:
You will also need to create a role in IAM. Assign this role the same policy document created above.
Assign this role to each Lambda function you plan to deploy as an mParticle rule.
Creating a rule in the dashboard
Create a rule by navigating toData Master > Rules
Enter your Development and Production ARNs and clickTest.
When you first test a rule, you must select aFailure Action. This determines what happens if your rule throws an unhandled exception. There is no default action, you must select one of the following:
If you chooseDiscard, an unhandled exception causes your rule returnnull, effectively dropping the batch.
If you chooseProceed, an unhandled exception causes your rule to return the unaltered batch object, proceeding as if the rule had not been applied.
Regardless of which option you choose, it’s best practice to handle all exceptions in your code, rather than falling back on the above defaults. This is especially true if your rule deals with events, where an unhandled exception from just one event could lead to all events in the batch being dropped.
exports.handler=(batch,context,callback)=>{
    //do something with batch
    callback(null, batch)
}
exports.handler=(batch,context,callback)=>{
    //do something with batch
    callback(null, batch)
}
Your code must be a validLambda function.
batchis the complete incoming batch object.
contextis a required argument for Lambda functions, but is effectivelynullfor mParticle rules.
The first time you test a rule, you are asked to provide a name, description and failure action. After naming a rule, you can test it by using one of the sample templates provided in the Test rule dialog. You can also copy and paste batch JSON from your Live Stream. If you do this, be sure to pick a full batch to copy, not a single event.  ClickTestto run. Optionally, check a box to save your JSON template in local storage for future testing.
You must enter validbatchJSON in the code editor.
If there are any syntactical errors in your code, warning or error icons will display next to the line number with details of the problem so you can correct.
After clickingTest, you can examine the JSON output from your function to see that the input has been modified as expected.
After a successful test you can clickSaveto save the Rule. Due to recent updates in AWS Lambda, it may be necessary to wait one minute after a successful test in order to save the Rule.
If your test fails, try examining thelogsfor any console output.
When you first create a rule, by default it will only be applied toDEVdata. As well as testing a rule with sample JSON you should test the rule in your dev environment to make sure data reaching your output services is as expected. When you are ready to apply a rule to your production data, clickPromote to Prodon the rule page. This will create a “v1” production rule.
Note that before a rule can be promoted to Prod, you must remove allconsole.log()statements.
If you need to make changes, choose$LATESTfrom theVersiondropdown. All other versions are read only. Test your changes with your dev environment and, when you are ready, clickPromote to Prodto create “v2” of your production rule.
Note that you can have a maximum of 50 versions per rule. If you have too many versions, select a version and click the trash can icon to the right of the version number to delete it.
Each rule has a master switch in the Settings panel. If there is a problem with your rule, you can switch it off and it will be disabled for all connections until you enable it again. To disable, clickEditin the right sidebar and set theStatusslider toinactive.
Invocations- how many times the rule was invoked
Throttles- how many times a 429 throttling response was returned when calling the rule
Errors- how many errors have occurred when calling the rule
These metrics are for the last 24 hours and apply to all connections. Summaries for each rule can be seen on the main rules page. Detailed graph of the previous 24 hours is available on theMonitoringtab of the individual rule page.
To help you with troubleshooting rules, mParticle maintains logs for each rule where you can view all console output. From an individual rule page, select theLogstab. You can filter messages by date range or search for keywords.
From the rules listing, select theDeleteaction to delete the rule. If the rule is applied to any connections, it will be removed from those connections.
Creating a rule in the dashboard
Do Not Sell or Share My Personal Data
These cookies are necessary for the website to function and cannot be switched off in our systems. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.
Share Or Sale of Personal Data
Under the CPRA, you have the right to opt-out of the sale or sharing of your personal information to third parties. These cookies collect information for analytics and to personalize your experience with targeted ads. You may exercise your right to opt out of the sale or sharing of personal information by using this toggle switch. If you opt out we will not be able to offer you personalized ads and will not hand over your personal information to any third parties. Additionally, you may contact our legal department for further clarification about your rights as a California consumer by using this Exercise My Rights link.If you have enabled privacy controls on your browser (such as a plugin), we have to take that as a valid request to opt-out. Therefore we would not be able to track your activity through the web. This may affect our ability to personalize ads according to your preferences.
Targeting CookiesSwitch LabellabelThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
These cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
Performance CookiesSwitch LabellabelThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
Data Subject Request API Version 1 and 2
Data Subject Request API Version 3
Preventing Blocked HTTP Traffic with CNAME
Preventing Blocked HTTP Traffic with CNAME
Web SDK via Google Tag Manager
Preventing Blocked HTTP Traffic with CNAME
Upgrade to Version 2 of the SDK
Step 3. Set up your output
Step 8. Create a data plan
Step 9. Test your local app
Step 3. Set up your output
Step 8. Create a data plan
Step 3. Set up your output
Step 8. Create a data plan
Migrate from Segment to Client-side mParticle
Migrate from Segment to Server-side mParticle
The Developer's Guided Journey to mParticle
Download an audience from a journey
Audience A/B testing from a journey
Create a Next Best Action (NBA)
Activate Next Best Actions in Campaigns
Usage metering for value-based pricing (VBP)
Sync and Activate Analytics User Segments in mParticle
Apply All for Filter Where Clauses
Date Range and Time Settings Overview
Cumulative vs. Non-Cumulative Analysis in Segmentation
Total Count of vs. Users Who Performed
Time and Interval Settings in Dashboards
Optimize User Flow with A/B Testing
AWS Redshift (Define Your Own Schema)
AWS S3 Integration (Define Your Own Schema)
The mParticle JSON schema defines the structure of all data sent to the mParticle customer data platform from the HTTP API or the platform SDKs (such as the Web, iOS, or Android SDKs).
This same JSON schema also defines the structure of data sent from mParticle to output integrations. There are some differences between the format for inbound and outbound data. For a complete list of these differences, seedifferences between the inbound and outbound JSON format.
The following document includes several additional explanations and examples. Use the following rawJSON schemadefinitions for programmatic JSON generation and validation:
SeeJSON schema validationfor information about using these schemas to test and validate data structure.
All properties are optional and support both input and output unless specified otherwise in the Description.
The event object consists of two required nodes: data, and event_type.
The following event_type are allowed.  These values are specified in the type fields within the events node.
The type indicates the entity structure of the data node in the event.  There are also some common elements to all data nodes.
The details on location and device_current_state will be detailed after additional information on the event_type and the corresponding data nodes.
The values forcustom_event_typeappear in the criteria builder for audiences, journeys, and the Custom Events calculated attributes drop-down. For example,custom_event_type:mediaappears asMediain the criteria builder for audiences and  in the Select Event drop-down under Custom Events for calculated attributes.
The allowed values of “custom_event_type” are:
Attribution events are sent to mParticle as custom events with:
The custom event_name depends on the Attribution Type:
There are 3 core variations of the commerce_event.
Product-based- Used to measure data points associated with one or more products.These have a product_action and do NOT have a promotion_action or a product_impressions
Promotion-based- Used to measure data points associated with internal promotions or campaigns.These have a promotion_action and do NOT have a product_action or a product_impressions
Impression-based- Used to measure interactions with impressions of products and product-listings.These have a product_impressions and do NOT have a product_action or promotion_action
The allowed values of “action” are:
No additional fields are allowed in the data node.
No additional fields are allowed in the data node.
{"data":{"class_name":"NSInvalidArgumentException","breadcrumbs":[{}],"severity":"fatal","message":"-[MPCViewController crash]: unrecognized selector sent to instance 0x125e0d3d0","stack_trace":"Example Stack Trace here","exception_handled":false,"topmost_context":"MPCViewController","pl_crash_report_file_base64":"base64 string here","ios_image_base_address":4295507968,"ios_image_size":535216,"session_number":25,"event_id":6004677780660780000,"source_message_id":"e8335d31-2031-4bff-afec-17ffc1784697","session_id":4957918240501247982,"session_uuid":"91b86d0c-86cb-4124-a8b2-edee107de454","timestamp_unixtime_ms":1402521613976,"location":{},"device_current_state":{},"custom_attributes":{}},"event_type":"crash_report"}
{"data":{"class_name":"NSInvalidArgumentException","breadcrumbs":[{}],"severity":"fatal","message":"-[MPCViewController crash]: unrecognized selector sent to instance 0x125e0d3d0","stack_trace":"Example Stack Trace here","exception_handled":false,"topmost_context":"MPCViewController","pl_crash_report_file_base64":"base64 string here","ios_image_base_address":4295507968,"ios_image_size":535216,"session_number":25,"event_id":6004677780660780000,"source_message_id":"e8335d31-2031-4bff-afec-17ffc1784697","session_id":4957918240501247982,"session_uuid":"91b86d0c-86cb-4124-a8b2-edee107de454","timestamp_unixtime_ms":1402521613976,"location":{},"device_current_state":{},"custom_attributes":{}},"event_type":"crash_report"}
Note this is the location for an event, not an event batch. For information on setting event batch location, seeContext.
The context field lets you enable additional mParticle features such as Data Planning. By providing your plan’s id and version, you can start validating incoming data against your expectations. Learn more about Data Planninghere.
The context field also lets you specify a location for an event batch. Location can be set automatically for some outputs if none is specified. Location is set from the first event with a valid location or IP if there are no events with valid locations.
used to trigger behaviors for predefined data-points to a specific integration.
sent to the specific integration, and to all raw data event integrations (i.e. Amazon Kinesis, Amazon S3, Amazon SNS, Amazon SQS, Apache Kafka, Google Cloud Storage, Google Pub/Sub, Microsoft Azure Blob Storage, Microsoft Azure Event Hubs, Slack, and Webhook).  This differs from custom_attributes, which are will sent to all connected integrations which support generic key/value attributes.
cannot be used within an audience definition.
Reference the guide for each integration to see if you need to instrument custom flags. Custom flags are supported by the following partners:
{"device_info":{"brand":"iPhone6,1","product":"iPhone6,1","device":"John's iPhone 5s","android_uuid":null,"device_manufacturer":"Apple","platform":"iOS","os_version":"7.1.1","device_model":"iPhone6,1","screen_height":1136,"screen_width":640,"screen_dpi":160,"device_country":"USA","locale_language":"en","locale_country":"US","network_country":"us","network_carrier":"AT&T","network_code":"410","network_mobile_country_code":"310","timezone_offset":-4,"build_identifier":"M4-rc20","http_header_user_agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 7_1 like Mac OS X) AppleWebKit/537.51.2 (KHTML, like Gecko) Mobile/11D167 mParticle/2.5.0","ios_advertising_id":"613ff528-afd1-4c1b-9628-e6ed25ece9c0","att_authorization_status":"authorized","att_timestamp_unixtime_ms":1614187122051,"push_token":"<e481f135 9629f0c3 fb634be0 82ca18b1 73ea45a2 b0b96a6e 2a00c829 bc9ff6eb>","cpu_architecture":"arm64","is_tablet":false,"push_notification_sound_enabled":true,"push_notification_vibrate_enabled":false,"radio_access_technology":"LTE","supports_telephony":"","has_nfc":false,"bluetooth_enabled":true,"bluetooth_version":"","ios_idfv":"8c61383f-2216-4713-8c1c-1cb0a5d7a4cc","android_advertising_id":"","limit_ad_tracking":false,"is_dst":false}}
{"device_info":{"brand":"iPhone6,1","product":"iPhone6,1","device":"John's iPhone 5s","android_uuid":null,"device_manufacturer":"Apple","platform":"iOS","os_version":"7.1.1","device_model":"iPhone6,1","screen_height":1136,"screen_width":640,"screen_dpi":160,"device_country":"USA","locale_language":"en","locale_country":"US","network_country":"us","network_carrier":"AT&T","network_code":"410","network_mobile_country_code":"310","timezone_offset":-4,"build_identifier":"M4-rc20","http_header_user_agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 7_1 like Mac OS X) AppleWebKit/537.51.2 (KHTML, like Gecko) Mobile/11D167 mParticle/2.5.0","ios_advertising_id":"613ff528-afd1-4c1b-9628-e6ed25ece9c0","att_authorization_status":"authorized","att_timestamp_unixtime_ms":1614187122051,"push_token":"<e481f135 9629f0c3 fb634be0 82ca18b1 73ea45a2 b0b96a6e 2a00c829 bc9ff6eb>","cpu_architecture":"arm64","is_tablet":false,"push_notification_sound_enabled":true,"push_notification_vibrate_enabled":false,"radio_access_technology":"LTE","supports_telephony":"","has_nfc":false,"bluetooth_enabled":true,"bluetooth_version":"","ios_idfv":"8c61383f-2216-4713-8c1c-1cb0a5d7a4cc","android_advertising_id":"","limit_ad_tracking":false,"is_dst":false}}
{"application_info":{"application_name":"App Name","application_version":"1.0.1","application_build_number":"42","install_referrer":"utm_campaign=my_campaign&utm_source=google&utm_medium=cpc&utm_term=my_keyword&utm_content=ad_variation1","package":"com.mparticle.test","apple_search_ads_attributes":{"Version3.1":{"iad-lineitem-id":"9590781","iad-keyword":"foo","iad-org-name":"bar","iad-conversion-date":"11/04/2016 00:13:15","iad-attribution":"true","iad-adgroup-name":"Test Ad Group - Brand - Exact","iad-campaign-id":"123456","iad-adgroup-id":"654321","iad-lineitem-name":"Test Ad Group - Brand - Exact","iad-campaign-name":"Test Campaign - Brand","iad-click-date":"11/04/2016 00:13:09","iad-conversion-type":"Download","iad-keyword-matchtype":"Broad"}}}}
{"application_info":{"application_name":"App Name","application_version":"1.0.1","application_build_number":"42","install_referrer":"utm_campaign=my_campaign&utm_source=google&utm_medium=cpc&utm_term=my_keyword&utm_content=ad_variation1","package":"com.mparticle.test","apple_search_ads_attributes":{"Version3.1":{"iad-lineitem-id":"9590781","iad-keyword":"foo","iad-org-name":"bar","iad-conversion-date":"11/04/2016 00:13:15","iad-attribution":"true","iad-adgroup-name":"Test Ad Group - Brand - Exact","iad-campaign-id":"123456","iad-adgroup-id":"654321","iad-lineitem-name":"Test Ad Group - Brand - Exact","iad-campaign-name":"Test Campaign - Brand","iad-click-date":"11/04/2016 00:13:09","iad-conversion-type":"Download","iad-keyword-matchtype":"Broad"}}}}
The properties with the prefix ”$” are reserved attributes that drive specific behaviors in our platform.  This object can also contain any number of custom user attributes that you can define from within your app.  Custom attributes also allow for lists of values instead of scalar values, but in general a given attribute should not change between a scalar and a list in subsequent calls.
Partner Identities are unique identifiers associated with a user, but specific to a partner system. They can be ingested by mParticle via Partner Feed or our S2S API, and can be sent to downstream connections associated with the given partner. A Partner Feed canonlysend in their registered partner identity, whereas a S2S request can includeanypartner identity.
A Partner Feed sends in a partner identity that is not associated with the partner.
An unregistered partner identity is sent.
An unregistered partner identity is sent.
Before a partner’s unique identity can be ingested, it must be registered with mParticle. Partners can register a new identity by either:
Updating your Firehose module, if applicable. For more information, seeFirehose — Partner Identities.
The naming convention for these identities is as follows:PartnerName_IdentityName.
An example for mParticle could be:mParticle_mpid
Integration attributes are unique values associated with a given user, for a given integration. They are generally required for the integration to function properly.
The JSON blob is indexed byModule ID, meaning each integration can have its own values:
In order to find out a given integration’s ID, you can check the correspondingURLfrom themParticle Directory.
Used to communicate the GDPRconsent statefor the user. For GDPR, you must define the purposes (shown here aslocation_collectionandparental) in the mParticle UI. For CCPA, only the below purpose is allowed and it does not need to be defined. Passconsented: trueto register a users opt-out to CCPA data sale.
{"consent_state":{"gdpr":{"location_collection":{"consented":true,"document":"location_collection_agreement_v4","timestamp_unixtime_ms":1523039002083,"location":"17 Cherry Tree Lane","hardware_id":"IDFA:a5d934n0-232f-4afc-2e9a-3832d95zc702"},"parental":{"consented":false,"document":"parental_consent_agreement_v2","timestamp_unixtime_ms":1523039002083,"location":"17 Cherry Tree Lane","hardware_id":"IDFA:a5d934n0-232f-4afc-2e9a-3832d95zc702"}},"ccpa":{"data_sale_opt_out":{"consented":true,"document":null,"timestamp_unixtime_ms":1523039002083,"location":null,"hardware_id":null}}}}
{"consent_state":{"gdpr":{"location_collection":{"consented":true,"document":"location_collection_agreement_v4","timestamp_unixtime_ms":1523039002083,"location":"17 Cherry Tree Lane","hardware_id":"IDFA:a5d934n0-232f-4afc-2e9a-3832d95zc702"},"parental":{"consented":false,"document":"parental_consent_agreement_v2","timestamp_unixtime_ms":1523039002083,"location":"17 Cherry Tree Lane","hardware_id":"IDFA:a5d934n0-232f-4afc-2e9a-3832d95zc702"}},"ccpa":{"data_sale_opt_out":{"consented":true,"document":null,"timestamp_unixtime_ms":1523039002083,"location":null,"hardware_id":null}}}}
This node is populated automatically by mParticle on receiving a batch. You do not need to sendsource_info.
This node is available in the mParticleRulesenvironment, but all values are immutable.
{"environment":"production","device_info":{"brand":"iPhone6,1","product":"iPhone6,1","device":"John's iPhone 5s","android_uuid":"","device_manufacturer":"Apple","platform":"iOS","os_version":"7.1.1","device_model":"iPhone6,1","screen_height":1136,"screen_width":640,"screen_dpi":160,"device_country":"USA","locale_language":"en","locale_country":"US","network_country":"us","network_carrier":"AT&T","network_code":"410","network_mobile_country_code":"310","timezone_offset":-4,"build_identifier":"M4-rc20","http_header_user_agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 7_1 like Mac OS X) AppleWebKit/537.51.2 (KHTML, like Gecko) Mobile/11D167 mParticle/2.5.0","ios_advertising_id":"613ff528-afd1-4c1b-9628-e6ed25ece9c0","att_authorization_status":"authorized","att_timestamp_unixtime_ms":1614187122051,"push_token":"<e481f135 9629f0c3 fb634be0 82ca18b1 73ea45a2 b0b96a6e 2a00c829 bc9ff6eb>","cpu_architecture":"arm64","is_tablet":false,"push_notification_sound_enabled":true,"push_notification_vibrate_enabled":false,"radio_access_technology":"LTE","supports_telephony":null,"has_nfc":false,"bluetooth_enabled":true,"bluetooth_version":"","ios_idfv":"8c61383f-2216-4713-8c1c-1cb0a5d7a4cc","android_advertising_id":null,"limit_ad_tracking":false,"is_dst":false},"application_info":{"application_name":"App Name","application_version":"1.0.1","application_build_number":"42","install_referrer":"utm_campaign=my_campaign&utm_source=google&utm_medium=cpc&utm_term=my_keyword&utm_content=ad_variation1","package":"com.newco.myapp"},"user_attributes":{"$age":"18","$gender":"M","$country":"USA","$zip":"10016","$city":"New York","$state":"NY","$address":"381 Park Avenue S","$firstname":"John","$lastname":"Doe","$mobile":"123-456-7890","a_custom_attribute":"some_value","a_custom_list":["value1","value2","valueN"]},"deleted_user_attributes":["an_old_attribute_name","another_old_attribute"],"user_identities":{"customer_id":"1234","email":"helpers@mparticle.com","facebook":"helpers@mparticle.com","twitter":"helpers@mparticle.com","google":"helpers@mparticle.com","microsoft":"helpers@mparticle.com","alias":"helpers@mparticle.com","other":"helpers@mparticle.com"},"partner_identities":{"partner_id":"1234"},"integration_attributes":{"123":{"key":"value"}},"events":[{"data":{"timestamp_unixtime_ms":1432825980486,"source_message_id":"4e34bef3-d2f9-4f07-8298-4646cce292fa","session_uuid":"DDFBEA89-9A54-41C3-97F3-334FDD3B98BC","session_id":123141241343},"event_type":"session_start"},{"data":{"application_transition_type":"application_background","event_id":-1586912177303106600,"session_uuid":"DDFBEA89-9A54-41C3-97F3-334FDD3B98BC","timestamp_unixtime_ms":1402578873533,"is_first_run":false,"is_upgrade":true,"successfully_closed":true,"push_notification_payload":null,"launch_referral":null,"location":{"latitude":40.7142,"longitude":74.0064,"accuracy":195.0165104914573},"device_current_state":{"time_since_start_ms":713485,"battery_level":-1,"data_connection_type":"wifi","gps_state":true,"total_system_memory_usage_bytes":2981494784,"disk_space_free_bytes":29655015424,"cpu":"0","system_memory_available_bytes":182730752,"application_memory_total_bytes":17813504,"device_orientation":6,"status_bar_orientation":1}},"event_type":"application_state_transition"},{"data":{"class_name":"NSInvalidArgumentException","severity":"fatal","message":"-[MPCViewController crash]: unrecognized selector sent to instance 0x125e0d3d0","stack_trace":"Example Stack Trace here","topmost_context":"MPCViewController","pl_crash_report_file_base64":"base64 string here","ios_image_base_address":4295507968,"ios_image_size":535216,"event_id":1558493756361828400,"timestamp_unixtime_ms":1402579716192,"location":{"latitude":40.7142,"longitude":74.0064,"accuracy":195.0165104914573},"device_current_state":{"time_since_start_ms":106554,"battery_level":-1,"data_connection_type":"wifi","gps_state":true,"total_system_memory_usage_bytes":2995585024,"disk_space_free_bytes":29653184512,"cpu":"0","system_memory_available_bytes":300056576,"application_memory_total_bytes":18108416,"device_orientation":6,"status_bar_orientation":1}},"event_type":"crash_report"},{"data":{"timestamp_unixtime_ms":1432825994215,"session_duration_ms":60000,"source_message_id":"93862b36-adf3-43e6-87d2-2fcbf3f6d903","session_uuid":"DDFBEA89-9A54-41C3-97F3-334FDD3B98BC","custom_attributes":{"key23":"value2"}},"event_type":"session_end"}]}
{"environment":"production","device_info":{"brand":"iPhone6,1","product":"iPhone6,1","device":"John's iPhone 5s","android_uuid":"","device_manufacturer":"Apple","platform":"iOS","os_version":"7.1.1","device_model":"iPhone6,1","screen_height":1136,"screen_width":640,"screen_dpi":160,"device_country":"USA","locale_language":"en","locale_country":"US","network_country":"us","network_carrier":"AT&T","network_code":"410","network_mobile_country_code":"310","timezone_offset":-4,"build_identifier":"M4-rc20","http_header_user_agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 7_1 like Mac OS X) AppleWebKit/537.51.2 (KHTML, like Gecko) Mobile/11D167 mParticle/2.5.0","ios_advertising_id":"613ff528-afd1-4c1b-9628-e6ed25ece9c0","att_authorization_status":"authorized","att_timestamp_unixtime_ms":1614187122051,"push_token":"<e481f135 9629f0c3 fb634be0 82ca18b1 73ea45a2 b0b96a6e 2a00c829 bc9ff6eb>","cpu_architecture":"arm64","is_tablet":false,"push_notification_sound_enabled":true,"push_notification_vibrate_enabled":false,"radio_access_technology":"LTE","supports_telephony":null,"has_nfc":false,"bluetooth_enabled":true,"bluetooth_version":"","ios_idfv":"8c61383f-2216-4713-8c1c-1cb0a5d7a4cc","android_advertising_id":null,"limit_ad_tracking":false,"is_dst":false},"application_info":{"application_name":"App Name","application_version":"1.0.1","application_build_number":"42","install_referrer":"utm_campaign=my_campaign&utm_source=google&utm_medium=cpc&utm_term=my_keyword&utm_content=ad_variation1","package":"com.newco.myapp"},"user_attributes":{"$age":"18","$gender":"M","$country":"USA","$zip":"10016","$city":"New York","$state":"NY","$address":"381 Park Avenue S","$firstname":"John","$lastname":"Doe","$mobile":"123-456-7890","a_custom_attribute":"some_value","a_custom_list":["value1","value2","valueN"]},"deleted_user_attributes":["an_old_attribute_name","another_old_attribute"],"user_identities":{"customer_id":"1234","email":"helpers@mparticle.com","facebook":"helpers@mparticle.com","twitter":"helpers@mparticle.com","google":"helpers@mparticle.com","microsoft":"helpers@mparticle.com","alias":"helpers@mparticle.com","other":"helpers@mparticle.com"},"partner_identities":{"partner_id":"1234"},"integration_attributes":{"123":{"key":"value"}},"events":[{"data":{"timestamp_unixtime_ms":1432825980486,"source_message_id":"4e34bef3-d2f9-4f07-8298-4646cce292fa","session_uuid":"DDFBEA89-9A54-41C3-97F3-334FDD3B98BC","session_id":123141241343},"event_type":"session_start"},{"data":{"application_transition_type":"application_background","event_id":-1586912177303106600,"session_uuid":"DDFBEA89-9A54-41C3-97F3-334FDD3B98BC","timestamp_unixtime_ms":1402578873533,"is_first_run":false,"is_upgrade":true,"successfully_closed":true,"push_notification_payload":null,"launch_referral":null,"location":{"latitude":40.7142,"longitude":74.0064,"accuracy":195.0165104914573},"device_current_state":{"time_since_start_ms":713485,"battery_level":-1,"data_connection_type":"wifi","gps_state":true,"total_system_memory_usage_bytes":2981494784,"disk_space_free_bytes":29655015424,"cpu":"0","system_memory_available_bytes":182730752,"application_memory_total_bytes":17813504,"device_orientation":6,"status_bar_orientation":1}},"event_type":"application_state_transition"},{"data":{"class_name":"NSInvalidArgumentException","severity":"fatal","message":"-[MPCViewController crash]: unrecognized selector sent to instance 0x125e0d3d0","stack_trace":"Example Stack Trace here","topmost_context":"MPCViewController","pl_crash_report_file_base64":"base64 string here","ios_image_base_address":4295507968,"ios_image_size":535216,"event_id":1558493756361828400,"timestamp_unixtime_ms":1402579716192,"location":{"latitude":40.7142,"longitude":74.0064,"accuracy":195.0165104914573},"device_current_state":{"time_since_start_ms":106554,"battery_level":-1,"data_connection_type":"wifi","gps_state":true,"total_system_memory_usage_bytes":2995585024,"disk_space_free_bytes":29653184512,"cpu":"0","system_memory_available_bytes":300056576,"application_memory_total_bytes":18108416,"device_orientation":6,"status_bar_orientation":1}},"event_type":"crash_report"},{"data":{"timestamp_unixtime_ms":1432825994215,"session_duration_ms":60000,"source_message_id":"93862b36-adf3-43e6-87d2-2fcbf3f6d903","session_uuid":"DDFBEA89-9A54-41C3-97F3-334FDD3B98BC","custom_attributes":{"key23":"value2"}},"event_type":"session_end"}]}
Differences between incoming and outgoing JSON
Described above is the format required for sending data to mParticle via the Events API. A very similar format is used to send data to event outputs that accept raw JSON, including:
For these forwarders, mParticle makes our output as complete as possible, including fields only used internally or fields that are set automatically by mParticle and not part of the inbound JSON reference. The most important difference between incoming and outgoing JSON is that theuser_identitiesfield isexpanded in the outgoing JSONto include additional information. In most other cases, additional fields added in the outgoing JSON are intended for internal use or to support edge cases and should be ignored unless you have a special need for these fields.
mParticle may add identifiers for the batch (batch_id), and each event (message_id). These are used by mParticle for internal processing tasks like de-duping.
mParticle adds amessage_typefield to each event, which is used for internal processing.
mParticle may add session management fields to each event:session_id,session_uuidandsession_start_unixtime.
Outbound JSON will include anevent_start_unixtime_msfield. In almost all cases this will be the same as the main eventtimestamp_unixtime_msfield. It exists to support timed event use cases.
mParticle adds a top-level batch timestamp —timestamp_unixtime_ms— representing the time the batch was received by mParticle. This field is created by mParticle and should not be set manually when sending data via the Events API.
Some fields are set automatically by one or more native SDKs. For example, the Android SDK automatically sets anactivity_typeofactivity_startedoractivity_stoppedon Screen View events. This field is used by some event integrations to determine how to forward the event.
Thesystem_notificationsfield is currently used by mParticle to forwardchanges in consent stateto some partners. In outbound JSON this field is present but empty unless you are instrumenting data privacy controls.
mParticle may add a top-level batchunique_idfield if you enter a value for the Unique ID connection setting.
In outgoing JSON, theuser_identitiesnode is an array of identity objects. Each object contains the identity type, the value, and a timestamp showing when the identity was last updated. For example:
mParticle’s server-side SDKs are designed to generate correct JSON in all cases. If you are unable to use mParticle’s SDKs, you can use the mParticle Events API JSON schema documents to validate your JSON prior to upload.
The following example uses the popularjsonschemalibraryand performs the following:
Downloads the latest Event API schemas (both the single and bulk variations)
Creates an arbitrary example upload as a dictionary
Validates both the single and bulk instance objects
fromjsonschemaimportvalidate,exceptionsimporturllib.request,json

schema_url="https://docs.mparticle.com/schema/mparticle.inbound.eventsapi.schema.json"url=urllib.request.urlopen(schema_url)schema=json.loads(url.read().decode())bulk_schema_url="https://docs.mparticle.com/schema/mparticle.inbound.eventsapi.bulk.schema.json"bulk_url=urllib.request.urlopen(bulk_schema_url)bulk_schema=json.loads(bulk_url.read().decode())# Create a dictionary to be validatedinstance={"source_request_id":"769D83CB-8C60-48F9-A0C1-C38CF1B40A4F","device_info":{"ios_advertising_id":"1cc8138f-8aaf-410a-b0b9-6465cfb2af6a","ios_idfv":"0f129dcb-d5b9-450b-9003-a38a7b7e946d","att_authorization_status":"authorized","att_timestamp_unixtime_ms":1614187122051},"user_attributes":{"Test attribute":"Test value"},"user_identities":{"customer_id":"123456"},"environment":"production"}# You can also load an existing JSON string into a dictionary# instance = json.loads("{}")# If you're sending via the bulk endpoint, create an array of batchesbulk_instance=[instance]try:# If your JSON is badly formed, this will throw a ValidationErrorvalidate(instance=instance,schema=schema)validate(instance=bulk_instance,schema=bulk_schema)exceptexceptions.ValidationErrorase:# Read more on ValidationError objects here:# https://python-jsonschema.readthedocs.io/en/stable/errors/print(e.message)print(e.path)
fromjsonschemaimportvalidate,exceptionsimporturllib.request,json

schema_url="https://docs.mparticle.com/schema/mparticle.inbound.eventsapi.schema.json"url=urllib.request.urlopen(schema_url)schema=json.loads(url.read().decode())bulk_schema_url="https://docs.mparticle.com/schema/mparticle.inbound.eventsapi.bulk.schema.json"bulk_url=urllib.request.urlopen(bulk_schema_url)bulk_schema=json.loads(bulk_url.read().decode())# Create a dictionary to be validatedinstance={"source_request_id":"769D83CB-8C60-48F9-A0C1-C38CF1B40A4F","device_info":{"ios_advertising_id":"1cc8138f-8aaf-410a-b0b9-6465cfb2af6a","ios_idfv":"0f129dcb-d5b9-450b-9003-a38a7b7e946d","att_authorization_status":"authorized","att_timestamp_unixtime_ms":1614187122051},"user_attributes":{"Test attribute":"Test value"},"user_identities":{"customer_id":"123456"},"environment":"production"}# You can also load an existing JSON string into a dictionary# instance = json.loads("{}")# If you're sending via the bulk endpoint, create an array of batchesbulk_instance=[instance]try:# If your JSON is badly formed, this will throw a ValidationErrorvalidate(instance=instance,schema=schema)validate(instance=bulk_instance,schema=bulk_schema)exceptexceptions.ValidationErrorase:# Read more on ValidationError objects here:# https://python-jsonschema.readthedocs.io/en/stable/errors/print(e.message)print(e.path)
See theJSON Schema specification homepagefor more JSON Schema validation tools.
Differences between incoming and outgoing JSON
Do Not Sell or Share My Personal Data
These cookies are necessary for the website to function and cannot be switched off in our systems. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.
Share Or Sale of Personal Data
Under the CPRA, you have the right to opt-out of the sale or sharing of your personal information to third parties. These cookies collect information for analytics and to personalize your experience with targeted ads. You may exercise your right to opt out of the sale or sharing of personal information by using this toggle switch. If you opt out we will not be able to offer you personalized ads and will not hand over your personal information to any third parties. Additionally, you may contact our legal department for further clarification about your rights as a California consumer by using this Exercise My Rights link.If you have enabled privacy controls on your browser (such as a plugin), we have to take that as a valid request to opt-out. Therefore we would not be able to track your activity through the web. This may affect our ability to personalize ads according to your preferences.
Targeting CookiesSwitch LabellabelThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
These cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
Performance CookiesSwitch LabellabelThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
Data Subject Request API Version 1 and 2
Data Subject Request API Version 3
Preventing Blocked HTTP Traffic with CNAME
Preventing Blocked HTTP Traffic with CNAME
Web SDK via Google Tag Manager
Preventing Blocked HTTP Traffic with CNAME
Upgrade to Version 2 of the SDK
Step 3. Set up your output
Step 8. Create a data plan
Step 9. Test your local app
Step 3. Set up your output
Step 8. Create a data plan
Step 3. Set up your output
Step 8. Create a data plan
Migrate from Segment to Client-side mParticle
Migrate from Segment to Server-side mParticle
The Developer's Guided Journey to mParticle
Download an audience from a journey
Audience A/B testing from a journey
Create a Next Best Action (NBA)
Activate Next Best Actions in Campaigns
Usage metering for value-based pricing (VBP)
Sync and Activate Analytics User Segments in mParticle
Apply All for Filter Where Clauses
Date Range and Time Settings Overview
Cumulative vs. Non-Cumulative Analysis in Segmentation
Total Count of vs. Users Who Performed
Time and Interval Settings in Dashboards
Optimize User Flow with A/B Testing
AWS Redshift (Define Your Own Schema)
AWS S3 Integration (Define Your Own Schema)
AppsFlyer is a leading Mobile Attribution & Marketing Analytics platform that allows app marketers to easily measure the performance of all their marketing channels - paid, organic and social - from a single real-time dashboard.
The following types of data can be configured to be sent from AppsFlyer to mParticle
By default, events from AppsFlyer will be processed as Attribution Events with the following parameters:
For AppsFlyer uninstall events, the event will be processed with the following parameters:
AppsFlyer attribution events are mapped as follows:
SelectDirectory, and click the AppsFlyer tile
Select theInput FeedIntegration Type and clickAdd to Setup
Select theAppsFlyerinput configuration group to specify the configuration parameters:
Follow these instructions to configure the postback inAppsFlyer.
Enter the mParticle Token, copied from above.
Do Not Sell or Share My Personal Data
These cookies are necessary for the website to function and cannot be switched off in our systems. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.
Share Or Sale of Personal Data
Under the CPRA, you have the right to opt-out of the sale or sharing of your personal information to third parties. These cookies collect information for analytics and to personalize your experience with targeted ads. You may exercise your right to opt out of the sale or sharing of personal information by using this toggle switch. If you opt out we will not be able to offer you personalized ads and will not hand over your personal information to any third parties. Additionally, you may contact our legal department for further clarification about your rights as a California consumer by using this Exercise My Rights link.If you have enabled privacy controls on your browser (such as a plugin), we have to take that as a valid request to opt-out. Therefore we would not be able to track your activity through the web. This may affect our ability to personalize ads according to your preferences.
Targeting CookiesSwitch LabellabelThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
These cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
Performance CookiesSwitch LabellabelThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
Data Subject Request API Version 1 and 2
Data Subject Request API Version 3
Preventing Blocked HTTP Traffic with CNAME
Preventing Blocked HTTP Traffic with CNAME
Web SDK via Google Tag Manager
Preventing Blocked HTTP Traffic with CNAME
Upgrade to Version 2 of the SDK
Step 3. Set up your output
Step 8. Create a data plan
Step 9. Test your local app
Step 3. Set up your output
Step 8. Create a data plan
Step 3. Set up your output
Step 8. Create a data plan
Migrate from Segment to Client-side mParticle
Migrate from Segment to Server-side mParticle
The Developer's Guided Journey to mParticle
Download an audience from a journey
Audience A/B testing from a journey
Create a Next Best Action (NBA)
Activate Next Best Actions in Campaigns
Usage metering for value-based pricing (VBP)
Sync and Activate Analytics User Segments in mParticle
Apply All for Filter Where Clauses
Date Range and Time Settings Overview
Cumulative vs. Non-Cumulative Analysis in Segmentation
Total Count of vs. Users Who Performed
Time and Interval Settings in Dashboards
Optimize User Flow with A/B Testing
AWS Redshift (Define Your Own Schema)
AWS S3 Integration (Define Your Own Schema)
mParticle is a customer data platform that makes it easy to collect and organize data before sending it to product analytics, A/B testing, marketing automation, and data warehousing tools.
mParticle provides several SDKs and APIs allowing you to collect data from a variety of sources, like a mobile app, web app, or data feeds from other SaaS providers.
You can collect two types of data with mParticle:
Event data: data that describes what your users are doing
User data: data that describes who your users are
Learn how to integrate the Android SDK from start to finish
To demonstrate how mParticle works, you will learn how to track basic event data like page views and purchase events in a web app using the mParticle Android SDK. Then, you will learn how to send that data to a webhook. You will also learn how to manage your data quality by creating a data plan.
mParticle is extremely flexible. There are thirteen SDKs for specific platforms like web, iOS, and Android, in addition to several APIs. mParticle also provides over 250 integrations with data warehouse, analytics, and marketing automation tools.
To keep your first steps with mParticle quick and easy, this tutorial uses the Android SDK and a sample ecommerce app calledThe Higgs Shop.
mParticle’s Android SDK supports all Android devices and tablets, including Amazon Fire TV.
By initializing the Android SDK in your app, you gain access to useful methods you can call in your app’s code to send events and user data to mParticle.
In order to begin sending data from your app to mParticle, you will need access to an mParticle account and an API key.
This tutorial demonstrates how mParticle works using The Higgs Shop, a sample Android application written in theKotlinprogramming language.
Open your terminal or command prompt, and clone the Androidsample app repositoryon GitHub.
Open the sample app in your IDE and configure your virtual device
If you don’t already haveAndroid Studioinstalled on your computer, download and install the correction version for your OS now. You may use another IDE, but we recommend Android Studio.
Open your cloned directory for the Android sample app inAndroid Studioor your IDE of choice.
If you haven’t configured a virtual device to emulate the sample app in, click theDevice Managerbutton in the top tool bar.
Select a device category and name in the modal window. We recommendPhoneand any version ofPixel. ClickNext.
Select or download one of the recommended system images and clickNext.
After entering an AVD Name for your configuration, select the Portrait orientation (selected by default), and clickFinish.
With your new virtual device configured, clickRunin the top toolbar to ensure that you can successfully build the sample app.
For now, ignore the API key warning that appears. In the next step, you will create and add your API key and secret before restarting the sample app.
Learn how to integrate the Android SDK from start to finish
Open the sample app in your IDE and configure your virtual device
Do Not Sell or Share My Personal Data
These cookies are necessary for the website to function and cannot be switched off in our systems. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.
Share Or Sale of Personal Data
Under the CPRA, you have the right to opt-out of the sale or sharing of your personal information to third parties. These cookies collect information for analytics and to personalize your experience with targeted ads. You may exercise your right to opt out of the sale or sharing of personal information by using this toggle switch. If you opt out we will not be able to offer you personalized ads and will not hand over your personal information to any third parties. Additionally, you may contact our legal department for further clarification about your rights as a California consumer by using this Exercise My Rights link.If you have enabled privacy controls on your browser (such as a plugin), we have to take that as a valid request to opt-out. Therefore we would not be able to track your activity through the web. This may affect our ability to personalize ads according to your preferences.
Targeting CookiesSwitch LabellabelThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
These cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
Performance CookiesSwitch LabellabelThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
Data Subject Request API Version 1 and 2
Data Subject Request API Version 3
Preventing Blocked HTTP Traffic with CNAME
Preventing Blocked HTTP Traffic with CNAME
Web SDK via Google Tag Manager
Preventing Blocked HTTP Traffic with CNAME
Upgrade to Version 2 of the SDK
Step 3. Set up your output
Step 8. Create a data plan
Step 9. Test your local app
Step 3. Set up your output
Step 8. Create a data plan
Step 3. Set up your output
Step 8. Create a data plan
Migrate from Segment to Client-side mParticle
Migrate from Segment to Server-side mParticle
The Developer's Guided Journey to mParticle
Download an audience from a journey
Audience A/B testing from a journey
Create a Next Best Action (NBA)
Activate Next Best Actions in Campaigns
Usage metering for value-based pricing (VBP)
Sync and Activate Analytics User Segments in mParticle
Apply All for Filter Where Clauses
Date Range and Time Settings Overview
Cumulative vs. Non-Cumulative Analysis in Segmentation
Total Count of vs. Users Who Performed
Time and Interval Settings in Dashboards
Optimize User Flow with A/B Testing
AWS Redshift (Define Your Own Schema)
AWS S3 Integration (Define Your Own Schema)
mParticle is a customer data platform that makes it easy to collect and organize data before sending it to product analytics, A/B testing, marketing automation, and data warehousing tools.
mParticle provides several SDKs and APIs allowing you to collect data from a variety of sources, like a mobile app, web app, or data feeds from other SaaS providers.
You can collect two types of data with mParticle:
Event data: data that describes what your users are doing
User data: data that describes who your users are
Learn how to integrate the Web SDK from start to finish
To demonstrate how mParticle works, you will learn how to track basic event data like page views and purchase events in a web app using the mParticle web SDK. Then, you will learn how to send that data to a webhook. You will also learn how to manage your data quality by creating a data plan.
mParticle is extremely flexible. There are thirteen SDKs for specific platforms like web, iOS, and Android, in addition to several APIs. mParticle also provides over 250 integrations with data warehouse, analytics, and marketing automation tools.
To keep your first steps with mParticle quick and easy, this tutorial uses the web SDK and a sample ecommerce app built using React calledThe Higgs Shop.
mParticle’s Web SDK supports commonly used web browsers, connected TVs, and other client-side environments using JavaScript and TypeScript.
By initializing the Web SDK in your app, you gain access to useful methods you can call in your app’s code to send events and user data to mParticle.
In order to begin sending data from your app to mParticle, you will need access to an mParticle account and an API key.
This tutorial demonstrates how mParticle works using The Higgs Shop, a sample web application built using React.
Open your terminal or command prompt, and clone the websample app repositoryon GitHub.
While in your terminal or command prompt, navigate to the root folder of the web sample app:/mparticle-sample-apps/mparticle-web-sample-apps/core-sdk-samples/higgs-shop-sample-app
If you don’t haveNode.jsornpminstalled, install them now. Optionally, you may also installNode Version Manager(nvm) which is a helpful tool for installing and managing different versions of Node.
Install the sample app’s dependencies withnpm install
Open the folder /higgs-shop-sample-app in your IDE or text editor. Rename the file.env.sampleto.env. We will replace the environment variableREACT_APP_MPARTICLE_API_KEYwith the API Key in step 5
To run the sample app from your computer, runnpm start. This will start a development server before automatically opening The Higgs Shop in a new browser window.
For now, ignore the API key warning and close the page and stop the development server in your terminal or command prompt. In the next step, we’ll create and add our API key before restarting the sample app.
Learn how to integrate the Web SDK from start to finish
Do Not Sell or Share My Personal Data
These cookies are necessary for the website to function and cannot be switched off in our systems. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.
Share Or Sale of Personal Data
Under the CPRA, you have the right to opt-out of the sale or sharing of your personal information to third parties. These cookies collect information for analytics and to personalize your experience with targeted ads. You may exercise your right to opt out of the sale or sharing of personal information by using this toggle switch. If you opt out we will not be able to offer you personalized ads and will not hand over your personal information to any third parties. Additionally, you may contact our legal department for further clarification about your rights as a California consumer by using this Exercise My Rights link.If you have enabled privacy controls on your browser (such as a plugin), we have to take that as a valid request to opt-out. Therefore we would not be able to track your activity through the web. This may affect our ability to personalize ads according to your preferences.
Targeting CookiesSwitch LabellabelThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
These cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
Performance CookiesSwitch LabellabelThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
Data Subject Request API Version 1 and 2
Data Subject Request API Version 3
Preventing Blocked HTTP Traffic with CNAME
Preventing Blocked HTTP Traffic with CNAME
Web SDK via Google Tag Manager
Preventing Blocked HTTP Traffic with CNAME
Upgrade to Version 2 of the SDK
Step 3. Set up your output
Step 8. Create a data plan
Step 9. Test your local app
Step 3. Set up your output
Step 8. Create a data plan
Step 3. Set up your output
Step 8. Create a data plan
Migrate from Segment to Client-side mParticle
Migrate from Segment to Server-side mParticle
The Developer's Guided Journey to mParticle
Download an audience from a journey
Audience A/B testing from a journey
Create a Next Best Action (NBA)
Activate Next Best Actions in Campaigns
Usage metering for value-based pricing (VBP)
Sync and Activate Analytics User Segments in mParticle
Apply All for Filter Where Clauses
Date Range and Time Settings Overview
Cumulative vs. Non-Cumulative Analysis in Segmentation
Total Count of vs. Users Who Performed
Time and Interval Settings in Dashboards
Optimize User Flow with A/B Testing
AWS Redshift (Define Your Own Schema)
AWS S3 Integration (Define Your Own Schema)
The mParticle Facebook Audiences integration allows you to forward mParticle audience data directly to a Facebook Ads Manager account for use with Facebook Custom Audiences, making it easy to target existing or prospective customers.
Access to a Facebook Ad account
You must have Full Access to the Facebook Ads account you want to forward your audience data to. To check if you have Full Access:
Log into the Meta Business Suite atbusiness.facebook.com
Select the Meta business portfolio you want to send your audience data to.
Go toSettings > Accounts > Ad Accounts, and select the Ad account you want to use. ClickAd account access.
Under “People with full control”, look for the Facebook account you plan to use when setting up the mParticle integration.
To assign full access to someone, clickManagenext to their name. You can also assign a new account access by clickingAssign peopleand selecting their name from the list of people with access to your Meta Business portfolio.
Accept the Facebook Audiences Terms of Service
The Facebook Ads account you are connecting to must have accepted the following terms of service:
Value Based Custom Audience Terms of Service
Web Custom Audience Terms of Service
To see if you’ve accepted the terms of service:
Log into your Facebook Ad account atadsmanager.facebook.comand clickAudiencesin the left nav bar.
Make sure that you have the correct ad account selected using the dropdown menu in the top right.
You should be prompted to accept the Facebook Audience terms of service. If you already have accepted these terms of service, you will be presented with the options to create new audiences:
Access to your Facebook Application ID
If you want to forward users’ Facebook IDs with your audience data, you must have the Facebook Application ID number for your app or integration. To find your Facebook Application ID, you need to access the Facebook Developer Dashboard. To find your Facebook App ID:
Visit the Meta for Developers website athttps://developers.facebook.com/and log in with your Facebook account credentials.
ClickMy Appsin the top nav bar.
Under the list of apps on your dashboard, you can find your App ID listed under the name of your app:
Once you have satisfied the prerequisites described above, follow the steps below to set up the mParticle Facebook audience integration.
Setting up and using the audience integration for Facebook includes three stages:
Creating a Facebook audience output in mParticle.
Connecting an audience in mParticle to Facebook.
Finding your new mParticle audiences in Facebook for use in a campaign.
Log into your mParticle account atapp.mparticle.com, and navigate to theIntegrations Directory.
Search for “Facebook”, hover your cursor over the Facebook tile, and clickSetup.
Check the box labeledAudience, and clickConfigure.
Under Account Credentials, clickLog In. This opens a separate window where you can connect your Facebook account to mParticle. ClickConnect.
Enter a descriptive name under Configuration Name.
Use theFacebook Account IDdropdown menu to select the Facebook account that is tied to the Facebook Ads account you want to forward your audiences to.
2) Connect an audience to Facebook
If you just completed step 1.7, then you will be brought toAudiences > Real-timein mParticle. Otherwise, from your mParticle account, navigate toAudiencesin the left-hand navigation and select eitherReal-timeorStandard.
From the list of audiences, find the one you want to forward to Facebook and click the “plus sign”+button under Connected Outputs.
SelectFacebook, and use the Configuration Name dropdown menu to select the new configuration you want to send your audience to. ClickNext.
Toggle theConnection Statusto eitherInactiveorActive. Only active connections will forward audiences. After completing the setup process, it may take up to 24 hours for your audience data to fully populate in Facebook.
Enter your Facebook Application ID. This is only required if you intend to forward Facebook IDs in the next step.
Check the box next to each of the following user identities you want to forward to Facebook with your audience:Email address (hashed as SHA256)Phone number (hashed as SHA256)Facebook IDApple IDFAGoogle GAID
Check the box next to each of the following user identities you want to forward to Facebook with your audience:
Email addresses and Facebook IDs result in higher match rates with Facebook users because they are more unique across the Facebook platform, so it’s recommended to use these identities whenever they are available.
CheckEnable Multi-Key Audienceto have an additional audience forwarded to Facebook that includes all of the user identities you selected in the previous step.mParticle creates a new custom audience in your Facebook Ads Manager for each identity that you select. For example, if you select both phone and email, you will see two new custom audiences added: one using user phone numbers and one using their email addresses. If you enableMulti-Key Audiences, you will still see a separate audience for each identity, but you will also see an additional audience that includes all of the identities you selected.
CheckEnable Multi-Key Audienceto have an additional audience forwarded to Facebook that includes all of the user identities you selected in the previous step.
mParticle creates a new custom audience in your Facebook Ads Manager for each identity that you select. For example, if you select both phone and email, you will see two new custom audiences added: one using user phone numbers and one using their email addresses. If you enableMulti-Key Audiences, you will still see a separate audience for each identity, but you will also see an additional audience that includes all of the identities you selected.
CheckMatch on User Attributesto have mParticle forward all available attributes from the following list for each user. This can increase the match rate for your audience. All user attributes are hashed asSHA256before being forwarded to Facebook.GenderFirst nameLast nameCityStateCountry
CheckMatch on User Attributesto have mParticle forward all available attributes from the following list for each user. This can increase the match rate for your audience. All user attributes are hashed asSHA256before being forwarded to Facebook.
To create a value-based lookalike audience, checkIs Value Based Audience, and use the User Attribute Representing Value dropdown menu to select an mParticle user attribute to forward to Facebook.The attribute you select is what Facebook refers to when determining the relative value of a user, and whether or not to include it in the audience. Users with higher values for this attribute are considered more valuable.To allow attributes with a value of 0 to be forwarded, checkAllow Zero Values. Negative values are never forwarded.
To create a value-based lookalike audience, checkIs Value Based Audience, and use the User Attribute Representing Value dropdown menu to select an mParticle user attribute to forward to Facebook.
The attribute you select is what Facebook refers to when determining the relative value of a user, and whether or not to include it in the audience. Users with higher values for this attribute are considered more valuable.
To allow attributes with a value of 0 to be forwarded, checkAllow Zero Values. Negative values are never forwarded.
UnderCustomer File Source, select one of the following as the source of your audience data:Directly from customers: all audience data was collected directly from the audience membersCustomers and partners: the audience data was collected both from audience members and from a partner, like a third-party agencyDirectly from partners: the audience data was collected only from third-party partners
UnderCustomer File Source, select one of the following as the source of your audience data:
Directly from customers: all audience data was collected directly from the audience members
Customers and partners: the audience data was collected both from audience members and from a partner, like a third-party agency
Directly from partners: the audience data was collected only from third-party partners
Select the identity you want to forward to Facebook as an external email address from theExternal Email Identity Typedropdown.Including an external email address can help improve your match rate in Facebook.
Select the identity you want to forward to Facebook as an external email address from theExternal Email Identity Typedropdown.
Including an external email address can help improve your match rate in Facebook.
Select the identity you want to be hashed and forwarded to Facebook for use as an external unique ID from theMulti-Key External ID Typedropdown.This can be any unique ID, like an advertising ID, loyalty membership ID, user ID, or even a cookie ID, and can help increase your audience’s match rate.
Select the identity you want to be hashed and forwarded to Facebook for use as an external unique ID from theMulti-Key External ID Typedropdown.
This can be any unique ID, like an advertising ID, loyalty membership ID, user ID, or even a cookie ID, and can help increase your audience’s match rate.
3) Find your new mParticle audience in Facebook
To find your new custom audience(s):
Navigate to your Facebook Ads Manager atadsmanager.facebook.comand log in.
Select the business portfolio containing the ad account that you used when setting up your audience connection using the left-hand navigation.
After creating and activating your audience connection between mParticle and Facebook, you will see one or more (depending on your configuration settings) custom audiences added to your Audience list in Facebook Ads Manager.
To edit, share, or create an ad for one of your custom audiences, click the audience name from the list to view the details panel. From the details panel, click theActionsdropdown menu. Certain actions may be unavailable due to missing payment info or a compliance requirement that hasn’t been configured yet for your Ads account.
mParticle deletes the downstream audience when you delete an audience from mParticle.
Following are the user identities and device identities that can be forwarded to Facebook. Identities that are hashed asSHA256are noted.
The “match rate” for a Facebook audience refers to the percentage of your forwarded user data that Facebook successfully matches to active Facebook users.
When you connect an mParticle audience with Facebook, several user identifiers are included for each audience member (such as email addresses, phone numbers, Facebook user IDs, or mobile advertiser IDs). After you send an audience from mParticle to Facebook, Facebook attempts to match these identifiers to user profiles on Facebook. The match rate indicates how successful Facebook is in finding corresponding user profiles for the identifiers you provided.
There are several factors that can impact your match rate:
Data quality: more accurate, up-to-date, and complete user data leads to a higher match rate.
Privacy settings: Facebook users with stricter privacy or data sharing settings may also impact your match rate.
Identifiers used: certain identifiers, like email addresses and Facebook user IDs, have higher match rates due to their uniqueness.
Audience size: larger audiences have higher match rates because of the increased chance in finding matches within the set of Facebook users. Facebook suggests a minimum audience size of 1,000 people for best results.
A higher match rate means that more of your user data was successfully matched to Facebook users, allowing you to reach a larger audience with your ads or other marketing efforts. However, it’s important to keep in mind that not all of your user data may match with Facebook users, and the match rate may vary from one audience to another.
You can use the mParticle audiences integration to create value-based lookalike audiences. These audiences target users who share similar characteristics and behaviors with your existing high-value customers.
However, unlike traditional lookalike audiences, which are based solely on demographic or interest similarities, value-based lookalike audiences are generated using an attribute that reflects the monetary value or profitability of your customers. For example, if you select a lifetime value attribute, Facebook will create a lookalike audience composed of users that have a higher lifetime value.
By default, mParticle only forwards users in a value-based audience to Facebook if the value of their “value reprepresenting attribute” is greater than 0. You can include values equaling zero by checkingAllow Zero Valueswhen creating your value-based audience.
You can learn more about value-based lookalike audiences inFacebook’s documentation.
As of July 2, 2018, Facebook requires that all new audiences disclose whether their data was collected from customers directly, collected from partners, or both. You can provide this information in the connection settings when connecting an audience to Facebook via the Customer File Source setting.
You can learn more about the Customer File Source Requirement inFacebook’s documentation.
Facebook does not allow more than500 custom audiencesto be created per Facebook Ads account. If you attempt to forward more than 500 audiences to Facebook, an error will be returned.
The Facebook Audience integration uses bulk forwarding. This means that instead of forwarding audience data in real time, mParticle adds updates to a queue. By default, mParticle forwards data to Facebook from this queue whenever one of the following conditions is met:
3 hours have passed since the last update
At least 75,000 messages are in the queue
Before activating your new connection, or when troubleshooting issues, please be aware of the following:
Are you forwarding audience data to the correct Facebook Ads account?
During steps 4-5 of the first stage of the setup process, you connect your Facebook account to mParticle. Make sure that you use a Facebook account that has been granted access to the Facebook Ads account you will forward your audiences to, and make sure that after connecting your Facebook account that you use theFacebook Account IDdropdown menu to select the Facebook Ads account.
It is possible to have access to multiple Ads accounts, so make sure that you selected the correct Ads account when creating your output.
ReadAccess to a Facebook Ads accountfor instructions on how to make sure your Facebook account has the correct access. If you do not have the correct access, reach out to your Facebook Ads account administrator.
If you are forwarding Facebook IDs, did you add the correct Facebook app ID?
If you are trying to forward Facebook IDs from mParticle to Facebook, you must provide your Facebook application ID.
Often referred to as an app ID, a Facebook Application ID is a unique ID assigned to your application when you register it on the Facebook Developers platform. This App ID is required to integrate your application with various Facebook functions, such as logging in through Facebook, accessing Facebook’s Graph API, or incorporating social plugins like the Like button.
SeeAccess to your Facebook Application IDfor instructions on how to find your application ID.
While you may see your forwarded mParticle audiences listed in Facebook Ads right away, it can take up to 24 hours before your audience data begins to fully populate. This time can vary depending on how large your audiences are.
When looking for your audience data in Facebook, select the correct Business Portfolio
After logging into Facebook Ads Manager, make sure that you select the correct Business Portfolio from the left-hand navbar. You should select the Business Portfolio containing the Ads Account you chose to forward your audiences to.
Forwarding multi-key audiences to Facebook creates multiple audiences
When you select more than one user identity to forward to Facebook, a separate audience will be created in Facebook for each identity you select. If you want to have a single audience containing all of the identities you selected, make sure that you checkEnable Multi-Key Audienceswhen connecting your audience to Facebook.
However, even with multi-key audiences enabled, you will still see an additional audience in Facebook for each identity selected.
Access to a Facebook Ad account
Accept the Facebook Audiences Terms of Service
Access to your Facebook Application ID
2) Connect an audience to Facebook
3) Find your new mParticle audience in Facebook
Are you forwarding audience data to the correct Facebook Ads account?
If you are forwarding Facebook IDs, did you add the correct Facebook app ID?
When looking for your audience data in Facebook, select the correct Business Portfolio
Forwarding multi-key audiences to Facebook creates multiple audiences
Do Not Sell or Share My Personal Data
These cookies are necessary for the website to function and cannot be switched off in our systems. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.
Share Or Sale of Personal Data
Under the CPRA, you have the right to opt-out of the sale or sharing of your personal information to third parties. These cookies collect information for analytics and to personalize your experience with targeted ads. You may exercise your right to opt out of the sale or sharing of personal information by using this toggle switch. If you opt out we will not be able to offer you personalized ads and will not hand over your personal information to any third parties. Additionally, you may contact our legal department for further clarification about your rights as a California consumer by using this Exercise My Rights link.If you have enabled privacy controls on your browser (such as a plugin), we have to take that as a valid request to opt-out. Therefore we would not be able to track your activity through the web. This may affect our ability to personalize ads according to your preferences.
Targeting CookiesSwitch LabellabelThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
These cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
Performance CookiesSwitch LabellabelThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
Data Subject Request API Version 1 and 2
Data Subject Request API Version 3
Preventing Blocked HTTP Traffic with CNAME
Preventing Blocked HTTP Traffic with CNAME
Web SDK via Google Tag Manager
Preventing Blocked HTTP Traffic with CNAME
Upgrade to Version 2 of the SDK
Step 3. Set up your output
Step 8. Create a data plan
Step 9. Test your local app
Step 3. Set up your output
Step 8. Create a data plan
Step 3. Set up your output
Step 8. Create a data plan
Migrate from Segment to Client-side mParticle
Migrate from Segment to Server-side mParticle
The Developer's Guided Journey to mParticle
Download an audience from a journey
Audience A/B testing from a journey
Create a Next Best Action (NBA)
Activate Next Best Actions in Campaigns
Usage metering for value-based pricing (VBP)
Sync and Activate Analytics User Segments in mParticle
Apply All for Filter Where Clauses
Date Range and Time Settings Overview
Cumulative vs. Non-Cumulative Analysis in Segmentation
Total Count of vs. Users Who Performed
Time and Interval Settings in Dashboards
Optimize User Flow with A/B Testing
AWS Redshift (Define Your Own Schema)
AWS S3 Integration (Define Your Own Schema)
Data Master allows you to standardize and validate customer data before it gets shared across systems, applications and teams. It encompasses the following features:
Catalogprovides an overview of data collected, including detailed collection statistics. You can add descriptions and other information about data points in the catalog.
Data Plansallow you to define and then validate the extent and shape of the data that is collected.
Live Streamallows you to observe data streaming into mParticle in realtime and to identify violations quickly if you are using a Data Plan to validate your data.
Understanding Data Points and Data Plans
For every mParticle workspace, you may have many data plans.
Every data plan contains one or more data plan versions.
Each data plan version contains data points that you have defined.
A data point is a unit of data collected by mParticle. Data points represent Events such as Custom Events or Screen Views, or User attributes such as Customer Id or Email.
Each data point includes criteria used to select the data point from an incoming data stream, and a definition called a schema that validates the contents of the data point. You can view data points in all three Data Master tools: Catalog, Live Stream, and Data Plan.
For example, here is a view of the Play Video data point in Catalog:
Here is a view of the a Commerce Event data point in Live Stream:
This view of a data point is from Data Plan:
Understanding Data Points and Data Plans
Do Not Sell or Share My Personal Data
These cookies are necessary for the website to function and cannot be switched off in our systems. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.
Share Or Sale of Personal Data
Under the CPRA, you have the right to opt-out of the sale or sharing of your personal information to third parties. These cookies collect information for analytics and to personalize your experience with targeted ads. You may exercise your right to opt out of the sale or sharing of personal information by using this toggle switch. If you opt out we will not be able to offer you personalized ads and will not hand over your personal information to any third parties. Additionally, you may contact our legal department for further clarification about your rights as a California consumer by using this Exercise My Rights link.If you have enabled privacy controls on your browser (such as a plugin), we have to take that as a valid request to opt-out. Therefore we would not be able to track your activity through the web. This may affect our ability to personalize ads according to your preferences.
Targeting CookiesSwitch LabellabelThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
These cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
Performance CookiesSwitch LabellabelThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
Data Subject Request API Version 1 and 2
Data Subject Request API Version 3
Preventing Blocked HTTP Traffic with CNAME
Preventing Blocked HTTP Traffic with CNAME
Web SDK via Google Tag Manager
Preventing Blocked HTTP Traffic with CNAME
Upgrade to Version 2 of the SDK
Step 3. Set up your output
Step 8. Create a data plan
Step 9. Test your local app
Step 3. Set up your output
Step 8. Create a data plan
Step 3. Set up your output
Step 8. Create a data plan
Migrate from Segment to Client-side mParticle
Migrate from Segment to Server-side mParticle
The Developer's Guided Journey to mParticle
Download an audience from a journey
Audience A/B testing from a journey
Create a Next Best Action (NBA)
Activate Next Best Actions in Campaigns
Usage metering for value-based pricing (VBP)
Sync and Activate Analytics User Segments in mParticle
Apply All for Filter Where Clauses
Date Range and Time Settings Overview
Cumulative vs. Non-Cumulative Analysis in Segmentation
Total Count of vs. Users Who Performed
Time and Interval Settings in Dashboards
Optimize User Flow with A/B Testing
AWS Redshift (Define Your Own Schema)
AWS S3 Integration (Define Your Own Schema)
To learn more about event outputs before creating your first one, view the following video:
Before you start this activity, you should have already:
Started to capture some basic data points
Outputs are mParticle’s term for the services where we forward your data. Outputs are also referred to as “integrations”. Outputs come in two types: “event”, and “audience”. Audiences are covered in thenext part of this guide. This section will show you how to set up an event output.
Example - Connect an Output to Analytics
mParticle has over a hundred event outputs, and the connection process for each is similar. This tutorial creates a connection to Analytics as an example. You can follow the same steps with a different output, or create afree Analytics accountto follow along exactly.
ClickDirectoryin the sidebar, and search for Analytics.
Click the Analytics tile to display Output: Event Configuration.
Enter the configuration information:Enter a configuration name.Leave the box checked to use the same settings for Development & Production.Select a field as the user identity field. Leave the default if you’re not sure what to choose.Enter the Analytics API key which you can find in the Analytics project settings.
Leave the box checked to use the same settings for Development & Production.
Select a field as the user identity field. Leave the default if you’re not sure what to choose.
Enter the Analytics API key which you can find in the Analytics project settings.
Remember to save your new output configuration.
Now that you have both an input and an output set up, it’s time to connect them:
ClickConnections > Connect, and select the input you’ve already set up.
Complete the Connection Settings, different for each output. For Analytics you can leave the default selections.
Verify: Check that data is arriving in Analytics
Once you have enabled the connection, open up the development build of your app again and create a few more events. Each output service displays the data it receives differently. For Analytics, you can view real-time data in theDebug Console.
If you don’t see data arriving in the output service, navigate toData Master > Live Streamand select Message Direction Outbound.
If you see messages in the outbound Live Stream, but none in the output service:You may just need to wait. For most event outputs, mParticle forwards information in close to real time. However, there are factors which can slow down processing and the amount of time it takes for data to become visible in an output service’s dashboard can be different for each service.Navigate toActivity > System Alertsand see if there are any errors noted for the output you want to troubleshoot. The error type may give you a clue as to what is wrong.
If you see messages in the outbound Live Stream, but none in the output service:
You may just need to wait. For most event outputs, mParticle forwards information in close to real time. However, there are factors which can slow down processing and the amount of time it takes for data to become visible in an output service’s dashboard can be different for each service.
Navigate toActivity > System Alertsand see if there are any errors noted for the output you want to troubleshoot. The error type may give you a clue as to what is wrong.
If the previous step doesn’t resolve the issue:Check all of your Configuration and Connection settings. Make sure that all settings are correct, especially any access credentials, such as Project or App IDs, API Key & Secret, etc.It is common for a particular output service to require certain identifiers or other data points to be present to allow data to be forwarded. As an example, the Google Ads output requires information about a user’s device, including the Device Advertising ID, in order to construct a User Agent Header. If the Device Advertising ID is not present, no data can be sent. Check thedocsfor the output service and make sure you’re sending all the required information.
If the previous step doesn’t resolve the issue:
Check all of your Configuration and Connection settings. Make sure that all settings are correct, especially any access credentials, such as Project or App IDs, API Key & Secret, etc.
It is common for a particular output service to require certain identifiers or other data points to be present to allow data to be forwarded. As an example, the Google Ads output requires information about a user’s device, including the Device Advertising ID, in order to construct a User Agent Header. If the Device Advertising ID is not present, no data can be sent. Check thedocsfor the output service and make sure you’re sending all the required information.
If there are no outgoing messages in the Live Stream, then mParticle is not attempting to send any data to the output service. Some possible reasons for this include:
Not all outputs support every platform or accept every event type. The Directory shows a list of available platforms and supported event types for each output. Make sure the data you are trying to send is supported.
mParticle allows you to filter your data for each output. Check theData Filterto make sure you haven’t turned off the data points you’re trying to send.
By now you should be successfully forwarding data to at least one event output. Some additional resources you might want to look at include:
One of the key benefits of mParticle is the power to collect data once and forward it to as many output services as you wish. Browse theIntegrationssection of our docs to learn more about the different services mParticle can forward your data to.
Most event outputs work by forwarding data server-side via the output partner’s HTTP API. However, some outputs require extra client-side code to be added to your native app, to allow data to be sent directly from your app to the output service. These integrations are called “embedded kits”. You can read more about them in theiOSandAndroiddocumentation.
Sending web data to an output usually works a little differently from native. If you’re using mParticle on the web, read our guide toWorking with Web Data.
Next up, you will learn about the second category of mParticle data bycreating an audience.
Example - Connect an Output to Analytics
Verify: Check that data is arriving in Analytics
Do Not Sell or Share My Personal Data
These cookies are necessary for the website to function and cannot be switched off in our systems. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.
Share Or Sale of Personal Data
Under the CPRA, you have the right to opt-out of the sale or sharing of your personal information to third parties. These cookies collect information for analytics and to personalize your experience with targeted ads. You may exercise your right to opt out of the sale or sharing of personal information by using this toggle switch. If you opt out we will not be able to offer you personalized ads and will not hand over your personal information to any third parties. Additionally, you may contact our legal department for further clarification about your rights as a California consumer by using this Exercise My Rights link.If you have enabled privacy controls on your browser (such as a plugin), we have to take that as a valid request to opt-out. Therefore we would not be able to track your activity through the web. This may affect our ability to personalize ads according to your preferences.
Targeting CookiesSwitch LabellabelThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
These cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
Performance CookiesSwitch LabellabelThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
Data Subject Request API Version 1 and 2
Data Subject Request API Version 3
Preventing Blocked HTTP Traffic with CNAME
Preventing Blocked HTTP Traffic with CNAME
Web SDK via Google Tag Manager
Preventing Blocked HTTP Traffic with CNAME
Upgrade to Version 2 of the SDK
Step 3. Set up your output
Step 8. Create a data plan
Step 9. Test your local app
Step 3. Set up your output
Step 8. Create a data plan
Step 3. Set up your output
Step 8. Create a data plan
Migrate from Segment to Client-side mParticle
Migrate from Segment to Server-side mParticle
The Developer's Guided Journey to mParticle
Download an audience from a journey
Audience A/B testing from a journey
Create a Next Best Action (NBA)
Activate Next Best Actions in Campaigns
Usage metering for value-based pricing (VBP)
Sync and Activate Analytics User Segments in mParticle
Apply All for Filter Where Clauses
Date Range and Time Settings Overview
Cumulative vs. Non-Cumulative Analysis in Segmentation
Total Count of vs. Users Who Performed
Time and Interval Settings in Dashboards
Optimize User Flow with A/B Testing
AWS Redshift (Define Your Own Schema)
AWS S3 Integration (Define Your Own Schema)
AppsFlyeris a leading Mobile Attribution & Marketing Analytics platform that allows app marketers to easily measure the performance of all their marketing channels - paid, organic and social - from a single real-time dashboard.
mParticle’s integration with AppsFlyer includes a required Kit integration and an optional server-side integration. The Kit forwards event data from your app to AppsFlyer on the client side, and also handles app install attribution, uninstall tracking, and deeplinking, including deferred deeplinking. Supplementary data from outside your app can be forwarded to mParticle via our Events API and sent on to AppsFlyer server-to-server.
Google has several notions of user-provided consent.  Two of these apply to AppsFlyer events:ad_user_dataandad_personalization. These represent consent forad user dataandad personalization.
To configure user consent forwarding under this value, a mapping should be set-up leveraging mParticle’s notion of Consent Purposes. To learn more about handling user consent within mParticle’s platform, see the following docs:Data Privacy Controls.
Once a Consent Purpose is set up, user consent information can be associated with it in subsequent Event Batches. The Consent Purpose data mapping can then be configured for downstream forwarding via the User Consent Data Mapping connection setting.
In the absence of a user-defined consent value for thead_user_dataandad_personalizationfields via the Consent Purpose mapping, a default value can be optionally configured via a separate drop-down setting for each consent type. When no user consent is provided, the default status is used, if specified.
Caution: It is recommended that in the long term, you set up user-specified consent through the Consent Purpose mapping, such that the user consent is correctly forwarded to Google. It is your responsibility as a Data Controller to stay compliant under the GDPR, and set up user consent collection for downstream forwarding. The consent default setting can be deprecated in the future.
Add the mParticle SDKs to your iOS and/or Android apps. See the docs foryour platform here.
Connect your iOS and/or Android workspaces to AppsFlyer. You will need to provide your Dev Key, which you can access from the Settings page of your organization’s AppsFlyer dashboard. For an iOS connection, you will also need your Apple App ID. Make sure you remove the ‘ID’ prefix. For example, if your App ID isid12345, just enter12345. For more information on setting up a new mParticle connection, see thePlatform Guide.
mParticle’s AppsFlyer integration requires that you add the AppsFlyer Kit to your iOS or Android app. Just by adding the binary to your app:
The mParticle SDK will initialize AppsFlyer’s SDK per their documentation, using the AppsFlyer dev key provided above, and will also forward all requiredUIApplication(iOS) andActivity(Android) lifecycle events to the AppsFlyer SDK.
Events that you log via mParticle’s API will be automatically mapped onto AppsFlyer analogous event tracking APIs.
The customer ID and email of the current user, set via mParticle’s Identity APIs, will be mapped onto AppsFlyer’s analogoussetUserAPIs.
Google Play Install Referrer will be forwarded (Android only - see below).
mParticle publishes the AppsFlyer Kit as separate iOS and Android libraries which have a transitive dependency on the mParticle core libraries. You can add them to your app via Carthage, Cocoapods, Swift Package Manager, or Gradle:
To integrate the SDK using Swift Package Manager, open your Xcode project and navigate to File > Swift Packages > Add Package Dependency

Enter the repository URL`https://github.com/mparticle-integrations/mparticle-apple-integration-appsflyer`and click Next.

You can leave the version settings as default and click Next one more time to complete adding the package dependency.
To integrate the SDK using Swift Package Manager, open your Xcode project and navigate to File > Swift Packages > Add Package Dependency

Enter the repository URL`https://github.com/mparticle-integrations/mparticle-apple-integration-appsflyer`and click Next.

You can leave the version settings as default and click Next one more time to complete adding the package dependency.
// Sample build.gradledependencies{// Ensure the Kit version matches that of the mParticle Core SDK that you're usingimplementation'com.mparticle:android-appsflyer-kit:5+'}
// Sample build.gradledependencies{// Ensure the Kit version matches that of the mParticle Core SDK that you're usingimplementation'com.mparticle:android-appsflyer-kit:5+'}
Refer to theApple SDKandAndroid SDKguides to read more about kits.
AppsFlyer’s SDK requires the forwarding of the Google Play Install Referrer Intent. The AppsFlyer kit will take care of this for you as long as you’ve added mParticle’sReferrerReceiverto you manifest, or you are manually forwarding the Intent to ourReferrerReceiverclass. The mParticle SDK will then forward the Install Referrer intent to each configured kit, including AppsFlyer.
Please see theAndroid SDK setup guideto ensure your manifest is configured properly.
The AppsFlyer SDK exposes client-side deep linking and attribution APIs, all of which are supported by the mParticle AppsFlyer kit and are covered in this section. The core use-cases are:
Retrieving install attribution information (deferred deep linking)
Retrieve app-open attribution information (non-deferred deep linking)
OneLink, AppsFlyer’s unified deeplinking hosting service
Each platform has very specific requirements to ensure that the above functionality is supported. The minimum requirements are:
Verify the AppsFlyer connection is enabled for the workspace key and secret, and mParticle environment (development or production) that you’re testing.
Verify that thedevKeyconfigured above matches your AppsFlyer app.
Verify that you have correctly configured your Apple App ID (retrieve from iTunes connect, this isnotyour iOS development team prefix) both in AppsFlyer and in mParticle.
Verify that the proper associated domains and entitlements are configured (iOS only)
Verify that yourAndroidManifest.xmlhas the proper Intent Filters to match any deep link domains that you’re testing.
mParticle’s SDKs will automatically initialize the AppsFlyer SDK, forwarding the requiredUIApplicationlifecycle events and thecontinueUserAcivityevents for iOS and Android, as well as registering a delegate such that you can retrieve deep linking and attribution parameters on the client-side to customize your user’s in-app experience.
Specifically, the AppsFlyer SDK exposes one distinct callback:
mParticle’s API includes a wrapper for this callback, and both the iOS and Android kits expose a constant to inform you when the callback has been fired and if it was successful. On both platforms, the iOS/Android kit will register a delegate/callback with the AppsFlyer SDK on initialization and for the lifetime of the app’s process, and will call your completion handler block (iOS) orAttributionListener(Android) whenever there is new conversion data available.
When a user clicks a OneLink link, the AppsFlyer SDK retrieves available OneLink data from the AppsFlyer servers. Then, the UDL API calls thedidResolveDeepLink()method which returns aDeepLinkResultobject containing a status and (if successful) aDeepLinkobject containing thedeep_link_valueanddeep_link_sub1-10parameters you can use to customize the resulting in-app outcome.
However, when users deep link directly using universal or app links, thedidResolveDeepLinkmethod returns the full link unparsed since the app opens directly without going through AppsFlyer first. You can read more about AppsFlyer’s deep linking methodshere.
The parameters returned in these results will match the result of the AppsFlyer SDK, as documented forAndroidandiOS.
See the deep linking documentation foriOSandAndroidfor more information.
The following core test scenarios that should be verified:
Application not running, and an existing user-install invokes a deep link (“cold start” scenario)
Application running in the background, and an existing user install invokes a deep link (“warm start” scenario)
The AppsFlyer Kit will forward app events and eCommerce events to AppsFlyer.Custom Mappingsare available to map your custom app events ontoAppsFlyer’s event names. Refer to the iOS and Android SDK docs for details on instrumenting your app for event tracking:
Note that AppsFlyer enforces alimit of 45 charactersfor event names.
The source code for each kit, as well as sample apps, are available on Github:
mParticle can forward app events and commerce events received via ourEvents APItoAppsFlyer’s server-API. Note that AppsFlyer requires data to be linked to a unique AppsFlyer ID, generated client-side by the AppsFlyer Kit. mParticle stores the AppsFlyer ID in its internal user profile. This means that:
You must have the AppsFlyer Kit included in your app to be able to forward data, and you can only forward data associated with your app users.
The data you send server-side must include a device ID, so that mParticle can lookup the AppsFlyer ID for the user.
For iOS 14, mParticle will send theattfield based on theatt_authorization_statusto AppsFlyer in their expectedformat. Check theiOS14 Implementation guidefor more information.
Do Not Sell or Share My Personal Data
These cookies are necessary for the website to function and cannot be switched off in our systems. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.
Share Or Sale of Personal Data
Under the CPRA, you have the right to opt-out of the sale or sharing of your personal information to third parties. These cookies collect information for analytics and to personalize your experience with targeted ads. You may exercise your right to opt out of the sale or sharing of personal information by using this toggle switch. If you opt out we will not be able to offer you personalized ads and will not hand over your personal information to any third parties. Additionally, you may contact our legal department for further clarification about your rights as a California consumer by using this Exercise My Rights link.If you have enabled privacy controls on your browser (such as a plugin), we have to take that as a valid request to opt-out. Therefore we would not be able to track your activity through the web. This may affect our ability to personalize ads according to your preferences.
Targeting CookiesSwitch LabellabelThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
These cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
Performance CookiesSwitch LabellabelThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
Data Subject Request API Version 1 and 2
Data Subject Request API Version 3
Preventing Blocked HTTP Traffic with CNAME
Preventing Blocked HTTP Traffic with CNAME
Web SDK via Google Tag Manager
Preventing Blocked HTTP Traffic with CNAME
Upgrade to Version 2 of the SDK
Step 3. Set up your output
Step 8. Create a data plan
Step 9. Test your local app
Step 3. Set up your output
Step 8. Create a data plan
Step 3. Set up your output
Step 8. Create a data plan
Migrate from Segment to Client-side mParticle
Migrate from Segment to Server-side mParticle
The Developer's Guided Journey to mParticle
Download an audience from a journey
Audience A/B testing from a journey
Create a Next Best Action (NBA)
Activate Next Best Actions in Campaigns
Usage metering for value-based pricing (VBP)
Sync and Activate Analytics User Segments in mParticle
Apply All for Filter Where Clauses
Date Range and Time Settings Overview
Cumulative vs. Non-Cumulative Analysis in Segmentation
Total Count of vs. Users Who Performed
Time and Interval Settings in Dashboards
Optimize User Flow with A/B Testing
AWS Redshift (Define Your Own Schema)
AWS S3 Integration (Define Your Own Schema)
Brazeis a comprehensive customer engagement platform that powers relevant experiences between consumers and brands they love. Braze helps brands foster human connection through interactive conversations across channels.
mParticle audiences correspond to Braze’sSegmentsfeature and can be used to target engagement campaigns in Braze.
In order to activate our Braze integration, you’re going to need theAPI keyfor each app that you’d like to set up, which can be found by logging into your Braze account and navigating to your app’s settings. You will also need to create anApp Group REST API Keyin the Developer Console.
Braze maintains several instances. As part of theConfiguration Settings, you need to specify which one your data should be forwarded to.  You can tell yourBraze Instancefrom the URL of your Braze Dashboard.
Check with your Braze account manager if you are unsure which Braze instance you are using.
There is also the ability to specify a Custom instance, which allows you to specify separate endpoints for REST, SDK and Javascript.
Usinghttps://or a trailing/in your endpoint address will cause errors.
mParticle will attempt to match users in Braze based on IDFAs, Android Device IDs, and a customizableExternal User ID field, which uniquely identifies a user in Braze. You can set which Identity Type to use as the External User ID in theConfiguration Settings. Your External User ID should be a unique, permanent identifier — usually Customer ID or Email. If you are also using theEventintegration, make sure you set the same External User ID across both integrations.
The Braze API does not allow mParticle to directly create and maintain membership of segments in Braze, so the Audience integration works by setting attributes on a user, which you can then use todefine a corresponding segment in Braze. Like mParticle, Braze populates it’s Segment Manager based on the actual data points received, so you need to create audiences in mParticle and connect them to Braze first. Then, provided your audience is not empty, the segment membership attributes should become available in the Braze Segment Manager within a few minutes.
mParticle offers seven ways to set segment membership attributes, controlled by theSend Segments AsConfiguration Setting. The drop-down has the following options:
Both Single Array Attribute and Single String Attribute
Both Single Array Attribute and One Attribute Per Segment
Both Single String Attribute and One Attribute Per Segment
Single Array Attribute, Single String Attribute, and One Attribute Per Segment
These options will be explained in further detail below.
Note that Audience IDs can be found in the main Audience list view.
For example, note the Audience IDs for these three audiences:
This is the default behavior.  mParticle creates a single custom attribute in Braze for each user, calledSegmentMembership. The value of this attribute is a comma-separated string of mParticle audience IDs that match the user.
Using the above examples, a user who is a member ofTest Audience 1,Test Audience 2, andTest Audience 3will show the attributeSegmentMembershipwith a value of"'13053','13052', '13051'"in Braze.
See theSample Braze Profilefor an example.
To target members ofTest Audience 1, for example, you need to create a matching segment in Braze using the mParticle Audience ID,
with the filterSegmentMembership—matches regex—13051. It’s important to choose thematches regexoption, and notequals, or users with membership in more than one audience will not be matched.
mParticle creates a single custom array attribute in Braze for each user, calledSegmentMembershipArray. The value of this attribute is an array of mParticle audience IDs that match the user.
Using the above examples, a user who is a member ofTest Audience 1,Test Audience 2, andTest Audience 3will show the attributeSegmentMembershipArraywith a value of["13053","13052", "13051"]in Braze. Note, however, that Braze parses array attributes to make them more readable.
See theSample Braze Profilefor an example.
To target members ofTest Audience 1, for example, you need to create a matching segment in Braze with the filterSegmentMembershipArray—includes value—13051
mParticle creates a custom attribute in Braze for each audience that a user belongs to, based on the External Name of the audience.
Using the above examples, a user who is a member of audienceTest Audience 1will show the attributeIn Test Audience 1istruein Braze.
To target members ofTest Audience 1, for example, you need to create a matching segment in Braze with the filterIn Test Audience 1—equals—true.
Both Single Array Attribute and Single String Attribute
mParticle will send attributes as described by bothSingle Array AttributeandSingle String Attribute.
Both Single Array Attribute and One Attribute Per Segment
mParticle will send attributes as described by bothSingle Array AttributeandOne Attribute Per Segment.
Both Single String Attribute and One Attribute Per Segment
mParticle will send attributes as described by bothSingle String AttributeandOne Attribute Per Segment.
Single Array Attribute, Single String Attribute, and One Attribute Per Segment
mParticle will send attributes as described bySingle Array Attribute,Single String AttributeandOne Attribute Per Segment.
Here is a sample Braze profile with all options enabled.
Since mParticle does not directly maintain segments in Braze, it will not delete segments when the corresponding mParticle audience connection is deleted or deactivated. When this happens, mParticle willnotupdate the audience user attributes in Braze to remove the audience from each user.
Deleting an audience does not remove the custom attributes in Braze.
Both Single Array Attribute and Single String Attribute
Both Single Array Attribute and One Attribute Per Segment
Both Single String Attribute and One Attribute Per Segment
Single Array Attribute, Single String Attribute, and One Attribute Per Segment
Do Not Sell or Share My Personal Data
These cookies are necessary for the website to function and cannot be switched off in our systems. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.
Share Or Sale of Personal Data
Under the CPRA, you have the right to opt-out of the sale or sharing of your personal information to third parties. These cookies collect information for analytics and to personalize your experience with targeted ads. You may exercise your right to opt out of the sale or sharing of personal information by using this toggle switch. If you opt out we will not be able to offer you personalized ads and will not hand over your personal information to any third parties. Additionally, you may contact our legal department for further clarification about your rights as a California consumer by using this Exercise My Rights link.If you have enabled privacy controls on your browser (such as a plugin), we have to take that as a valid request to opt-out. Therefore we would not be able to track your activity through the web. This may affect our ability to personalize ads according to your preferences.
Targeting CookiesSwitch LabellabelThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
These cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
Performance CookiesSwitch LabellabelThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
Data Subject Request API Version 1 and 2
Data Subject Request API Version 3
Preventing Blocked HTTP Traffic with CNAME
Preventing Blocked HTTP Traffic with CNAME
Web SDK via Google Tag Manager
Preventing Blocked HTTP Traffic with CNAME
Upgrade to Version 2 of the SDK
Step 3. Set up your output
Step 8. Create a data plan
Step 9. Test your local app
Step 3. Set up your output
Step 8. Create a data plan
Step 3. Set up your output
Step 8. Create a data plan
Migrate from Segment to Client-side mParticle
Migrate from Segment to Server-side mParticle
The Developer's Guided Journey to mParticle
Download an audience from a journey
Audience A/B testing from a journey
Create a Next Best Action (NBA)
Activate Next Best Actions in Campaigns
Usage metering for value-based pricing (VBP)
Sync and Activate Analytics User Segments in mParticle
Apply All for Filter Where Clauses
Date Range and Time Settings Overview
Cumulative vs. Non-Cumulative Analysis in Segmentation
Total Count of vs. Users Who Performed
Time and Interval Settings in Dashboards
Optimize User Flow with A/B Testing
AWS Redshift (Define Your Own Schema)
AWS S3 Integration (Define Your Own Schema)
Mixpanel’smission is to increase the rate of innovation. Companies use Mixpanel to analyze how & why users engage, convert, and retain in real-time on web, mobile, and IoT devices, and then use the data to improve their products.
If you are new to setting up Mixpanel’s Mobile App Analytics, your best place to start is Mixpanel itself and the below are must-reads before proceeding:
Best Practices for setting up your events:https://mixpanel.com/help/reference/ios#sending-events
When mParticle sends data to Mixpanel, Mixpanel’s APIs are utilized.  This allows mParticle to implement server side data forwarding and supports our value proposition to customers of not requiring that additional app SDK components be continually added and updated for integrations.
In order to enable mParticle’s integration with Mixpanel, you will need an account with Mixpanel and have your Mixpanel Token for mParticle configuration. Your Mixpanel Token can be found at the Mixpanel topic,Find Project Token.
User and Event attributes with string values of"true"or"false"(not case sensitive), will be converted to boolean values before being forwarded to Mixpanel.
mParticle’s SDK supports nearly all of the Mixpanel SDK specific features natively. When you use the mParticle SDK, mParticle events will be transformed using Mixpanel-compliant naming conventions and activate the corresponding features automatically.
One of the key features of Mixpanel is funnel tracking, this feature requires a consistent approach to identifying your users as they sign up, and progress from being only identifiable by their device, to having a unique “logged in” ID.
mParticle manages this process using itsIDSync feature. IDSync gives you granular control over how user profiles are managed. To support IDSync, mParticle maintains a hierarchy of different ID types.
A traditional Mixpanel implementation, using the Mixpanel SDK, manages sign-up funnels by using the following process:
When a user first downloads your app, theDistinct IDis set using adefault anonymous device id(Apple Advertising ID for iOS, a random GUID for Android, a Cookie ID for Web).
When you know the identity of the current user, typically after log-in or sign-up, you call Mixpanel’sidentifymethod. Mixpanel recommends against using identify for anonymous visitors to your site.
If your project has Mixpanel’sID Mergefeature enabled, the call toidentifywill connect pre- and post-authentication events when appropriate.
If your project does not have ID Merge enabled,identifywill change the user’s local distinct_id to the unique ID you pass. Events tracked prior to authentication will not be connected to the same user identity. If ID Merge is disabled,  Alias can be used to tie the original Distinct ID (an anonymous device ID) and the new Distinct ID (a unique User ID) together in Mixpanel.
If this process is not followed correctly, funnel tracking won’t be possible, as Mixpanel will see the two Distinct IDs as two completely separate users.
If you wish to use Mixpanel’s funnel tracking features, here is one option for implementing with mParticle:
Option 1 - Use mParticle ID as the Distinct ID
This option is recommended for new implementations.This option lets your Mixpanel user profiles mirror those maintained by mParticle. This option lets your mParticle Identity strategy take care of aliasing for you, before your data ever reaches Mixpanel.
For this to work, you need to have selected an Identity Strategy that supports funnel tracking, such as theProfile Conversion Strategy. If you use the Profile Conversion Strategy and mParticle’sCustomer IDas your logged-in ID type, a sign-up flow works as follows:
When a user first downloads your app, mParticle creates a new user profile, with a new, unique mParticle ID. mParticle immediately begins forwarding event data to Mixpanel, mapping the mParticle ID to Mixpanel’s Distinct ID.
When the user creates an account, and you add a Customer ID, mParticle associates the new Customer ID with the original user profile. Now you have a new way of identifying users in the mParticle SDK, themParticle ID— mapped to Mixpanel as the Distinct ID — which never changes.
To use this option, set theExternal Identity TypetomParticle IDin theConfiguration Settings.
Note that this example is the minimum necessary to demonstrate the required sign-up flow and does not include additional features, such as completion handlers. Refer to the full Identity documentation:
To support each feature in theSupported Featurestable above, multiple methods will need to be implemented. The following table shows the mapping between each feature and SDK methods.
Tracking standard events in the mParticle SDK is fairly straightforward. Events can be standalone or include event attributes. mParticle attributes are converted to Mixpanel properties automatically when forwarded.
mParticle sends data to different Mixpanel endpoints depending on the age of the events:
Events that are less than or equal to 5 days old are sent to thetrackendpoint.
Events that are greater than 5 days old are sent to theimportendpoint.  In order for mParticle to send the historical data to Mixpanel, you must provide theAPI Secret. If not provided, mParticle will drop these events.
Super properties allow certain properties that you want to include with each event you send. Generally, these are things you know about the user rather than about a specific event, for example, the user’s age, gender, or source. These super properties will be automatically included with all tracked events. Super properties are saved to device storage, and will persist across invocations of your app.
Setting User Properties and Attribute Mapping
Both Mixpanel and mParticle have the ability to set specific attributes for the user which will persist until overwritten.
If you have enabled the ‘Include User Attributes’ setting, then any messages with type ScreenView or AppEvent will include the email user identity (if available) and all user attributes.  TheSetUserAttributemethod can be used to set user attributes. This method will overwrite the values of any existing user attributes.
mParticle’s attribute naming conventions closely resemble standard Mixpanel attributes, which a few exceptions:
These mParticle attributes will just have the leading $ removed:
If these attributes are seen, they will be replaced with Mixpanel attributes:
With available user identity info and user attributes, standard people data being sent includes:
ip:the IP address of the request or “0”
insert_id:used to de-duplicate events - this is set to mParticle event_id.
Data being sent in the $set section:
user attributes:following the rules inAttribute mappings
email address:if it exists in the user identities
In order to track revenue using mParticle and Mixpanel, you need to ensure that mParticle is forwarding on relevant data by enabling theUse Mixpanel Peoplesetting.  If the mParticle SDK method has been called to log an event, the event and one event attribute have been set up for LTV tracking, and the event is not excluded by an account policy, a transaction message will be sent to Mixpanel.
Only specific data will be considered as part of the transactional funnel. Standard message data format is:
action type:$transaction for a TrackCharge message
ip:the IP address of the request or “0”
insert_id:used to de-duplicate events - this is set to mParticle event_id.
Data being sent in the transactions section:
$amount:the total value of the event
$time:the message timestamp in the formatyyyy-MM-dd'T'HH:mm:ss
event attributes:follows the rules inAttribute Mappings
Event batches sent to Mixpanel using the server-side web integration will also send the following data:
browser version:the version of the web browser
Note that this data depends on thehttp_header_user_agentfield so they will only be set if a value is included in the batch.
By default, mParticle sends data to Mixpanel’s US Servers, but offers an EU Data Localization option for theiringestion API, which allows data to be sent and stored in the Mixpanel EU Data Center (see Mixpanel’s documentation onStoring Your Data in the European Union). This EU Residency is not automatically set within a Mixpanel project. You can find steps on how to set EU Data Localization for your Mixpanel project withinthe Mixpanel documentation. In mParticle, theMixpanel Target Server Configuration Settingmust be set toEU Residency Server.
Option 1 - Use mParticle ID as the Distinct ID
Setting User Properties and Attribute Mapping
Do Not Sell or Share My Personal Data
These cookies are necessary for the website to function and cannot be switched off in our systems. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.
Share Or Sale of Personal Data
Under the CPRA, you have the right to opt-out of the sale or sharing of your personal information to third parties. These cookies collect information for analytics and to personalize your experience with targeted ads. You may exercise your right to opt out of the sale or sharing of personal information by using this toggle switch. If you opt out we will not be able to offer you personalized ads and will not hand over your personal information to any third parties. Additionally, you may contact our legal department for further clarification about your rights as a California consumer by using this Exercise My Rights link.If you have enabled privacy controls on your browser (such as a plugin), we have to take that as a valid request to opt-out. Therefore we would not be able to track your activity through the web. This may affect our ability to personalize ads according to your preferences.
Targeting CookiesSwitch LabellabelThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
These cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
Performance CookiesSwitch LabellabelThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
Data Subject Request API Version 1 and 2
Data Subject Request API Version 3
Preventing Blocked HTTP Traffic with CNAME
Preventing Blocked HTTP Traffic with CNAME
Web SDK via Google Tag Manager
Preventing Blocked HTTP Traffic with CNAME
Upgrade to Version 2 of the SDK
Step 3. Set up your output
Step 8. Create a data plan
Step 9. Test your local app
Step 3. Set up your output
Step 8. Create a data plan
Step 3. Set up your output
Step 8. Create a data plan
Migrate from Segment to Client-side mParticle
Migrate from Segment to Server-side mParticle
The Developer's Guided Journey to mParticle
Download an audience from a journey
Audience A/B testing from a journey
Create a Next Best Action (NBA)
Activate Next Best Actions in Campaigns
Usage metering for value-based pricing (VBP)
Sync and Activate Analytics User Segments in mParticle
Apply All for Filter Where Clauses
Date Range and Time Settings Overview
Cumulative vs. Non-Cumulative Analysis in Segmentation
Total Count of vs. Users Who Performed
Time and Interval Settings in Dashboards
Optimize User Flow with A/B Testing
AWS Redshift (Define Your Own Schema)
AWS S3 Integration (Define Your Own Schema)
mParticle’s Twitter Tailored Audience integration enables app owners to push audiences created in Audience Manager to Twitter. Once the integration is activated and your audience is pushed to Twitter, you can then target Promoted Tweets to your Tailored Audiences for engagement, cross-promotion, exclusion targeting or monetization use cases.
In order to enable audience forwarding to Twitter, you will need the account credentials for a Twitter account that is linked to your app’s Twitter Ads account.  The integration activation process in Audience Manager will prompt you to log into your Twitter account, and once authorized, mParticle will automatically retrieve the credentials that it needs to forward audiences to Twitter. The account you login with will need a permission level of Account Administrator to connect an affiliated Ad Account.
Timing- Real Time Audiences are activated for targeting in near real time, however please note that the true estimate for the audience size may still take up to 60 hours.  It is possible to view audience status in the Ads UI via “Audience Manager” dashboard.
Add the Twitter Audience integration to your setup from the Directory.
FromSetup > OutputsAdd a new Twitter Audience Configuration.
Log into Twitter from the popup, select your advertising account and clickSave.
From your audience’sConnectpage, add Twitter as an output and select the configuration you created. You can choose whether or not to forward emails, Twitter handles and device IDs to Twitter. ClickAdd Connectionto finalize the connection.
Depending on the Configuration Settings that you select (see below), Twitter will use one or more of the following IDs to match users:
Device IDs (IDFA for Apple OS, Google Ad ID for Android)
mParticle sends these IDs as a SHA-256 hash.
mParticle deletes the downstream audience when you delete an audience from mParticle.
For more information about advertising through Twitter, seeTwitter Business.
Do Not Sell or Share My Personal Data
These cookies are necessary for the website to function and cannot be switched off in our systems. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.
Share Or Sale of Personal Data
Under the CPRA, you have the right to opt-out of the sale or sharing of your personal information to third parties. These cookies collect information for analytics and to personalize your experience with targeted ads. You may exercise your right to opt out of the sale or sharing of personal information by using this toggle switch. If you opt out we will not be able to offer you personalized ads and will not hand over your personal information to any third parties. Additionally, you may contact our legal department for further clarification about your rights as a California consumer by using this Exercise My Rights link.If you have enabled privacy controls on your browser (such as a plugin), we have to take that as a valid request to opt-out. Therefore we would not be able to track your activity through the web. This may affect our ability to personalize ads according to your preferences.
Targeting CookiesSwitch LabellabelThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
These cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
Performance CookiesSwitch LabellabelThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
Data Subject Request API Version 1 and 2
Data Subject Request API Version 3
Preventing Blocked HTTP Traffic with CNAME
Preventing Blocked HTTP Traffic with CNAME
Web SDK via Google Tag Manager
Preventing Blocked HTTP Traffic with CNAME
Upgrade to Version 2 of the SDK
Step 3. Set up your output
Step 8. Create a data plan
Step 9. Test your local app
Step 3. Set up your output
Step 8. Create a data plan
Step 3. Set up your output
Step 8. Create a data plan
Migrate from Segment to Client-side mParticle
Migrate from Segment to Server-side mParticle
The Developer's Guided Journey to mParticle
Download an audience from a journey
Audience A/B testing from a journey
Create a Next Best Action (NBA)
Activate Next Best Actions in Campaigns
Usage metering for value-based pricing (VBP)
Sync and Activate Analytics User Segments in mParticle
Apply All for Filter Where Clauses
Date Range and Time Settings Overview
Cumulative vs. Non-Cumulative Analysis in Segmentation
Total Count of vs. Users Who Performed
Time and Interval Settings in Dashboards
Optimize User Flow with A/B Testing
AWS Redshift (Define Your Own Schema)
AWS S3 Integration (Define Your Own Schema)
IDSync is the mParticle identity framework, enabling you to create a unified view of your customers, with improved data governance, policy, and security.
IDSync gives visibility into, and control over, the management of known and anonymous user identities across apps and platforms. It allows marketers to accurately identify customers in key moments of their journey in order to support robust targeting and personalization, and to deliver consistent user experiences across all devices, touchpoints, and channels.
Do Not Sell or Share My Personal Data
These cookies are necessary for the website to function and cannot be switched off in our systems. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.
Share Or Sale of Personal Data
Under the CPRA, you have the right to opt-out of the sale or sharing of your personal information to third parties. These cookies collect information for analytics and to personalize your experience with targeted ads. You may exercise your right to opt out of the sale or sharing of personal information by using this toggle switch. If you opt out we will not be able to offer you personalized ads and will not hand over your personal information to any third parties. Additionally, you may contact our legal department for further clarification about your rights as a California consumer by using this Exercise My Rights link.If you have enabled privacy controls on your browser (such as a plugin), we have to take that as a valid request to opt-out. Therefore we would not be able to track your activity through the web. This may affect our ability to personalize ads according to your preferences.
Targeting CookiesSwitch LabellabelThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
These cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
Performance CookiesSwitch LabellabelThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
Data Subject Request API Version 1 and 2
Data Subject Request API Version 3
Preventing Blocked HTTP Traffic with CNAME
Preventing Blocked HTTP Traffic with CNAME
Web SDK via Google Tag Manager
Preventing Blocked HTTP Traffic with CNAME
Upgrade to Version 2 of the SDK
Step 3. Set up your output
Step 8. Create a data plan
Step 9. Test your local app
Step 3. Set up your output
Step 8. Create a data plan
Step 3. Set up your output
Step 8. Create a data plan
Migrate from Segment to Client-side mParticle
Migrate from Segment to Server-side mParticle
The Developer's Guided Journey to mParticle
Download an audience from a journey
Audience A/B testing from a journey
Create a Next Best Action (NBA)
Activate Next Best Actions in Campaigns
Usage metering for value-based pricing (VBP)
Sync and Activate Analytics User Segments in mParticle
Apply All for Filter Where Clauses
Date Range and Time Settings Overview
Cumulative vs. Non-Cumulative Analysis in Segmentation
Total Count of vs. Users Who Performed
Time and Interval Settings in Dashboards
Optimize User Flow with A/B Testing
AWS Redshift (Define Your Own Schema)
AWS S3 Integration (Define Your Own Schema)
This SDK is a helper library for the mParticle Events HTTP API, it exposes mParticle’s schema as simple models and provides an HTTP client interface. This SDK is stateless and will only send the data that you populate, whereas our mobile SDKs will automatically collect app and device information, session events, install events, and maintain persistence. Read this wiki for a general overview and examples, andcontact our customer support teamto make sure you’re feeding the platform with the right data to power your integrations. You can find the Ruby SDKhosted on Github.
All data sent via the SDK must be encapsulated in a Batch object. Each Batch is associated with asingle user. Batch objects must be associated with an environment (productionordevelopment) to properly silo your testing and production data.
Most use-cases require that data be associated with a user identity, for example:
If you’re also sending data to mParticle via our mobile SDKs, set a customer ID both via the mobile SDKs and this SDK so that mParticle can correctly associate data with each user.
Several marketing automation and audience integrations are powered by email.
TheDeviceInformationobject describes a mobile device that should be associated with this batch. Crucially, it exposes properties for device identities (Apple IDFA and Google Advertising ID) which are required for nearly all mParticle Audience integrations.
device_info=MParticle::DeviceInformation.new# set any IDs that you have for this userdevice_info.ios_advertising_id='07d2ebaa-e956-407e-a1e6-f05f871bf4e2'device_info.android_advertising_id='a26f9736-c262-47ea-988b-0b0504cee874'batch.device_info=device_info
device_info=MParticle::DeviceInformation.new# set any IDs that you have for this userdevice_info.ios_advertising_id='07d2ebaa-e956-407e-a1e6-f05f871bf4e2'device_info.android_advertising_id='a26f9736-c262-47ea-988b-0b0504cee874'batch.device_info=device_info
The mParticle audience platform can be powered by only sending a combination of user attributes, used to describe segments of users, and device identities/user identities used to then target those users.
# arbitrary example allowing you to create a segment of users trial usersbatch.user_attributes={'Account type'=>'trial','TrialEndDate'=>'2016-12-01'}
# arbitrary example allowing you to create a segment of users trial usersbatch.user_attributes={'Account type'=>'trial','TrialEndDate'=>'2016-12-01'}
Events are central to many of mParticle’s integrations; analytics integrations typically require events, and you can create mParticle Audiences based on the recency and frequency of different events. All events should be associated with a timestamp reflecting when they actually occurred, otherwise they will be assigned a timestamp when mParticle receives them.
App Events represent specific actions that a user has taken in your app. At minimum they require a name and a type, but can also be associate with a free-form dictionary of key/value pairs.
The CommerceEvent is central to mParticle’s eCommerce measurement. CommerceEvents can contain many data points but it’s important to understand that there are 3 core variations:
Product-based: Used to measure measured datapoints associated with one or more products
Promotion-base: Used to measure datapoints associated with internal promotions or campaigns
Impression-based: Used to measure interactions with impressions of products and product-listings
The SessionStartEvent and SessionEndEvent should be used to describe the details of user session such as its length, which is a common metric used in many mParticle integrations. Additonally, length, recency, and frequency of sessions are powerful data-points by which an mParticle audience can be defined.
session_start=MParticle::SessionStartEvent.newsession_start.session_id=12345678session_start.timestamp_unixtime_ms=example_timestamp

session_end=MParticle::SessionEndEvent.newsession_end.session_id=session_start.session_id# its mandatory that these matchsession_end.session_duration_ms=example_duration
session_end.timestamp_unixtime_ms=example_timestamp+example_duration

batch.events=[session_start,session_end]
session_start=MParticle::SessionStartEvent.newsession_start.session_id=12345678session_start.timestamp_unixtime_ms=example_timestamp

session_end=MParticle::SessionEndEvent.newsession_end.session_id=session_start.session_id# its mandatory that these matchsession_end.session_duration_ms=example_duration
session_end.timestamp_unixtime_ms=example_timestamp+example_duration

batch.events=[session_start,session_end]
Use these events to represent the nuances of inter- and intra-session user-behavior with your app. Install events are crucial to power many attribution integrations and to judge the success of marketing campaigns.
To conform to the ever growing global regulations on data privacy, mParticle providesdata privacy controls.
Data privacy control is initially configured in the dashboard and is attached via a batch’sconsent_state.
In this example,'My Purpose'should match theConsent Purposedefined in your GDPR Setting
The SDK provides an interface to the mParticle HTTP API by way of the EventsApi class.
At minimum, theEventsApimust be initialized with an mParticle key and secret. You can find your mParticle key and secret by navigating to theAppssection of the mParticle platform UI.
You must associate your data with the correct key and secret. If your app is multi-platform, for example, be sure to send your Android data to your Android key/secret, and your iOS data to your iOS key/secret.
# set credentialsconfig=MParticle::Configuration.newconfig.api_key='REPLACE WITH API KEY'config.api_secret='REPLACE WITH API SECRET'api_instance=MParticle::EventsApi.new(config)
# set credentialsconfig=MParticle::Configuration.newconfig.api_key='REPLACE WITH API KEY'config.api_secret='REPLACE WITH API SECRET'api_instance=MParticle::EventsApi.new(config)
The EventsAPI class exposes two interfaces:
bulk_upload_events- Accepts up to 100Batchobjects for up to 100 users.
upload_events- Accepts a singleBatchobject for a single user
begin# you can also send multiple batches at a time to decrease the amount of network callsthread=api_instance.upload_events(batch){|data,status_code,headers|ifstatus_code==202puts"Upload complete"end}# wait for the thread, if needed to prevent the process from terminatingthread.join# alternately, you can omit the callback and synchronously wait until the network request completesdata,status_code,headers=api_instance.upload_events(batch)rescueMParticle::ApiError=>e
  puts"Exception when calling mParticle:#{e}"end
begin# you can also send multiple batches at a time to decrease the amount of network callsthread=api_instance.upload_events(batch){|data,status_code,headers|ifstatus_code==202puts"Upload complete"end}# wait for the thread, if needed to prevent the process from terminatingthread.join# alternately, you can omit the callback and synchronously wait until the network request completesdata,status_code,headers=api_instance.upload_events(batch)rescueMParticle::ApiError=>e
  puts"Exception when calling mParticle:#{e}"end
Do Not Sell or Share My Personal Data
These cookies are necessary for the website to function and cannot be switched off in our systems. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.
Share Or Sale of Personal Data
Under the CPRA, you have the right to opt-out of the sale or sharing of your personal information to third parties. These cookies collect information for analytics and to personalize your experience with targeted ads. You may exercise your right to opt out of the sale or sharing of personal information by using this toggle switch. If you opt out we will not be able to offer you personalized ads and will not hand over your personal information to any third parties. Additionally, you may contact our legal department for further clarification about your rights as a California consumer by using this Exercise My Rights link.If you have enabled privacy controls on your browser (such as a plugin), we have to take that as a valid request to opt-out. Therefore we would not be able to track your activity through the web. This may affect our ability to personalize ads according to your preferences.
Targeting CookiesSwitch LabellabelThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
These cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
Performance CookiesSwitch LabellabelThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
Data Subject Request API Version 1 and 2
Data Subject Request API Version 3
Preventing Blocked HTTP Traffic with CNAME
Preventing Blocked HTTP Traffic with CNAME
Web SDK via Google Tag Manager
Preventing Blocked HTTP Traffic with CNAME
Upgrade to Version 2 of the SDK
Step 3. Set up your output
Step 8. Create a data plan
Step 9. Test your local app
Step 3. Set up your output
Step 8. Create a data plan
Step 3. Set up your output
Step 8. Create a data plan
Migrate from Segment to Client-side mParticle
Migrate from Segment to Server-side mParticle
The Developer's Guided Journey to mParticle
Download an audience from a journey
Audience A/B testing from a journey
Create a Next Best Action (NBA)
Activate Next Best Actions in Campaigns
Usage metering for value-based pricing (VBP)
Sync and Activate Analytics User Segments in mParticle
Apply All for Filter Where Clauses
Date Range and Time Settings Overview
Cumulative vs. Non-Cumulative Analysis in Segmentation
Total Count of vs. Users Who Performed
Time and Interval Settings in Dashboards
Optimize User Flow with A/B Testing
AWS Redshift (Define Your Own Schema)
AWS S3 Integration (Define Your Own Schema)
The purpose of this guide is to walk you through the basic steps of setting up mParticle in your app, unlocking core functionality, and troubleshooting common issues. Along the way, you’ll cover some important concepts you need to understand to be successful with mParticle.
This is not a complete guide to all of mParticle’s features and capabilities. If you already know your way around mParticle and you’re looking for in-depth docs, head to ourDevelopersorGuidessections.
The tutorials in this guide follow the process of setting up mParticle in the mPTravel app: a mobile and web app that sells luxury travel packages to its users.
Later on in this guide, you’ll learn about sending data from mParticle to some of our many integration partners. As examples, the tutorials use services which are simple to set up and verify, and which offer a free account tier, so that you will be able follow the examples exactly if you wish. However, mParticle is agnostic about which integrations you choose and you can follow the same basic steps from this guide to implement any of our integrations.
One of the key functions of mParticle is to receive your data from wherever it originates, and send it wherever it needs to go. The sources of your data are inputs and the service or app where it is forwarded are outputs. A connection is a combination of an input and output.
Inputs include:Apps or services built on any platform we support, such as iOS, Android, or Web. You can view the full list inSETUP > Inputsin the PLATFORMS tab.Data feeds of any other data you want to send into mParticle. This could be data you have collected yourself or from a feed partner. Once configured, feed inputs are listed inSETUP > Inputson the FEEDS tab.
Apps or services built on any platform we support, such as iOS, Android, or Web. You can view the full list inSETUP > Inputsin the PLATFORMS tab.
Data feeds of any other data you want to send into mParticle. This could be data you have collected yourself or from a feed partner. Once configured, feed inputs are listed inSETUP > Inputson the FEEDS tab.
Outputs may be configured for events, audiences, cookie syncs, or data subject requests depending on what the output supports. You can see the list of configured outputs inSETUP > OutputsorSETUP > Data Warehouses. Outputs include:
In-app messaging partners such as Braze
Data Warehouse partners, such as Amazon Redshift, Google BigQuery, or Snowflake
To get started with mParticle, you need some data, which means you need to create at least one input.
The first thing you need to do is to to create a set of access credentials that will allow a client-side SDK or a server-side application to forward data to this workspace.
Login to your mParticle account. If you’re just getting started, your first workspace is created for you. The first screen you see is an overview of activity in the workspace. Since you haven’t yet sent any data, there’s nothing to report, so far.
Navigate toSetup > Inputsin the left column. Here you can see each platform type accepted by mParticle. Different platforms are associated with different sets of metadata, such as device identifiers, and most outputs only accept data from a limited set of platforms, so it is important to select the right platform. To capture data from your native Android app, chooseAndroid. Just click the+next to your chosen platform.
Copy and save the generated Key and Secret.
mParticle labels the credentials you create for an integration the key and secret, but they are not exactly like an API key and secret, since you embed these credentials in the app. However, this is not the security risk that exposing API credentials would be:
The client-side key and secret can’t read data from the system.
You canblock bad datato stop any traffic that doesn’t match the data you expect as defined in your schema.
Most anonymous client-server architectures, including Adobe, Braze, Firebase, Google Analytics, and Segment don’t have per-session or per-instance credentials, nor does mParticle.
Install and Initialize an mParticle SDK
You need a developer to help you install and initialize an SDK. See the Getting Started guides for theiOS,AndroidorJavascriptSDKs to get set up before continuing.
Verify: Look for Incoming Data in the Live Stream
Navigate toActivity > Live Streamin the left column. The Live Stream lets you inspect all incoming data from your development environments. It’s an easy way to check that you have correctly initialized mParticle in your app. When you first open up the Live Stream, it will be empty, as we haven’t yet started sending data.
Start up a development build of your app (get a developer to help you if necessary). The mParticle SDKs automatically collect and forward data about installs and user sessions, so just by opening a development build of your app, you should start to see data in the Live Stream.
For the iOS, Android, tvOS, and Web platforms, some advanced configuration settings are available. To change these settings, navigate toSetup > Inputsin the left column and select either iOS, Android, tvOS, or Web from the list of platforms.
Expand theAdvanced Settingsby clicking the + icon.
Restrict Device ID by Limit Ad Tracking
iOS, Android, and tvOS (Apple TV) devices allow users to limit the collection of advertising IDs. Advertising IDs are unique identifiers you may use to associate event and user data with a specific device. For both iOS and Android devices, if a user has not provided explicit consent to share their device’s advertising ID, then the value of that ID is set to an all-zero value.
By checkingRestrict Device ID by Limit Ad Tracking, mParticle will not collect advertising IDs from users who have enabled the Limit Ad Tracking setting on their device.
Remember, mParticle will collect advertising IDs for both iOS and Android devices, regardless of whether or not a user has enabled the Limit Ad Tracking setting on their device. However, the IDs collected from users who have opted out will be all-zero values.
Following are descriptions of Apple and Google’s policies for device advertising IDs:
After the release of iOS 14.5, Apple introduced the App Tracking Transparency (ATT) framework, which requires app developers to request users’ explicit consent to share their advertising IDs. If a user of your app has not provided this consent, Apple’s advertising ID (IDFA) will be set to all an all-zero value:00000000-0000-0000-0000-000000000000. Read more about Apple advertising identifiersin their documentation.
For more information about the ATT framework, visit theiOS 14 Guide.
Google allows Android users to opt out from sharing their devices’ advertising IDs. Similar to Apple’s policy, Google will set a user’s advertising ID (GAID or AAID) to an all-zero value if that user has opted out from sharing their ID. Read more about Google’s advertising identifiers intheir documentation.
The Web SDK can collect integration-specific identifiers to enrich the user data forwarded to your connected outputs.
WhenCollect Integration-Specific Identifiersis checked, these integration-specific identifiers are collected and used to enrich your user data to help optimize the match rate of your audiences in downstream tools. Currently, these identifiers include Facebook’sfbcandfbpfields.
If you don’t see data appearing in the Live Stream within the first few minutes after opening a development build:
Check that you have copied your Key and Secret correctly
Check that you have properly included the mParticle SDK in your project and it is correctly initialized. The necessary steps will differ depending on the platform. Check ouriOS,AndroidandWebdocs for more.
Congratulations, you have created a working data input. Now it’s time tostart capturing some data.
Install and Initialize an mParticle SDK
Verify: Look for Incoming Data in the Live Stream
Restrict Device ID by Limit Ad Tracking
Do Not Sell or Share My Personal Data
These cookies are necessary for the website to function and cannot be switched off in our systems. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.
Share Or Sale of Personal Data
Under the CPRA, you have the right to opt-out of the sale or sharing of your personal information to third parties. These cookies collect information for analytics and to personalize your experience with targeted ads. You may exercise your right to opt out of the sale or sharing of personal information by using this toggle switch. If you opt out we will not be able to offer you personalized ads and will not hand over your personal information to any third parties. Additionally, you may contact our legal department for further clarification about your rights as a California consumer by using this Exercise My Rights link.If you have enabled privacy controls on your browser (such as a plugin), we have to take that as a valid request to opt-out. Therefore we would not be able to track your activity through the web. This may affect our ability to personalize ads according to your preferences.
Targeting CookiesSwitch LabellabelThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
These cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
Performance CookiesSwitch LabellabelThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
Data Subject Request API Version 1 and 2
Data Subject Request API Version 3
Preventing Blocked HTTP Traffic with CNAME
Preventing Blocked HTTP Traffic with CNAME
Web SDK via Google Tag Manager
Preventing Blocked HTTP Traffic with CNAME
Upgrade to Version 2 of the SDK
Step 3. Set up your output
Step 8. Create a data plan
Step 9. Test your local app
Step 3. Set up your output
Step 8. Create a data plan
Step 3. Set up your output
Step 8. Create a data plan
Migrate from Segment to Client-side mParticle
Migrate from Segment to Server-side mParticle
The Developer's Guided Journey to mParticle
Download an audience from a journey
Audience A/B testing from a journey
Create a Next Best Action (NBA)
Activate Next Best Actions in Campaigns
Usage metering for value-based pricing (VBP)
Sync and Activate Analytics User Segments in mParticle
Apply All for Filter Where Clauses
Date Range and Time Settings Overview
Cumulative vs. Non-Cumulative Analysis in Segmentation
Total Count of vs. Users Who Performed
Time and Interval Settings in Dashboards
Optimize User Flow with A/B Testing
AWS Redshift (Define Your Own Schema)
AWS S3 Integration (Define Your Own Schema)
This SDK is a helper library for the mParticle Events HTTP API, it exposes mParticle’s schema as simple models and provides an HTTP client interface. This SDK is stateless and will only send the data that you populate, whereas our mobile SDKs will automatically collect app and device information, session events, install events, and maintain persistence. Read this wiki for a general overview and examples, andcontact our customer support teamto make sure you’re feeding the platform with the right data to power your integrations.
All data sent via the SDK must be encapsulated in aBatchobject. Each Batch is associated with asingle user. Batch objects must be associated with an environment (productionordevelopment) to properly silo your testing and production data.
Most use-cases require that data be associated with a user identity, for example:
If you’re also sending data to mParticle via our mobile SDKs, set a customer ID both via the mobile SDKs and this SDK so that mParticle can correctly associate data with each user.
Several marketing automation and audience integrations are powered by email.
TheDeviceInformationobject describes a mobile device that should be associated with this batch. Crucially, it exposes properties for device identities (Apple IDFA and Google Advertising ID) which are required for nearly all mParticle Audience integrations.
vardevice_info=newmParticle.DeviceInformation();// set any IDs that you have for this userdevice_info.ios_advertising_id='07d2ebaa-e956-407e-a1e6-f05f871bf4e2';device_info.android_advertising_id='a26f9736-c262-47ea-988b-0b0504cee874';batch.device_info=device_info;
vardevice_info=newmParticle.DeviceInformation();// set any IDs that you have for this userdevice_info.ios_advertising_id='07d2ebaa-e956-407e-a1e6-f05f871bf4e2';device_info.android_advertising_id='a26f9736-c262-47ea-988b-0b0504cee874';batch.device_info=device_info;
The mParticle audience platform can be powered by only sending a combination of user attributes, used to describe segments of users, and device identities/user identities used to then target those users.
// arbitrary example allowing you to create a segment of users trial usersbatch.user_attributes={'Account type':'trial','TrialEndDate':'2016-12-01'};
// arbitrary example allowing you to create a segment of users trial usersbatch.user_attributes={'Account type':'trial','TrialEndDate':'2016-12-01'};
Events are central to many of mParticle’s integrations; analytics integrations typically require events, and you can create mParticle Audiences based on the recency and frequency of different events. All events should be associated with a timestamp reflecting when they actually occurred, otherwise they will be assigned a timestamp when mParticle receives them.
App Events represent specific actions that a user has taken in your app. At minimum they require a name and a type, but can also be associate with a free-form dictionary of key/value pairs.
The CommerceEvent is central to mParticle’s eCommerce measurement. CommerceEvents can contain many data points but it’s important to understand that there are 3 core variations:
Product-based: used to measure measured data points associated with one or more products
Promotion-based: used to measure data points associated with internal promotions or campaigns
Impression-based: used to measure interactions with impressions of products and product-listings
// 1. Create the product and add any product attributesvarproduct=newmParticle.Product();product.name='Example Product';product.id='sample-sku';product.price=19.99;// Optional custom attributes for the product can be added as key/value string pairs within a customAttributes objectproduct.customAttributes={"on-sale":"true","referbished":"false"};// 2. Summarize the purchase of the product in a ProductAction object, passing in the product object created in step 1varproduct_action=newmParticle.ProductAction('purchase');product_action.products=[product];product_action.tax_amount=1.50;product_action.total_amount=21.49;// 3. Log the purchase event using CommerceEventvarcommerce_event=newmParticle.CommerceEvent();commerce_event.product_action=product_action;commerce_event.timestamp_unixtime_ms=1484322995852;// Replace with time of transactionbatch.addEvent(commerce_event);
// 1. Create the product and add any product attributesvarproduct=newmParticle.Product();product.name='Example Product';product.id='sample-sku';product.price=19.99;// Optional custom attributes for the product can be added as key/value string pairs within a customAttributes objectproduct.customAttributes={"on-sale":"true","referbished":"false"};// 2. Summarize the purchase of the product in a ProductAction object, passing in the product object created in step 1varproduct_action=newmParticle.ProductAction('purchase');product_action.products=[product];product_action.tax_amount=1.50;product_action.total_amount=21.49;// 3. Log the purchase event using CommerceEventvarcommerce_event=newmParticle.CommerceEvent();commerce_event.product_action=product_action;commerce_event.timestamp_unixtime_ms=1484322995852;// Replace with time of transactionbatch.addEvent(commerce_event);
TheSessionStartEventandSessionEndEventshould be used to describe the details of user session such as its length, which is a common metric used in many mParticle integrations. Additonally, length, recency, and frequency of sessions are powerful data-points by which an mParticle audience can be defined.
varsession_start=newmParticle.SessionStartEvent();session_start.session_id=12345678;session_start.timestamp_unixtime_ms=example_timestamp;session_end=newmParticle.SessionEndEvent();session_end.session_id=session_start.session_id;// it's mandatory that these matchsession_end.session_duration_ms=example_duration;session_end.timestamp_unixtime_ms=example_timestamp+example_duration;batch.events=[session_start,session_end];
varsession_start=newmParticle.SessionStartEvent();session_start.session_id=12345678;session_start.timestamp_unixtime_ms=example_timestamp;session_end=newmParticle.SessionEndEvent();session_end.session_id=session_start.session_id;// it's mandatory that these matchsession_end.session_duration_ms=example_duration;session_end.timestamp_unixtime_ms=example_timestamp+example_duration;batch.events=[session_start,session_end];
To conform to the ever growing global regulations on data privacy, mParticle supportsData Privacy Controls.
This is initially configured in the dashboard and is attached via a batch’sconsent_state.
In this example,'My Purpose'should match theConsent Purposedefined in your GDPR Settings
The SDK provides an interface to the mParticle HTTP API by way of theEventsApiclass.
At minimum, theEventsApimust be initialized with aConfigurationobject, containing an mParticle key and secret. You can find your mParticle key and secret by navigating to theAppssection of the mParticle platform UI.
You must associate your data with the correct key and secret. If your app is multi-platform, for example, be sure to send your Android data to your Android key/secret, and your iOS data to your iOS key/secret.
varapi=newmParticle.EventsApi(newmParticle.Configuration('REPLACE WITH API KEY','REPLACE WITH API SECRET'));
varapi=newmParticle.EventsApi(newmParticle.Configuration('REPLACE WITH API KEY','REPLACE WITH API SECRET'));
The EventsAPI class exposes two interfaces:
bulkUploadEvents- Accepts up to 100Batchobjects for up to 100 users.
uploadEvents- Accepts a singleBatchobject for a single user
varbatch=newmParticle.Batch(mParticle.Batch.Environment.development);batch.user_identities=newmParticle.UserIdentities();batch.user_identities.customerid='123456'// identify the user (required)batch.user_attributes={'hair color':'brown'}varevent=newmParticle.AppEvent(mParticle.AppEvent.CustomEventType.navigation,'Hello World');batch.addEvent(event);varbody=[batch];// {[Batch]} Up to 100 Batch objectsvarcallback=function(error,data,response){if(error){console.error(error);}else{console.log('API called successfully.');}};api.bulkUploadEvents(body,callback);// or upload a single batch// api.uploadEvents(batch, callback)
varbatch=newmParticle.Batch(mParticle.Batch.Environment.development);batch.user_identities=newmParticle.UserIdentities();batch.user_identities.customerid='123456'// identify the user (required)batch.user_attributes={'hair color':'brown'}varevent=newmParticle.AppEvent(mParticle.AppEvent.CustomEventType.navigation,'Hello World');batch.addEvent(event);varbody=[batch];// {[Batch]} Up to 100 Batch objectsvarcallback=function(error,data,response){if(error){console.error(error);}else{console.log('API called successfully.');}};api.bulkUploadEvents(body,callback);// or upload a single batch// api.uploadEvents(batch, callback)
Do Not Sell or Share My Personal Data
These cookies are necessary for the website to function and cannot be switched off in our systems. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.
Share Or Sale of Personal Data
Under the CPRA, you have the right to opt-out of the sale or sharing of your personal information to third parties. These cookies collect information for analytics and to personalize your experience with targeted ads. You may exercise your right to opt out of the sale or sharing of personal information by using this toggle switch. If you opt out we will not be able to offer you personalized ads and will not hand over your personal information to any third parties. Additionally, you may contact our legal department for further clarification about your rights as a California consumer by using this Exercise My Rights link.If you have enabled privacy controls on your browser (such as a plugin), we have to take that as a valid request to opt-out. Therefore we would not be able to track your activity through the web. This may affect our ability to personalize ads according to your preferences.
Targeting CookiesSwitch LabellabelThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
These cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
Performance CookiesSwitch LabellabelThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
Data Subject Request API Version 1 and 2
Data Subject Request API Version 3
Preventing Blocked HTTP Traffic with CNAME
Preventing Blocked HTTP Traffic with CNAME
Web SDK via Google Tag Manager
Preventing Blocked HTTP Traffic with CNAME
Upgrade to Version 2 of the SDK
Step 3. Set up your output
Step 8. Create a data plan
Step 9. Test your local app
Step 3. Set up your output
Step 8. Create a data plan
Step 3. Set up your output
Step 8. Create a data plan
Migrate from Segment to Client-side mParticle
Migrate from Segment to Server-side mParticle
The Developer's Guided Journey to mParticle
Download an audience from a journey
Audience A/B testing from a journey
Create a Next Best Action (NBA)
Activate Next Best Actions in Campaigns
Usage metering for value-based pricing (VBP)
Sync and Activate Analytics User Segments in mParticle
Apply All for Filter Where Clauses
Date Range and Time Settings Overview
Cumulative vs. Non-Cumulative Analysis in Segmentation
Total Count of vs. Users Who Performed
Time and Interval Settings in Dashboards
Optimize User Flow with A/B Testing
AWS Redshift (Define Your Own Schema)
AWS S3 Integration (Define Your Own Schema)
mParticle is a customer data platform that makes it easy to collect and organize data before sending it to product analytics, A/B testing, marketing automation, and data warehouse tools.
mParticle provides several SDKs and APIs allowing you to collect data from a variety of sources, like a mobile app, web app, or data feeds from other SaaS providers.
You can collect two types of data with mParticle:
Event data: data that describes what your users are doing
User data: data that describes who your users are
Learn how to integrate the iOS SDK from start to finish
To demonstrate how mParticle works, you will learn how to track basic event data like page views and product purchases in a mobile app using the mParticle iOS SDK. Then, you will learn how to send that data to a webhook. You will also learn how to manage your data quality by creating a data plan.
mParticle provides thirteen SDKs for specific platforms like web, iOS, and Android, in addition to several APIs. mParticle also provides over 250 integrations with data warehouse, analytics, and marketing automation tools.
To keep your first steps with mParticle quick and easy, this tutorial uses the iOS SDK and a sample ecommerce app calledThe Higgs Shop.
mParticle’s iOS SDK supports both mobile iOS and tvOS devices.
By initializing the iOS SDK in your app, you gain access to useful methods you can call in your app’s code to send events and user data to mParticle.
In order to begin sending data from your app to mParticle, you need access to an mParticle account and an API key.
This tutorial demonstrates how mParticle works using The Higgs Shop, a sample iOS application written in theSwiftprogramming language.
Open your terminal or command prompt, and clone the iOSsample app repositoryon GitHub.
Open the sample app in Xcode
If you don’t already haveXcodeinstalled on your computer, download and install the correction version for your OS now.
Navigate to your cloned directory of the iOS sample app and openHiggsShopSampleApp.xcodeprojin Xcode.
Click theRunicon in the toolbar to ensure that you can successfully build the sample app.
For now, ignore the API key warning that appears. In the next step, you will create and add your API key and secret before restarting the sample app.
Learn how to integrate the iOS SDK from start to finish
Open the sample app in Xcode
Do Not Sell or Share My Personal Data
These cookies are necessary for the website to function and cannot be switched off in our systems. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.
Share Or Sale of Personal Data
Under the CPRA, you have the right to opt-out of the sale or sharing of your personal information to third parties. These cookies collect information for analytics and to personalize your experience with targeted ads. You may exercise your right to opt out of the sale or sharing of personal information by using this toggle switch. If you opt out we will not be able to offer you personalized ads and will not hand over your personal information to any third parties. Additionally, you may contact our legal department for further clarification about your rights as a California consumer by using this Exercise My Rights link.If you have enabled privacy controls on your browser (such as a plugin), we have to take that as a valid request to opt-out. Therefore we would not be able to track your activity through the web. This may affect our ability to personalize ads according to your preferences.
Targeting CookiesSwitch LabellabelThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
These cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
Performance CookiesSwitch LabellabelThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
Data Subject Request API Version 1 and 2
Data Subject Request API Version 3
Preventing Blocked HTTP Traffic with CNAME
Preventing Blocked HTTP Traffic with CNAME
Web SDK via Google Tag Manager
Preventing Blocked HTTP Traffic with CNAME
Upgrade to Version 2 of the SDK
Step 3. Set up your output
Step 8. Create a data plan
Step 9. Test your local app
Step 3. Set up your output
Step 8. Create a data plan
Step 3. Set up your output
Step 8. Create a data plan
Migrate from Segment to Client-side mParticle
Migrate from Segment to Server-side mParticle
The Developer's Guided Journey to mParticle
Download an audience from a journey
Audience A/B testing from a journey
Create a Next Best Action (NBA)
Activate Next Best Actions in Campaigns
Usage metering for value-based pricing (VBP)
Sync and Activate Analytics User Segments in mParticle
Apply All for Filter Where Clauses
Date Range and Time Settings Overview
Cumulative vs. Non-Cumulative Analysis in Segmentation
Total Count of vs. Users Who Performed
Time and Interval Settings in Dashboards
Optimize User Flow with A/B Testing
AWS Redshift (Define Your Own Schema)
AWS S3 Integration (Define Your Own Schema)
mParticle aims to allow our customers to send their data wherever they want it to go, and we integrate with many services across the mobile-app ecosystem in order to achieve that. mParticle Firehose is an API that lets anybody become one of our integration partners. We support two basic types of Firehose integration:
Leveraging Amazon AWS’sLambda platform, mParticle can send your “lambda function” data as it comes into our system so that your function can then forward it along to your own API.
mParticle can forward data to an HTTP endpoint you provide. This gives you the freedom to set up your integration however you like, leveraging your existing architecture.
The Firehose Java SDK can be used for either integration type.
Releases of this library are compiled usingJDK 1.8- any project using this library must also be compiled usingJDK 1.8.
mParticle deploys the Java SDK to Maven Central as thecom.mparticle:java-sdkartifact:
Publish to a local Maven repo
Rather than using Maven Central, you can also publish the library to your local Maven server by cloning this repo and invoking the following:
You can clone this project and build the jar manually to include in your project’s classpath:
We also make the latest jar binaries available in the releases section of this repository.
In order to create a Lambda function compatible with mParticle Firehose you’ll be creating a Lambda function just like any other, and then using the Java library in this repository to parse and facilitate communication in between mParticle and your function.
mParticle has created a sample project to get you started quicker, but it may also be useful to read an overview on AWS Lambda here:http://docs.aws.amazon.com/lambda/latest/dg/java-gs.html
In order to get started quicker, you can clone the sample project located here:
The sample project takes care of the basics of creating a lambda function for you. Most importantly it includes a class that implements theRequestStreamHandlerinterface of theAmazon AWS lambda SDK. When data is received by theRequestStreamHandler, it’s deserialized by the mParticle Java SDK into POJOs to be used by you, as in the following snippet:
/**
 * Sample AWS Lambda Endpoint
 */publicclassSampleLambdaEndpointimplementsRequestStreamHandler{MessageSerializerserializer=newMessageSerializer();//mParticle class for deserialization@OverridepublicvoidhandleRequest(InputStreaminput,OutputStreamoutput,Contextcontext)throwsIOException{SampleExtensionprocessor=newSampleExtension();//you will implement this class in a later stepMessagerequest=serializer.deserialize(input,Message.class);Messageresponse=processor.processMessage(request);//request is processed by you hereserializer.serialize(output,response);}}
/**
 * Sample AWS Lambda Endpoint
 */publicclassSampleLambdaEndpointimplementsRequestStreamHandler{MessageSerializerserializer=newMessageSerializer();//mParticle class for deserialization@OverridepublicvoidhandleRequest(InputStreaminput,OutputStreamoutput,Contextcontext)throwsIOException{SampleExtensionprocessor=newSampleExtension();//you will implement this class in a later stepMessagerequest=serializer.deserialize(input,Message.class);Messageresponse=processor.processMessage(request);//request is processed by you hereserializer.serialize(output,response);}}
In the example above, incoming data is deserialized to aMessageobject, and passed in toSampleExtension.SampleExtensionis any class that extends the mParticle Java SDK’sMessageProcessor- which you will implement. This will serve as the entry point to all of your logic and ultimately, the 3rd-party service to which you’re integrating.
The baseMessageProcessorimplementation is responsible for parsing incomingMessageobjects.MessageProcessorcontains several abstract and empty method implementations responsible for processingMessageobjects which you will override and implement. Currently, the types of messages are:
Audience Membership Subscription Request and Response
To get started creating yourMessageProcessor, if you’re using thesample project, open and editSampleExtension.java. Otherwise, create a class that extendscom.mparticle.sdk.MessageProcessor.
All response messages must contain anidelement, which contains a guid, and can be the same id sent in the request.
To process the module registration message, override theprocessRegistrationRequestmethod in yourMessageProcessor. From this method you must return aModuleRegistrationResponsedescribing what your integration can do and what it requires to contact your service, such as an API key.
The details of the registration response are outlined below. For a full example of a response object,see the registration response example.
1. Creating yourModuleRegistrationResponseand Describing your Service
mParticle users will see the result of your module registration response in our Integrations directory. You should set a human-readable title for your service (such as your company’s name), as well as a short description of your company including a link to your company’s website with optional tracking parameters. Your description must be less than 230 characters.
This information will be also shown on the mParticledocumentationandmarketingsites.
Override theprocessRegistrationRequestmethod in yourMessageProcessorand add the following code, customized for your service:
ModuleRegistrationResponseresponse=newModuleRegistrationResponse("My Company Name","1.0");response.setDescription("<a href=\"http://www.mycompany.com?utm_source=mparticle\" target=\"_blank\">My Company</a> empowers brands to meaningfully engage their customers by leveraging data insights. With My Company's help, brands can personalize and cultivate their customer experience.\"");
ModuleRegistrationResponseresponse=newModuleRegistrationResponse("My Company Name","1.0");response.setDescription("<a href=\"http://www.mycompany.com?utm_source=mparticle\" target=\"_blank\">My Company</a> empowers brands to meaningfully engage their customers by leveraging data insights. With My Company's help, brands can personalize and cultivate their customer experience.\"");
All users and data in the mParticle platform are associated with a set of device IDs (such as an Apple IDFA), a set of user IDs (such as Email), and a set of partner-specific IDs. Event data and audience data received by your integration will always be associated with a user, but your integration must register for permission to receive each ID.
If you mark any of these IDs asrequired, only users and their associated data thatcontain at least 1of these IDs will be sent to your integration.
You can also easily configure that mParticle hash each of these identities in the outgoing payload, using theencodingfield. Supported encoding types:RAW,MD5,SHA1, andSHA256, and all hashed values are lowercased before hashing.
Partner IDs are unique identifiers associated with a user, but specific to a partner system. They can be ingested by mParticle via Partner Feed or S2S, and can be sent to downstream connections associated with the given partner (including a Firehose integration). In order for this to occur, the Partner’s uniqueidentity type nameneeds to be pre-registered with mParticle, which can be accomplished by simply adding a permission for it.
Currently, only asinglePartner ID permission can be registered. Similarly, the namecannot be changed or removedonce registered.
The naming convention for these identities is as follows:PartnerName_IdentityName.
An example for mParticle could be:mParticle_mpid
Cookie Sync IDs are special Partner IDs that pertain to individual users, and are associated with mParticle Cookie Sync Integrations. If your organization has both a Cookie Sync and Firehose integration with mParticle, you can also configure your Firehose integration’s incoming traffic to include this ID — just as you would for a general Partner ID.
In order to register a Cookie Sync ID, add a Partner ID permission with"type": "$cookie_sync_id"
Device Application Stamp is a UUIDv4-formatted string generated by mParticle for each device.
The mParticle ID is a unique identifier for a user profile in mParticle.
Location, IP Address and User Agent Header
All mParticle event data can also be associated with location information, and your Firehose integration requires special permissions to access it. Depending on the app and how it has used the mParticle SDK, location information may originate from the device sensors or may be determined, to varying degrees of accuracy, by using reverse IP lookup. If your service needs access to location, you must request access by setting the following:
Data can be sent into the mParticle platform via one of our native or web SDKs, as well as our Events APIs, and will have an associated IP address and HTTP user agent header of the originating client. If your service needs access to the IP address, you must request access by setting the following:
See the example below orthe javadocsfor more information on populating thePermissionsobject in yourModuleRegistrationResponseresponse.
mParticle data can contain information about the device being used, including device name, OS Version, and carrier information. By default, this information will not be forwarded to your integration. You can request access to device information with the following:
For a full list of possible device information, see ourJSON reference. Note that even if you don’t set this permission, the Device Identities you registered forabovewill still be forwarded.
mParticle data can include a dictionary of custom user attributes containing information about the user. By default, this information will not be forwarded to your integration. You can request access to user attributes with the following:
This permission is also required to receive User Attribute Change events.
mParticle can include user attributes with audience membership change messages as well as event data. You can request access to audience user attributes with the following:
mParticle allows clients to record consent for data collection from their users. By default, this information will not be forwarded to your integration. You can request access to the user’s consent state by setting:
If enabled, the current consent state will be forwarded for users at the time of the event.
To learn more about the consent state object, reference the following:
mParticle allows batches that do not contain any events or system notifications. By default, these batches will not be forwarded to your integration. You can request access to these eventless batches by setting:
mParticle data can include information about the platform that generated the events with each EventProcessingRequest.
By default, the above platform fields will not be forwarded to your integration. You can request access to them by setting:
You need to select which platforms you want your integration to receive data from. mParticle’s Firehose forwarder allows you to receive data from the following platforms:
See the example below orthe javadocsfor more information on populating thePermissionsobject in yourModuleRegistrationResponseresponse.
There are two fields inIosRuntimeEnvironmentandTVOSRuntimeEnvironmentto support App Tracking Transparency policy. Learn more about Apple’s App Tracking Transparency in ouriOS 14 Guide.:
Once we enable your Firehose integration, all mParticle customers will have access to enable it for their account. To allow your integration to correctly identify which customer your data belongs to, and how it should be processed, mParticle enables you to create custom settings for the customer to provide when they set up the account. For example, if your service uses anAPI Keyfor authentication:
Your integration must include an account setting representing the API Key  (marking it asrequired and confidential) in theModuleRegistrationResponse.
When customers configure your integration through mParticle, they will see the API Key setting in a dialogue, and will need to enter their API Key in order to enable the integration.
When customers configure your integration through mParticle, they will see the API Key setting in a dialogue, and will need to enter their API Key in order to enable the integration.
Once enabled, mParticle will send data to your integration, including the value of the API Key associated with that customer.
Your integration can then use that API Key to make authenticated calls to your API or service.
Settings need to be registered individually for Event, Audience and DSR-based integrations. Each setting will appear in the mParticle UI (unless marked as not-visible), and must contain the following:
ID - you will use this in step4above to extract the setting value.
Name - A short, human-readable name which will be shown in the mParticle platform
Description - A description of the setting in the context of your service. This is used as the tooltip in the mParticle platform and so should be kept relatively short. Please refrain from including markdown or external links in these descriptions.
Data Type - The data type of the setting.
Required flag - if true, mutual customers will be required to enter a value for this setting to configure the integration
Confidential flag - if true, the value entered will be masked in the mParticle UI once set
See the following code snippet, the full example below, or theJavadocsfor more on the various types of settings and properties of settings.
List<Setting>eventSettings=newArrayList<>();SettingapiKey=newTextSetting("apiKey","API Key").setIsRequired(true).setIsConfidential(true).setDescription("Your API Key issued by <insert company here>.");eventSettings.add(apiKey);eventProcessingRegistration.setAccountSettings(eventSettings);List<Setting>audienceSettings=newArrayList<>();audienceSettings.add(apiKey);audienceProcessingRegistration.setAccountSettings(audienceSettings);List<Setting>dsrSettings=newArrayList<>();dsrSettings.add(apiKey);dsrProcessingRegistration.setAccountSettings(dsrSettings);
List<Setting>eventSettings=newArrayList<>();SettingapiKey=newTextSetting("apiKey","API Key").setIsRequired(true).setIsConfidential(true).setDescription("Your API Key issued by <insert company here>.");eventSettings.add(apiKey);eventProcessingRegistration.setAccountSettings(eventSettings);List<Setting>audienceSettings=newArrayList<>();audienceSettings.add(apiKey);audienceProcessingRegistration.setAccountSettings(audienceSettings);List<Setting>dsrSettings=newArrayList<>();dsrSettings.add(apiKey);dsrProcessingRegistration.setAccountSettings(dsrSettings);
Authentication can be set for yourEvent Registrationand/orAudience Registration.DSR Registrationdoes not currently support authentication setup. These settings allow customers to add authentication when configuring your integration in mParticle. Currently, we support OAuth2 authentication, which gets the Access Token and forwards it in requests to your integration. While OAuth2 is a standard protocol, its implementation can differ by identity provider so some parameters may be optional. Depending on the OAuth2 provider, you must include the relevant parameters.
BEARERThe Bearer Token is a security scheme to send the token with the following structureAuthorization: Bearer <token>.
CUSTOM_HEADERThe Custom Header type will use a custom HTTP Header to send the access token. The name of the header needs to be specified in theCustom Header Nameproperty.
If you’re writing an integration that can handle event and analytics data, you’ll specify that your service supports certain types of events in yourModuleRegistrationResponse. This means you will only receive data when those events occur. The possible event types are:
Note that to receive User Attribute Change events, you must also register the Allow User Attributespermission. Similarly, for User Identity Change events, you will only receive events for the identities you have setpermissionsto receive.
See here for brief descriptions of each event type.
System Notifications are used to communicate changes to a user. Currently, the available System Notifications are:
Note that System Notifications related to Consent States describe changes to the consent state. As such, they each contain both theoldand thenewconsent states.
These notifications are different from the actualConsent Stateobject.
This setting lets mParticle know if historical events can be sent to your integration.  The default is24hours, however if your platform can receive and process older data, you can set this to a higher value, or to-1to process all data.
If you have registered for Push Message Receipt events, you must provide the Provider ID key used in the payload of your platform’s Push messages. This ensures that you only receive events related to Push messages from your platform. Work with mParticle to ensure you are providing the correct Provider ID.
Audience Registration will allow your integration to receive Audience Subscription and Membership messages. During registration, your integration needs to specify the settings required to map and send audience data from mParticle to your service:
Account Settingsare required, user-modifiable settings for your integration.
Audience Subscription Settings are optional, audience-specific settings such as an audience ID from your service. These settings can be set manually by the user or can be set programatically.
To allow users to set and modify a subscription setting value, mark the subscription setting as visible. The user will be prompted to enter a value when connecting an audience, and you will see this value in youraudience subscription requestsandaudience membership change requests.
To set a subscription setting value programmatically, mark a subscription setting as not visible. You will set the value after a user connects an audience as part of your audience subscriptionresponse. Subsequent membership change requests will contain the returned value.
Audience Subscription Settings can be included in your module registration response as shownhere.
These settings allow you to enable bulk forwarding, which is supported by audience integrations. The following are the two settings that you can configure:
Bulk Forward Wait For Messages: This setting determines the number of messages that mParticle will wait to see before forwarding them to the integration. Please note that this is not the exact number of messages that mParticle will send, since there could be a greater number of messages collected at the moment this validation is executed on mParticle side.
Bulk Forward Wait In Minutes: This setting determines the amount of time (in minutes) that mParticle will wait before trying to forward messages.
It is important to note that these settings are not dependent on each other, so you can set one or the other, or both. If one of the settings is not set, mParticle will use a default value for that specific setting. For Bulk Forward Wait For Messages, the default and minimum value is 2000 messages. For Bulk Forward Wait In Minutes, the default value is 12 hours (720 minutes) and the minimum value is 30 minutes.
DSR Registration will allow the integration to receive Data Subject Request (DSR) erasure requests. In order for Firehose partners to opt-in to DSR support, aDSR Processing Registrationshould be specified with the following information:
Account Settingsshould be specified with any required setting information that will be needed to complete the DSR API request.
Permissionshould have at least 1 DSR Supported Identity Types. For more information on DSR Supported Identity Types, gohere.
Domainshould be defined inDsrRegistration, It is used to make Callback requests. For more information on Callbacks, gohere.
TheDSR Processing Request Typeis required. Currently, the only supported request type isErasure.
Refer to the sample project or the simple example below, which shows how to subscribe for Event Processing, Audience and DSR Processing:
@OverridepublicModuleRegistrationResponseprocessRegistrationRequest(ModuleRegistrationRequestrequest){// Set the permissions, including the identities that this service can have access toPermissionspermissions=newPermissions();permissions.setAllowAccessLocation(false).setAllowAccessIpAddress(false).setAllowAccessMpid(true).setAllowAccessDeviceApplicationStamp(false).setAllowConsentState(true).setDeviceIdentities(Arrays.asList(newDeviceIdentityPermission(DeviceIdentity.Type.IOS_ADVERTISING_ID,Identity.Encoding.RAW,true),newDeviceIdentityPermission(DeviceIdentity.Type.GOOGLE_ADVERTISING_ID,Identity.Encoding.RAW,true))).setUserIdentities(Arrays.asList(newUserIdentityPermission(UserIdentity.Type.EMAIL,Identity.Encoding.RAW),newUserIdentityPermission(UserIdentity.Type.CUSTOMER,Identity.Encoding.RAW))).setPartnerIdentities(Collections.singletonList(newPartnerIdentityPermission("[partner name]_[id name]",Identity.Encoding.RAW,false)));// The extension needs to define the settings it needs in order to connect to its respective service(s).// You can use different settings for Event Processing, Audience Processing or DSR Processing, but in this case// we'll just use the same object, specifying that only an API key is required for each.List<Setting>settings=Arrays.asList(newTextSetting("apiKey","API Key").setIsRequired(true).setIsConfidential(true).setDescription("Your API key issued by <insert company here>."));// Specify the supported event types. You should override the parent MessageProcessor methods// that correlate to each of these event types.List<Event.Type>supportedEventTypes=Arrays.asList(Event.Type.CUSTOM_EVENT,Event.Type.PROMOTION_ACTION,Event.Type.PRODUCT_ACTION);// This extension only supports event data coming from Android and iOS devicesList<RuntimeEnvironment.Type>environments=Arrays.asList(RuntimeEnvironment.Type.ANDROID,RuntimeEnvironment.Type.IOS);// Set the Event Registration by using all of the aboveEventProcessingRegistrationeventRegistration=newEventProcessingRegistration();OAuth2AuthenticationeventAuthentication=newOAuth2Authentication();eventAuthentication.setAuthorizationUrl("Authorization URL").setRefreshUrl("Refresh URL").setTokenUrl("Token URL").setGrantType(OAuth2Authentication.GrantType.AUTHORIZATION_CODE).setDefaultExpiresIn(2000).setClientId("Client ID").setAccessTokenType(OAuth2Authentication.AccessTokenType.CUSTOM_HEADER).setCustomHeaderName("Custom Header Name").setParamClientIdName("Param Client ID Name").setParamSecretName("Param Secret Name").setScopes(newScopeDetail[]{newScopeDetail().setName("Scope Name").setDescription("Scope Description")});eventRegistration.setMaxDataAgeHours(24).setSupportedRuntimeEnvironments(environments).setSupportedEventTypes(supportedEventTypes).setAccountSettings(settings).setAuthentication(eventAuthentication);// Set the audience subscription settingsList<Setting>subscriptionSettings=Arrays.asList(newIntegerSetting(SETTING_MAILING_LIST_ID,"Mailing List ID"),newIntegerSetting(SETTING_INTERNAL_LIST_ID,"Internal ID").setIsVisible(false));// Set up Audience Registration.AudienceProcessingRegistrationaudienceRegistration=newAudienceProcessingRegistration();OAuth2AuthenticationaudienceAuthentication=newOAuth2Authentication();audienceAuthentication.setAuthorizationUrl("Authorization URL").setRefreshUrl("Refresh URL").setTokenUrl("Token URL").setGrantType(OAuth2Authentication.GrantType.AUTHORIZATION_CODE).setDefaultExpiresIn(2000).setClientId("Client ID").setAccessTokenType(OAuth2Authentication.AccessTokenType.CUSTOM_HEADER).setCustomHeaderName("Custom Header Name").setParamClientIdName("Param Client ID Name").setParamSecretName("Param Secret Name").setScopes(newScopeDetail[]{newScopeDetail().setName("Scope Name").setDescription("Scope Description")});// Segmentation/Audience registration and processing is treated separately from Event processing.// Audience integrations are configured separately in the mParticle UI.// Customers can configure a different set of account-level settings (such as API key here), and// Segment-level settings (Mailing List ID here).audienceRegistration.setAudienceConnectionSettings(subscriptionSettings).setAccountSettings(settings).setAuthentication(audienceAuthentication);// Specify the supported DSR request types.List<DsrProcessingRequest.Type>supportedDsrTypes=Arrays.asList(DsrProcessingRequest.Type.Erasure);// Set up DSR RegistrationDsrProcessingRegistrationdsrRegistration=newDsrProcessingRegistration();dsrRegistration.setAccountSettings(settings).setDomain("yourdomain.com").setSupportedDsrTypes(supportedDsrTypes);// Set the responseModuleRegistrationResponseresponse=newModuleRegistrationResponse("Your Company Name","1.0");response.setDescription("A description of your <a href=''>company</a> and services. Inline HTML markup is permitted.").setEventProcessingRegistration(eventRegistration).setAudienceProcessingRegistration(audienceRegistration).setDsrProcessingRegistration(dsrRegistration).setPermissions(permissions);returnresponse;}
@OverridepublicModuleRegistrationResponseprocessRegistrationRequest(ModuleRegistrationRequestrequest){// Set the permissions, including the identities that this service can have access toPermissionspermissions=newPermissions();permissions.setAllowAccessLocation(false).setAllowAccessIpAddress(false).setAllowAccessMpid(true).setAllowAccessDeviceApplicationStamp(false).setAllowConsentState(true).setDeviceIdentities(Arrays.asList(newDeviceIdentityPermission(DeviceIdentity.Type.IOS_ADVERTISING_ID,Identity.Encoding.RAW,true),newDeviceIdentityPermission(DeviceIdentity.Type.GOOGLE_ADVERTISING_ID,Identity.Encoding.RAW,true))).setUserIdentities(Arrays.asList(newUserIdentityPermission(UserIdentity.Type.EMAIL,Identity.Encoding.RAW),newUserIdentityPermission(UserIdentity.Type.CUSTOMER,Identity.Encoding.RAW))).setPartnerIdentities(Collections.singletonList(newPartnerIdentityPermission("[partner name]_[id name]",Identity.Encoding.RAW,false)));// The extension needs to define the settings it needs in order to connect to its respective service(s).// You can use different settings for Event Processing, Audience Processing or DSR Processing, but in this case// we'll just use the same object, specifying that only an API key is required for each.List<Setting>settings=Arrays.asList(newTextSetting("apiKey","API Key").setIsRequired(true).setIsConfidential(true).setDescription("Your API key issued by <insert company here>."));// Specify the supported event types. You should override the parent MessageProcessor methods// that correlate to each of these event types.List<Event.Type>supportedEventTypes=Arrays.asList(Event.Type.CUSTOM_EVENT,Event.Type.PROMOTION_ACTION,Event.Type.PRODUCT_ACTION);// This extension only supports event data coming from Android and iOS devicesList<RuntimeEnvironment.Type>environments=Arrays.asList(RuntimeEnvironment.Type.ANDROID,RuntimeEnvironment.Type.IOS);// Set the Event Registration by using all of the aboveEventProcessingRegistrationeventRegistration=newEventProcessingRegistration();OAuth2AuthenticationeventAuthentication=newOAuth2Authentication();eventAuthentication.setAuthorizationUrl("Authorization URL").setRefreshUrl("Refresh URL").setTokenUrl("Token URL").setGrantType(OAuth2Authentication.GrantType.AUTHORIZATION_CODE).setDefaultExpiresIn(2000).setClientId("Client ID").setAccessTokenType(OAuth2Authentication.AccessTokenType.CUSTOM_HEADER).setCustomHeaderName("Custom Header Name").setParamClientIdName("Param Client ID Name").setParamSecretName("Param Secret Name").setScopes(newScopeDetail[]{newScopeDetail().setName("Scope Name").setDescription("Scope Description")});eventRegistration.setMaxDataAgeHours(24).setSupportedRuntimeEnvironments(environments).setSupportedEventTypes(supportedEventTypes).setAccountSettings(settings).setAuthentication(eventAuthentication);// Set the audience subscription settingsList<Setting>subscriptionSettings=Arrays.asList(newIntegerSetting(SETTING_MAILING_LIST_ID,"Mailing List ID"),newIntegerSetting(SETTING_INTERNAL_LIST_ID,"Internal ID").setIsVisible(false));// Set up Audience Registration.AudienceProcessingRegistrationaudienceRegistration=newAudienceProcessingRegistration();OAuth2AuthenticationaudienceAuthentication=newOAuth2Authentication();audienceAuthentication.setAuthorizationUrl("Authorization URL").setRefreshUrl("Refresh URL").setTokenUrl("Token URL").setGrantType(OAuth2Authentication.GrantType.AUTHORIZATION_CODE).setDefaultExpiresIn(2000).setClientId("Client ID").setAccessTokenType(OAuth2Authentication.AccessTokenType.CUSTOM_HEADER).setCustomHeaderName("Custom Header Name").setParamClientIdName("Param Client ID Name").setParamSecretName("Param Secret Name").setScopes(newScopeDetail[]{newScopeDetail().setName("Scope Name").setDescription("Scope Description")});// Segmentation/Audience registration and processing is treated separately from Event processing.// Audience integrations are configured separately in the mParticle UI.// Customers can configure a different set of account-level settings (such as API key here), and// Segment-level settings (Mailing List ID here).audienceRegistration.setAudienceConnectionSettings(subscriptionSettings).setAccountSettings(settings).setAuthentication(audienceAuthentication);// Specify the supported DSR request types.List<DsrProcessingRequest.Type>supportedDsrTypes=Arrays.asList(DsrProcessingRequest.Type.Erasure);// Set up DSR RegistrationDsrProcessingRegistrationdsrRegistration=newDsrProcessingRegistration();dsrRegistration.setAccountSettings(settings).setDomain("yourdomain.com").setSupportedDsrTypes(supportedDsrTypes);// Set the responseModuleRegistrationResponseresponse=newModuleRegistrationResponse("Your Company Name","1.0");response.setDescription("A description of your <a href=''>company</a> and services. Inline HTML markup is permitted.").setEventProcessingRegistration(eventRegistration).setAudienceProcessingRegistration(audienceRegistration).setDsrProcessingRegistration(dsrRegistration).setPermissions(permissions);returnresponse;}
Once you have completed the implementation of your registration, you must send the result to mParticle for verification. Seetestingfor more information.
mParticle customers send batches of events to the mParticle platform via the mParticle SDKs (iOS, Android, Javascript, etc), direct Events data or feeds. mParticle can forward these event batches to your integration. The baseMessageProcessorimplementation is designed to handle these incoming batches of events, and appropriately iterate over each different event, providing you with convenient hooks in which to handle each distinct event type.
In order to process these events, you’ll override (in yourMessageProcessorsubclass) the appropriate method given the event types that you registered for duringmodule registration.
Each event hook method is given an object that contains the event itself as well as information about the user, device, and application that fired the event.
See here for more on theEventobject from which all other events inherit.
The following table shows the correlation between each type and overridable method:
To ensure a continuous connection with your integration, mParticle will periodically send event processing requests, even if there are no new events to send. Your integration must be able to accept an empty events array and return a standardevent processing response.
Custom flags will be sent to your integration when available for supported event types when the custom flag key prefix matches your integration’s module name. For more information, see theCustom Flags JSON reference.
The audience subscription event tells your integration when a new audience has been created, removed, and/or updated in the mParticle platform. The response allows you to set additional subscription settings that will be stored together with the subscription and sent back with audience membership changes. All subscription settings must be declared duringmodule registration.
See here for more infoon theAudienceSubscriptionRequestobject that you’ll be given to parse the event.
The audience membership change event tells your integration whenever users are added or removed from a given audience. If you have setpermissions.setAllowAudienceUserAttributeSharing(true), each audience will also include any user attributes the customer has shared.
See here for more infoon theAudienceMembershipChangeRequestobject that you’ll be given to parse the event.
To ensure a continuous connection with your integration, mParticle will periodically send audience membership change requests, even if there are no new changes in audience membership. Your integration must be able to accept an empty audience membership change request (a request with no “user_profiles” fields, as shown below) and return a standardaudience membership change response. If a user’s configuration should befaulteddue to a non-transient error (an expired API token, for example), you can setsuspend_subscriptiontotruein the response. This will stop mParticle from sending requests until the user resumes the configuration.
mParticle supports the forwarding of Data Subject Requests (DSRs) for deletion of user data downstream, complying with both the General Data Protection Regulation (GDPR) and the California Consumer Privacy Act (CCPA). Note, once a request is forwarded downstream, mParticle is not liable for data deletion for any configured partners. Results will be explicitly indicated in our UI. To learn more about mParticle’s DSR support, gohere.
To process the DSR request, at least one supported identity type must be present in the request.
See here for more infoon theDsrProcessingRequestthat the integration will receive.
mParticle’s DSR implementation currently only handles theErasurerequest type.
The identity types supported for DSR integrations are:
Prior to deployment, please send mParticle the JSON result of your registration response. There are several ways to easily acquire the JSON:
Unit tests in the sample project
The latest Firehose Sample integration includes a unit test which will output the result of your registration function. See theSample Firehose Integration READMEfor more information. This is the quickest way to verify the contents of your module registration.
Manually send in a registration request via the AWS console
If you’re unable to run the unit tests, you may also deploy your function to AWS and then use this sample JSON (also available here) as a test event within the AWS console:
In order to ensure that your lambda function works correctly, we recommend unit testing prior to deployment. Unit testing is quicker and easier than manually sending in JSON to your lambda function via AWS.
Reference the sample project for how to perform unit testing
Reference the Iterable lambda-function for a real life example of a unit-tested project
You can send JSON messages manually into your lambda function via the AWS-lambda console.
See here for sample JSON that you can use.
Once you’ve completed development and feel you’ve sufficiently tested your integration, the next step is to register and add it to the mParticle platform. This is a multistep process:
Step 1 (AWS Lambda) - Grant Permissions
You will need to grant mParticle permissions to call your lambda function. Using the Amazon CLI tool, execute the commands below, altering them for your environment:
change the--function-nameargument (arn:aws:lambda:us-east-1:123456789:function:myLambdaFunction:production) to the full ARN of your lambda function. This can be found by navigating to yourAWS Lambda consoleand selecting your lambda function.
you should be using an alias for your lambda function to allow for additional development and testing while your integration is live. In the commands below, be sure to append your production alias name to your lambda-function’s ARN. The examples below use an alias named “production”.See here for more information on Aliases.
statement-idmust be unique - if you receive an error stating that the providedstatement-idalready exists, increment the statement-id(s) to a higher value.
aws lambda add-permission \
--region us-east-1 \
--function-name arn:aws:lambda:us-east-1:123456789:function:myLambdaFunction:production \
--statement-id 1 \
--principal 338661164609 \
--action lambda:InvokeFunction
aws lambda add-permission \
--region us-east-1 \
--function-name arn:aws:lambda:us-east-1:123456789:function:myLambdaFunction:production \
--statement-id 1 \
--principal 338661164609 \
--action lambda:InvokeFunction
aws lambda add-permission \
--region us-east-1 \
--function-name arn:aws:lambda:us-east-1:123456789:function:myLambdaFunction:production \
--statement-id 2 \
--principal 457804467337 \
--action lambda:InvokeFunction
aws lambda add-permission \
--region us-east-1 \
--function-name arn:aws:lambda:us-east-1:123456789:function:myLambdaFunction:production \
--statement-id 2 \
--principal 457804467337 \
--action lambda:InvokeFunction
Step 1 (HTTP) - Expose endpoint
For HTTP integrations, your endpoint must be able to receive HTTP requests.
Step 2 - Notify mParticle and send logo
Once permissions have been granted, mParticle will use an internal tool to send a registration request to your integration. We will work with you to ensure that your registration response looks correct and that it includes what’s necessary for your service.
mParticle requires ahigh-resolutionlogo to represent your service in our dashboard. The logo must:
be easily readable when set on top of a white or light-colored page
Provide mParticle with credentials for the required fields from your registration response for testing configuration.
Step 3 - Final testing and release
Once your integration has been registered and added to the mParticle platform, we will work with you to perform final testing prior to making your service available to all mParticle customers.
mParticle servers will stream data to your function at the same rate at which it is received. By default, AWS lambda allows for 100 concurrent executions of your function. If your lambda function reaches this limit, mParticle will continually retry requests with a back-off until they have succeeded.If you are expecting a large customer integration, it is recommended that you request a higher limit by opening a case with AWS Support.
See here for more information on AWS rate limiting and how to increase your limit.
Keep this in mind as you’re developing your lambda function as it may determine how it should process and to which of your APIs you should send data. Data rate and volume will depend on:
The size of the customer that has enabled your integration.
The amount of/types of data for which you register.
If you’ve registered to receive Audience data, the volatility and size of a given customer’s audiences.
For HTTP Integrations, you will need to have infrastructure in place to support a high volume of data.
1. Creating your ModuleRegistrationResponse and Describing your Service
Step 1 (AWS Lambda) - Grant Permissions
Step 1 (HTTP) - Expose endpoint
Step 2 - Notify mParticle and send logo
Step 3 - Final testing and release
Do Not Sell or Share My Personal Data
These cookies are necessary for the website to function and cannot be switched off in our systems. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.
Share Or Sale of Personal Data
Under the CPRA, you have the right to opt-out of the sale or sharing of your personal information to third parties. These cookies collect information for analytics and to personalize your experience with targeted ads. You may exercise your right to opt out of the sale or sharing of personal information by using this toggle switch. If you opt out we will not be able to offer you personalized ads and will not hand over your personal information to any third parties. Additionally, you may contact our legal department for further clarification about your rights as a California consumer by using this Exercise My Rights link.If you have enabled privacy controls on your browser (such as a plugin), we have to take that as a valid request to opt-out. Therefore we would not be able to track your activity through the web. This may affect our ability to personalize ads according to your preferences.
Targeting CookiesSwitch LabellabelThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
These cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
Performance CookiesSwitch LabellabelThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
Data Subject Request API Version 1 and 2
Data Subject Request API Version 3
Preventing Blocked HTTP Traffic with CNAME
Preventing Blocked HTTP Traffic with CNAME
Web SDK via Google Tag Manager
Preventing Blocked HTTP Traffic with CNAME
Upgrade to Version 2 of the SDK
Step 3. Set up your output
Step 8. Create a data plan
Step 9. Test your local app
Step 3. Set up your output
Step 8. Create a data plan
Step 3. Set up your output
Step 8. Create a data plan
Migrate from Segment to Client-side mParticle
Migrate from Segment to Server-side mParticle
The Developer's Guided Journey to mParticle
Download an audience from a journey
Audience A/B testing from a journey
Create a Next Best Action (NBA)
Activate Next Best Actions in Campaigns
Usage metering for value-based pricing (VBP)
Sync and Activate Analytics User Segments in mParticle
Apply All for Filter Where Clauses
Date Range and Time Settings Overview
Cumulative vs. Non-Cumulative Analysis in Segmentation
Total Count of vs. Users Who Performed
Time and Interval Settings in Dashboards
Optimize User Flow with A/B Testing
AWS Redshift (Define Your Own Schema)
AWS S3 Integration (Define Your Own Schema)
mParticle allows you to define sophisticated, intelligent segments and deliver personalized experiences using both rules-based and predictive capabilities. Our machine learning engine analyzes user behavior patterns to help you identify and reach users most likely to take desired actions.
You can define audiences using any user-associated data captured with mParticle, whether from platform inputs or partner feeds, and enhance them with predictive insights.
When you fully instrument your app using the mParticle SDK, you send data from apps to the mParticle platform. This data feeds both traditional segmentation and our predictive models. You can also enrich that data stream with other sources like CRM data or purchase data from other channels. Comprehensive data capture improves both immediate segmentation and predictive accuracy.
Use audiences to create sophisticated segments powered by both rules and machine learning.
Drive User Engagement Through Intelligent Segmentation
Let’s say you want to target users who installed your app to increase their engagement. There are two approaches to accomplishing this using Audiences:
Rules-based:Taking this strategy, you would use audience criteria to build a customer segment that aligns with your target characteristics, like users who installed your app in the last 72 hours with fewer than three sessions.
AI-powered:Using a predictive approach, you could simply define your business goal, then let Predictive Attributes to perform a comprehensive analysis of user data to predict which new users are most likely to take the engagement action you have defined. Once the Predictive Attribute has been generated, you could use it as an audience criteria to select users who are statistically most likely to engage with your app.
No matter which approach you take, you can easily forward your audience to push notification and email partners.  Once these audience connections are established, mParticle instantiates a corresponding audiences both partners.  No coding is necessary.
Let’s say you want to find more users like your currently highly engaged users and run an app download campaign in Facebook against that target audience. You start by defining your highly engaged users, using whatever criteria is important to you: lifetime value metrics, session activity, event activity, or any other data points you capture.
Once your audience is defined, configure the Facebook integration and corresponding custom audiences in your Facebook account.  From there you can leverage the custom audiences like any other custom audience in Facebook.
Because we want to target users that look like our highly engaged users, we will create a Facebook lookalike audience from our highly engaged user audience and run a Facebook app install campaign that targets that lookalike audience.
Drive User Engagement Through Intelligent Segmentation
Do Not Sell or Share My Personal Data
These cookies are necessary for the website to function and cannot be switched off in our systems. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.
Share Or Sale of Personal Data
Under the CPRA, you have the right to opt-out of the sale or sharing of your personal information to third parties. These cookies collect information for analytics and to personalize your experience with targeted ads. You may exercise your right to opt out of the sale or sharing of personal information by using this toggle switch. If you opt out we will not be able to offer you personalized ads and will not hand over your personal information to any third parties. Additionally, you may contact our legal department for further clarification about your rights as a California consumer by using this Exercise My Rights link.If you have enabled privacy controls on your browser (such as a plugin), we have to take that as a valid request to opt-out. Therefore we would not be able to track your activity through the web. This may affect our ability to personalize ads according to your preferences.
Targeting CookiesSwitch LabellabelThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
These cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
Performance CookiesSwitch LabellabelThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
Data Subject Request API Version 1 and 2
Data Subject Request API Version 3
Preventing Blocked HTTP Traffic with CNAME
Preventing Blocked HTTP Traffic with CNAME
Web SDK via Google Tag Manager
Preventing Blocked HTTP Traffic with CNAME
Upgrade to Version 2 of the SDK
Step 3. Set up your output
Step 8. Create a data plan
Step 9. Test your local app
Step 3. Set up your output
Step 8. Create a data plan
Step 3. Set up your output
Step 8. Create a data plan
Migrate from Segment to Client-side mParticle
Migrate from Segment to Server-side mParticle
The Developer's Guided Journey to mParticle
Download an audience from a journey
Audience A/B testing from a journey
Create a Next Best Action (NBA)
Activate Next Best Actions in Campaigns
Usage metering for value-based pricing (VBP)
Sync and Activate Analytics User Segments in mParticle
Apply All for Filter Where Clauses
Date Range and Time Settings Overview
Cumulative vs. Non-Cumulative Analysis in Segmentation
Total Count of vs. Users Who Performed
Time and Interval Settings in Dashboards
Optimize User Flow with A/B Testing
AWS Redshift (Define Your Own Schema)
AWS S3 Integration (Define Your Own Schema)
mParticle provides an HTTP-based Events API that can be used to collect data from your backend systems.
The base URL for the Events API varies depending on thedata localization regionfor your mParticle account:
The mParticle Events API can be authenticated with basic authentication in either of two ways:
If your HTTP client supports basic authentication, use your API key for “username” and your secret for “password”.
You can manually set theAuthorizationheader in calls to the Events API by including your key and secret encoded together:2.1 Concatenate your key and secret together using a colon (:) separating the two:example-api-key:example-api-secret2.2 Base64 with UTF-8 encode the result:ZXhhbXBsZS1hcGkta2V5OmV4YW1wbGUtYXBpLXNlY3JldA==2.3 Prefix the encoded string with the authorization method, including a space:Basic ZXhhbXBsZS1hcGkta2V5OmV4YW1wbGUtYXBpLXNlY3JldA==2.4 Set the resulting string as the authorization header in your HTTP requests:Authorization: Basic ZXhhbXBsZS1hcGkta2V5OmV4YW1wbGUtYXBpLXNlY3JldA==
You can manually set theAuthorizationheader in calls to the Events API by including your key and secret encoded together:
2.1 Concatenate your key and secret together using a colon (:) separating the two:example-api-key:example-api-secret
2.2 Base64 with UTF-8 encode the result:ZXhhbXBsZS1hcGkta2V5OmV4YW1wbGUtYXBpLXNlY3JldA==
2.3 Prefix the encoded string with the authorization method, including a space:Basic ZXhhbXBsZS1hcGkta2V5OmV4YW1wbGUtYXBpLXNlY3JldA==
2.4 Set the resulting string as the authorization header in your HTTP requests:Authorization: Basic ZXhhbXBsZS1hcGkta2V5OmV4YW1wbGUtYXBpLXNlY3JldA==
The following examples demonstrate how to execute a general request to the Events API, however, the size of an example request body exercising every available property and parameter is too large to include. For a complete reference of the Events API schema that lists each property and parameter, see theJSON reference.
Use the Open API (previously known as Swagger) specification or similar tools to generate helper SDKs (usingSwagger CodegenorOpenAPI Generator) for the Events API:
mParticle imposes default service limits on server-to-server data transfers using the Events API. For the specific limits, seeDefault Service Limits.
When sending large amounts of data to the Events API, use efficient batching strategies to prevent drops in performance.
Remember that one event batch includes an array than can contain one or more events. If you are tracking a large number of events that are all triggered by a single user, combine as many events as possible in a single batch based on a predetermined rate, such as a set number of events per timespan or a set number of events per user. Sending one batch for each event incurs a noticeable drop in performance.
You can further reduce your number of requests by grouping up to 100 event batches for multiple users and sending them to the/bulkeventsendpoint.
Each batch must contain data for only one user
Each batch must not exceed 128kb
A request to/bulkeventsmust contain no more than 100 batches
Exceeding these limits results in throttling.
curl--location --request POST'https://s2s.{pod}.mparticle.com/v2/events'\--header'Authorization: Basic {your-api-key}:{your-api-secret}'--data-raw'{ your-event-batch }'
curl--location --request POST'https://s2s.{pod}.mparticle.com/v2/events'\--header'Authorization: Basic {your-api-key}:{your-api-secret}'--data-raw'{ your-event-batch }'
A successful request receives a200 Acceptedresponse.
This path accepts a JSON array of event batches.  See ourJSON documentationfor additional information.
You may not send more than 100 EVENT DATA items per request.
If some event batches succeed and some event batches fail, you still receive a202 Acceptedresponse.
Don’t use this URL to upload historical data older than 30 days, as this could impact downstream processes such as audience calculation. To upload historical data older than 30 days, use thehistorical endpoint.
curl--location --request POST'https://s2s.{pod}.mparticle.com/v2/bulkevents'\--header'Authorization: Basic {your-api-key}:{your-api-secret}'--data-raw'{ array-of-event-batches }'
curl--location --request POST'https://s2s.{pod}.mparticle.com/v2/bulkevents'\--header'Authorization: Basic {your-api-key}:{your-api-secret}'--data-raw'{ array-of-event-batches }'
A successful request receives a202 Acceptedresponse.
This path accepts the same JSON payload as/v2/bulkeventsand should be used to upload historical data more than 30 days old. Data forwarded to the historical endpoint is subject to special requirements and is processed differently.
A batch received by the historical data endpoint willnotbe processed if any of the following are true:
Any event in the batch does not contain thetimestamp_unixtime_msproperty,
The value of anytimestamp_unixtime_msis less than 72 hours old.
ThehistoricalAPI endpoint behaves nearly identically to theeventsandbulkeventsendpoints with one key difference: data is not forwarded to connected event and data warehouses.
curl--location --request POST'https://s2s.{pod}.mparticle.com/v2/bulkevents/historical'\--header'Authorization: Basic {your-api-key}:{your-api-secret}'--data-raw'{ historical-event-batch }'
curl--location --request POST'https://s2s.{pod}.mparticle.com/v2/bulkevents/historical'\--header'Authorization: Basic {your-api-key}:{your-api-secret}'--data-raw'{ historical-event-batch }'
A successful request receives a202 Acceptedresponse.
In some cases, the server provides additional information in the response body. If no additional information is available, the response body will be omitted and you will only receive the status code and message.
Example response body for an unsuccessful request
{"errors":[{"code":"BAD_REQUEST","message":"Required event field \"event_type\" is missing or empty."}]}
{"errors":[{"code":"BAD_REQUEST","message":"Required event field \"event_type\" is missing or empty."}]}
Example response body for an unsuccessful request
Do Not Sell or Share My Personal Data
These cookies are necessary for the website to function and cannot be switched off in our systems. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.
Share Or Sale of Personal Data
Under the CPRA, you have the right to opt-out of the sale or sharing of your personal information to third parties. These cookies collect information for analytics and to personalize your experience with targeted ads. You may exercise your right to opt out of the sale or sharing of personal information by using this toggle switch. If you opt out we will not be able to offer you personalized ads and will not hand over your personal information to any third parties. Additionally, you may contact our legal department for further clarification about your rights as a California consumer by using this Exercise My Rights link.If you have enabled privacy controls on your browser (such as a plugin), we have to take that as a valid request to opt-out. Therefore we would not be able to track your activity through the web. This may affect our ability to personalize ads according to your preferences.
Targeting CookiesSwitch LabellabelThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
These cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
Performance CookiesSwitch LabellabelThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
Connect your customer data to the leading marketing, analytics, and data warehousing solutions with just a few clicks.
Do Not Sell or Share My Personal Data
These cookies are necessary for the website to function and cannot be switched off in our systems. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.
Share Or Sale of Personal Data
Under the CPRA, you have the right to opt-out of the sale or sharing of your personal information to third parties. These cookies collect information for analytics and to personalize your experience with targeted ads. You may exercise your right to opt out of the sale or sharing of personal information by using this toggle switch. If you opt out we will not be able to offer you personalized ads and will not hand over your personal information to any third parties. Additionally, you may contact our legal department for further clarification about your rights as a California consumer by using this Exercise My Rights link.If you have enabled privacy controls on your browser (such as a plugin), we have to take that as a valid request to opt-out. Therefore we would not be able to track your activity through the web. This may affect our ability to personalize ads according to your preferences.
Targeting CookiesSwitch LabellabelThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
These cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
Performance CookiesSwitch LabellabelThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
Data Subject Request API Version 1 and 2
Data Subject Request API Version 3
Preventing Blocked HTTP Traffic with CNAME
Preventing Blocked HTTP Traffic with CNAME
Web SDK via Google Tag Manager
Preventing Blocked HTTP Traffic with CNAME
Upgrade to Version 2 of the SDK
Step 3. Set up your output
Step 8. Create a data plan
Step 9. Test your local app
Step 3. Set up your output
Step 8. Create a data plan
Step 3. Set up your output
Step 8. Create a data plan
Migrate from Segment to Client-side mParticle
Migrate from Segment to Server-side mParticle
The Developer's Guided Journey to mParticle
Download an audience from a journey
Audience A/B testing from a journey
Create a Next Best Action (NBA)
Activate Next Best Actions in Campaigns
Usage metering for value-based pricing (VBP)
Sync and Activate Analytics User Segments in mParticle
Apply All for Filter Where Clauses
Date Range and Time Settings Overview
Cumulative vs. Non-Cumulative Analysis in Segmentation
Total Count of vs. Users Who Performed
Time and Interval Settings in Dashboards
Optimize User Flow with A/B Testing
AWS Redshift (Define Your Own Schema)
AWS S3 Integration (Define Your Own Schema)
You can import bulk data, both user attribute and events, from your data warehouse or legacy system using comma separated values (CSV) files. You can use this technique in all regions and with all outputs.
Use the following process to load user attribute or event data from CSV files:
1. Create CSV filesFile guidelinesData guidelines
2. Get credentials for the mParticle SFTP server
3. Configure the Custom CSV Feed
4. Drop CSV files on the SFTP server
Prepare the CSV files for import. Files must follow the guidelines in this section.
Files must adhere to theRFC4180 standardsfor CSV formatting.
Files must be sent in one of the following formats:A plain CSV (.csv)A ZIP file containing one or more CSV files (.zip)A gzipped CSV (.csv.gz).A PGP/GPG-encrypted file with the additional extension.gpgappended, for example,.csv.gpgor.csv.gz.gpg). Only encrypted OR unencrypted files can be accepted, but not both.  You must use PGP encryption with mParticle’s public key. SeeEncrypted filesfor additional instructions.
Files must be sent in one of the following formats:
A ZIP file containing one or more CSV files (.zip)
A PGP/GPG-encrypted file with the additional extension.gpgappended, for example,.csv.gpgor.csv.gz.gpg). Only encrypted OR unencrypted files can be accepted, but not both.  You must use PGP encryption with mParticle’s public key. SeeEncrypted filesfor additional instructions.
File sizes should be between 5 MB and 2 GB. If you upload files outside these limits, processing speed is slower. If possible, split the data across multiple small files, because their processing can be parallelized.
Each file can only contain events of the same event type. You can’t mix events of different types in the same file.
Each row size should be under 80 KB. Larger rows may impact performance.
All column names must be unique.
Each CSV file must contain fewer than 50 columns.
File name requirements:Do not use any dashes ( - ) or dots ( . ) in your file name, other than what is described below.End the file name based on the event content in your file:-custom_event.csv-commerce_event.csv-screen_view.csv-eventless.csvfor eventless uploads of user identities and attributes
Do not use any dashes ( - ) or dots ( . ) in your file name, other than what is described below.
End the file name based on the event content in your file:-custom_event.csv-commerce_event.csv-screen_view.csv-eventless.csvfor eventless uploads of user identities and attributes
Column names: specify fields according to ourJSON Schema, using dot notation.Column names described are case sensitive.
Column names: specify fields according to ourJSON Schema, using dot notation.
Column names described are case sensitive.
Environment: include a column nameenvironmentset todevelopmentorproduction. If anenvironmentcolumn is not included, data is ingested into the production environment.
User and Device IDs: as with any data sent to mParticle, you must include a column with at least one user ID or device ID.Device IDsdevice_info.android_advertising_iddevice_info.android_uuiddevice_info.ios_advertising_iddevice_info.att_authorization_statusdevice_info.ios_idfvdevice_info.roku_advertising_iddevice_info.roku_publisher_iddevice_info.fire_advertising_iddevice_info.microsoft_advertising_idUser IDsmpiduser_identities.customeriduser_identities.emailuser_identities.facebookuser_identities.microsoftuser_identities.twitteruser_identities.yahoouser_identities.otheruser_identities.other2user_identities.other3user_identities.other4Important: CSV files must have all the required identity columns, and the rows must have valid values in those columns to prevent processing errors.
User and Device IDs: as with any data sent to mParticle, you must include a column with at least one user ID or device ID.
User attributes:If you include user attributes, for each, include a column named asuser_attributes.key, wherekeyis a user attribute key. For example:user_attributes.$FirstNameuser_attributes.communication_preferenceuser_attributes.Member TierAttribute names with spaces are allowed and do not require quotes. All the keys listed in theJSON Referenceare supported.
If you include user attributes, for each, include a column named asuser_attributes.key, wherekeyis a user attribute key. For example:
Attribute names with spaces are allowed and do not require quotes. All the keys listed in theJSON Referenceare supported.
Events:Use a column namedevents.data.timestamp_unixtime_msto set the event time.Use a column namedevents.data.custom_attributes.key, wherekeyis an event attribute key, to set custom event attributes.Attribute names with spaces are allowed and do not require quotes. All the keys listed in theJSON Referenceare supported.Screen view events: use a column namedevents.data.screen_nameif you want to include the screen name.Custom events: use columns namedevents.data.event_nameandevents.data.custom_event_typeto include custom events.Commerce events: use columns with the following names for commerce events.events.data.product_action.actionevents.data.product_action.products.idevents.data.product_action.products.nameevents.data.product_action.products.categoryevents.data.product_action.products.brandevents.data.product_action.products.variantevents.data.product_action.products.positionevents.data.product_action.products.priceevents.data.product_action.products.quantityevents.data.product_action.products.coupon_codeevents.data.product_action.products.added_to_cart_time_msevents.data.product_action.products.total_product_amountevents.data.product_action.products.custom_attributesOnly one product per event can be included for commerce events uploaded via CSV.
Use a column namedevents.data.timestamp_unixtime_msto set the event time.
Use a column namedevents.data.custom_attributes.key, wherekeyis an event attribute key, to set custom event attributes.Attribute names with spaces are allowed and do not require quotes. All the keys listed in theJSON Referenceare supported.
Screen view events: use a column namedevents.data.screen_nameif you want to include the screen name.
Custom events: use columns namedevents.data.event_nameandevents.data.custom_event_typeto include custom events.
Commerce events: use columns with the following names for commerce events.events.data.product_action.actionevents.data.product_action.products.idevents.data.product_action.products.nameevents.data.product_action.products.categoryevents.data.product_action.products.brandevents.data.product_action.products.variantevents.data.product_action.products.positionevents.data.product_action.products.priceevents.data.product_action.products.quantityevents.data.product_action.products.coupon_codeevents.data.product_action.products.added_to_cart_time_msevents.data.product_action.products.total_product_amountevents.data.product_action.products.custom_attributesOnly one product per event can be included for commerce events uploaded via CSV.
Commerce events: use columns with the following names for commerce events.
Only one product per event can be included for commerce events uploaded via CSV.
Data types:All data in the CSV is converted to a string. The only exceptions to this are values that require a particular data type, such as MPID or IDFA.Only standard custom events and screen views, and eventless batches (eventless drops of user identity and attributes), have been tested.Attributes sent as arrays are not fully supported. When the entire array is present in a single cell of the CSV file, it is supported and is converted to string. Because there is no way of specifying anything but the first item in an array, repeated header columns, each subsequent column overwrites the previous one. Multiple columns don’t append to the array. This is why you can only include one product for ecommerce events. Commerce events in the Events API support arrays in multiple places, but with CSV files, you can only populate a single item in each of these arrays.
All data in the CSV is converted to a string. The only exceptions to this are values that require a particular data type, such as MPID or IDFA.
Only standard custom events and screen views, and eventless batches (eventless drops of user identity and attributes), have been tested.
Attributes sent as arrays are not fully supported. When the entire array is present in a single cell of the CSV file, it is supported and is converted to string. Because there is no way of specifying anything but the first item in an array, repeated header columns, each subsequent column overwrites the previous one. Multiple columns don’t append to the array. This is why you can only include one product for ecommerce events. Commerce events in the Events API support arrays in multiple places, but with CSV files, you can only populate a single item in each of these arrays.
Custom manifest: You can use a custom manifest to drop files created in another system without transforming them. For details, seeUse a custom manifest.
2. Get credentials for the mParticle SFTP server
mParticle maintains an SFTP server where you will drop your CSV files.
Use the following instructions to securely retrieve your credentials and find the hostname and path to use when you drop your files on the SFTP server.
To get your SFTP username and password:
Sign up for a Keybase account with your work email athttps://keybase.io/. Keybase is a secure tool which includes end-to-end encrypted chat.
Provide your Keybase account name to your Customer Success Manager or your mParticle Solutions Consultant so that they can pass it on to our Ops team.
Expect to receive your SFTP access credentials in a Keybase chat from mParticle. Note that if you need to use credentials that you already have, you’ll share those credentials in the Keybase chat.
3. Configure the Custom CSV Feed
Configure the Custom CSV Feed as input. This step provides the hostname and folder path on the SFTP server where your CSV files must be dropped.
To configure the Custom CSV Feed:
VisitSETUP > Inputs > Feedsin the mParticle UI and click theAdd Feed Inputbutton, then select Custom CSV Feed from the list.If you’ve already added the Custom CSV Feed, it won’t show up in the list. Scroll through the list of feeds until you seeCustom CSV Feed, and then click the large plus sign in the gray bar to create a new feed. You need one feed for each different event type.
VisitSETUP > Inputs > Feedsin the mParticle UI and click theAdd Feed Inputbutton, then select Custom CSV Feed from the list.
If you’ve already added the Custom CSV Feed, it won’t show up in the list. Scroll through the list of feeds until you seeCustom CSV Feed, and then click the large plus sign in the gray bar to create a new feed. You need one feed for each different event type.
Enter the following values:Configuration Name: enter a name that makes this feed easy to recognize in your list of feeds.Custom Event Name: if you are importing a custom event, enter the name that will be used for the custom event.Custom Event Type: if you entered a custom event name, select the event type.Custom Manifest: if you are using acustom manifest, paste it in the text box provided.Expect Encrypted Files: if you will import a PGP/GPG-encrypted file, select this option.
Configuration Name: enter a name that makes this feed easy to recognize in your list of feeds.
Custom Event Name: if you are importing a custom event, enter the name that will be used for the custom event.
Custom Event Type: if you entered a custom event name, select the event type.
Custom Manifest: if you are using acustom manifest, paste it in the text box provided.
Expect Encrypted Files: if you will import a PGP/GPG-encrypted file, select this option.
After you complete the connection configuration, clickIssue SFTP Details. mParticle displays your hostname and path for mParticle’s SFTP server.
4. Drop CSV files on the SFTP server
Connect to the mParticle SFTP server using the credentials provided. Once you have connected, the mParticle creates thedropfolder. If you don’t see one, create a folder nameddrop.
Create a new folder inside thedropfolder, and name it using the pathname provided in the mParticle UI as shown in the previous section. For example, based on the previous example, the folder path and name issftp.mparticle.com:4422:drop/us1-123456789123456789/.Hint:Verify that there are no trailing spaces in the name.
Use your credentials to upload your CSV files to mParticle’s SFTP server, using the correct path and folder name from the previous step.
Files on the SFTP location are added to the processing queue nearly immediately.  Depending on file count and file size, a backlog may develop. You can observe how much data has been processed using Data Master and your outbound connections. There is no notification of processing progress or completion.
2. Get credentials for the mParticle SFTP server
3. Configure the Custom CSV Feed
4. Drop CSV files on the SFTP server
Do Not Sell or Share My Personal Data
These cookies are necessary for the website to function and cannot be switched off in our systems. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.
Share Or Sale of Personal Data
Under the CPRA, you have the right to opt-out of the sale or sharing of your personal information to third parties. These cookies collect information for analytics and to personalize your experience with targeted ads. You may exercise your right to opt out of the sale or sharing of personal information by using this toggle switch. If you opt out we will not be able to offer you personalized ads and will not hand over your personal information to any third parties. Additionally, you may contact our legal department for further clarification about your rights as a California consumer by using this Exercise My Rights link.If you have enabled privacy controls on your browser (such as a plugin), we have to take that as a valid request to opt-out. Therefore we would not be able to track your activity through the web. This may affect our ability to personalize ads according to your preferences.
Targeting CookiesSwitch LabellabelThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
These cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
Performance CookiesSwitch LabellabelThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
Data Subject Request API Version 1 and 2
Data Subject Request API Version 3
Preventing Blocked HTTP Traffic with CNAME
Preventing Blocked HTTP Traffic with CNAME
Web SDK via Google Tag Manager
Preventing Blocked HTTP Traffic with CNAME
Upgrade to Version 2 of the SDK
Step 3. Set up your output
Step 8. Create a data plan
Step 9. Test your local app
Step 3. Set up your output
Step 8. Create a data plan
Step 3. Set up your output
Step 8. Create a data plan
Migrate from Segment to Client-side mParticle
Migrate from Segment to Server-side mParticle
The Developer's Guided Journey to mParticle
Download an audience from a journey
Audience A/B testing from a journey
Create a Next Best Action (NBA)
Activate Next Best Actions in Campaigns
Usage metering for value-based pricing (VBP)
Sync and Activate Analytics User Segments in mParticle
Apply All for Filter Where Clauses
Date Range and Time Settings Overview
Cumulative vs. Non-Cumulative Analysis in Segmentation
Total Count of vs. Users Who Performed
Time and Interval Settings in Dashboards
Optimize User Flow with A/B Testing
AWS Redshift (Define Your Own Schema)
AWS S3 Integration (Define Your Own Schema)
Pinterest - Reach people who are using Pinterest to discover and plan the things they want to do in the future.  Using the Ads API, businesses on Pinterest manage, scale and optimize their Promoted Pins.
In order to enable mParticle’s integration with Pinterest, you need to have abusiness accountwith Pinterest, and the account credentials for the Pinterest account.  The integration activation process in Audience Manager will prompt you to log into your Pinterest account, and once authorized, mParticle will automatically retrieve the credentials that it needs to forward audiences to Pinterest.
If you are not working with a Pinterest Marketing Developer Partner, contactadvertiser-data-onboarders@pinterest.comand CC your Pinterest account team requesting access to the Pinterest API.
Timing- An audience named<Audience Name>-EMAILand<Audience Name>-MAIDwill be available in Pinterest upon activating a subscription in mParticle, however it may take up to 24 hours before the size of the audience is shown in Pinterest.
Minimum- An audience is selectable for targeting in Pinterest as long as it has a minimum of 100 users.  If an audience is selected while in the processing state, and later is calculated to be less than 100 users, the campaign will not serve.
Maximum- There is a limit of 300 million users in an audience.  This is a count of the raw number of records that mParticle has sent to Pinterest.  If an audience reaches this limit, mParticle will no longer send user updates to Pinterest.
Additional Notes- If an email or device ID is added to an audience, and is not currently a Pinterest user, the user will not be added to the audience even if the user later becomes a Pinterest user.
When forwarding audience data to Pinterest, mParticle will send SHA-1 hash of IDFAs, Google Advertising IDs and Emails based on the values of the Connection Settings.
The Pinterest Audience Integration uses Bulk Forwarding. Bulk Forwarding means that, instead of uploading updates to an audience in real time, mParticle compiles updates into a queue until either a given amount of time has passed since the last upload, or until a certain number of updates are waiting to be sent.
By default, mParticle uploads to Pinterest whenever at least one of the following conditions is met:
3 hours have passed since the last update.
At least 100000 messages are in the queue.
Upload frequency can sometimes be adjusted. Reach out to your mParticle Customer Success Manager if you need to discuss upload frequency.
mParticle doesn’t delete the downstream audience when you delete an audience in mParticle.
Do Not Sell or Share My Personal Data
These cookies are necessary for the website to function and cannot be switched off in our systems. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.
Share Or Sale of Personal Data
Under the CPRA, you have the right to opt-out of the sale or sharing of your personal information to third parties. These cookies collect information for analytics and to personalize your experience with targeted ads. You may exercise your right to opt out of the sale or sharing of personal information by using this toggle switch. If you opt out we will not be able to offer you personalized ads and will not hand over your personal information to any third parties. Additionally, you may contact our legal department for further clarification about your rights as a California consumer by using this Exercise My Rights link.If you have enabled privacy controls on your browser (such as a plugin), we have to take that as a valid request to opt-out. Therefore we would not be able to track your activity through the web. This may affect our ability to personalize ads according to your preferences.
Targeting CookiesSwitch LabellabelThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
These cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
Performance CookiesSwitch LabellabelThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
Data Subject Request API Version 1 and 2
Data Subject Request API Version 3
Preventing Blocked HTTP Traffic with CNAME
Preventing Blocked HTTP Traffic with CNAME
Web SDK via Google Tag Manager
Preventing Blocked HTTP Traffic with CNAME
Upgrade to Version 2 of the SDK
Step 3. Set up your output
Step 8. Create a data plan
Step 9. Test your local app
Step 3. Set up your output
Step 8. Create a data plan
Step 3. Set up your output
Step 8. Create a data plan
Migrate from Segment to Client-side mParticle
Migrate from Segment to Server-side mParticle
The Developer's Guided Journey to mParticle
Download an audience from a journey
Audience A/B testing from a journey
Create a Next Best Action (NBA)
Activate Next Best Actions in Campaigns
Usage metering for value-based pricing (VBP)
Sync and Activate Analytics User Segments in mParticle
Apply All for Filter Where Clauses
Date Range and Time Settings Overview
Cumulative vs. Non-Cumulative Analysis in Segmentation
Total Count of vs. Users Who Performed
Time and Interval Settings in Dashboards
Optimize User Flow with A/B Testing
AWS Redshift (Define Your Own Schema)
AWS S3 Integration (Define Your Own Schema)
Branch helps mobile apps grow with deep links that power referral systems, sharing links, invites and marketing links with full attribution and analytics.
The following types of data can be configured to be sent from Branch to mParticle
Branch attribution events are mapped as follows:
Event Name = If this is an install attribution, the Event Name will beattribution.  Other types of attribution events setup in Branch will be sent using Event Names ofPurchase,Add to Cart,View Items,Product View, etc.
Branch attribution events are mapped as follows:
Most attribution events will include the following custom event attributes:
Depending on your Branch setup, Branch may also send other custom attributes. These attributes may be prefixed with symbols.
+indicates a parameter not instrumented by the user but added by Branch to enrich the event
The Branch user_data_developer_identity can be sent to mPID, Customer ID, or any Other ID using the ID Mappings dropdown in Branch. Additionally, device identifiers associated with the act-as platform will also be provided by Branch.
In mParticle, configure the Branch Input.  Create a separate feed configuration for each platform (iOS, Android), and copy the Server Key and Secret.  FollowBranch’s instructionsto use your Server Key and Secret to configure the postback in Branch.
Do Not Sell or Share My Personal Data
These cookies are necessary for the website to function and cannot be switched off in our systems. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.
Share Or Sale of Personal Data
Under the CPRA, you have the right to opt-out of the sale or sharing of your personal information to third parties. These cookies collect information for analytics and to personalize your experience with targeted ads. You may exercise your right to opt out of the sale or sharing of personal information by using this toggle switch. If you opt out we will not be able to offer you personalized ads and will not hand over your personal information to any third parties. Additionally, you may contact our legal department for further clarification about your rights as a California consumer by using this Exercise My Rights link.If you have enabled privacy controls on your browser (such as a plugin), we have to take that as a valid request to opt-out. Therefore we would not be able to track your activity through the web. This may affect our ability to personalize ads according to your preferences.
Targeting CookiesSwitch LabellabelThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
These cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
Performance CookiesSwitch LabellabelThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
This section contains in-depth information about the mParticle platform and features.For information about our SDKs, APIs, and tools, visit theDeveloperssection.For information about our latest product releases, visit themParticle Changelog.
For information about our SDKs, APIs, and tools, visit theDeveloperssection.
For information about our latest product releases, visit themParticle Changelog.
Learn to manage your data in the mParticle dashboard.
A from-scratch guide to get you started sending data to mParticle and forwarding it on to Event and Audience outputs.
Uncover actionable insights across the entire customer journey without SQL or writing a single line of code.
Learn about mParticle’s premium Identity Management Framework
Explore every data point in your workspace and manage your data quality.
Create audiences and orchestrate customer journeys.
Ingest data from third-party warehouses using mParticle's reverse-ETL solution.
Collect and leverage consumer consent and opt-outs towards compliance with GDPR and CCPA.
Explore how to respond to data subject requests as mandated by the GDPR and CCPA regulations.
Learn about the default limits mParticle imposes on incoming data in order to protect the performance of the mParticle dashboard and your app.
Harness third-party data sources with Feeds.
Share audience data with other accounts within your organization.
Import bulk data from a data warehouse or legacy system.
List of mParticle-specific terms and definitions.
Do Not Sell or Share My Personal Data
These cookies are necessary for the website to function and cannot be switched off in our systems. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.
Share Or Sale of Personal Data
Under the CPRA, you have the right to opt-out of the sale or sharing of your personal information to third parties. These cookies collect information for analytics and to personalize your experience with targeted ads. You may exercise your right to opt out of the sale or sharing of personal information by using this toggle switch. If you opt out we will not be able to offer you personalized ads and will not hand over your personal information to any third parties. Additionally, you may contact our legal department for further clarification about your rights as a California consumer by using this Exercise My Rights link.If you have enabled privacy controls on your browser (such as a plugin), we have to take that as a valid request to opt-out. Therefore we would not be able to track your activity through the web. This may affect our ability to personalize ads according to your preferences.
Targeting CookiesSwitch LabellabelThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
These cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
Performance CookiesSwitch LabellabelThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
Data Subject Request API Version 1 and 2
Data Subject Request API Version 3
Preventing Blocked HTTP Traffic with CNAME
Preventing Blocked HTTP Traffic with CNAME
Web SDK via Google Tag Manager
Preventing Blocked HTTP Traffic with CNAME
Upgrade to Version 2 of the SDK
Step 3. Set up your output
Step 8. Create a data plan
Step 9. Test your local app
Step 3. Set up your output
Step 8. Create a data plan
Step 3. Set up your output
Step 8. Create a data plan
Migrate from Segment to Client-side mParticle
Migrate from Segment to Server-side mParticle
The Developer's Guided Journey to mParticle
Download an audience from a journey
Audience A/B testing from a journey
Create a Next Best Action (NBA)
Activate Next Best Actions in Campaigns
Usage metering for value-based pricing (VBP)
Sync and Activate Analytics User Segments in mParticle
Apply All for Filter Where Clauses
Date Range and Time Settings Overview
Cumulative vs. Non-Cumulative Analysis in Segmentation
Total Count of vs. Users Who Performed
Time and Interval Settings in Dashboards
Optimize User Flow with A/B Testing
AWS Redshift (Define Your Own Schema)
AWS S3 Integration (Define Your Own Schema)
The Activity section of the mParticle platform allows you to view information about your event data.
The following video provides an overview of the Activity dashboard:
The Activity Overview tracks basic stats for your workspace:
All metrics can be filtered by date range, environment and input.
Displays summary metrics for identity data collected about your users:
% of Users: The percentage of users that have a given identity type.
Overlaps: The percentage of users and count that have a combination of the two given identity types.
This section is filterable by the date range, environment and input options at the top of the page.
Displays summary information representing the current workspace’s usage, showing the following metrics:
Active Platforms: Count of platforms configured with credentials.
Active Feeds: Count of configured inbound feeds.
Custom Events: Count of custom events received.
User Attributes: Count of user attributes received.
Active Event Integrations: Count of active event configurations.
Active Audience Integrations: Count of active audience configurations.
Active Real-time Audiences: Count of active real-time audiences.
Standard Audiences: Count of ‘ready’ Standard Audiences.
The User Activity view allows you to see a detailed summary of data associated with a single user. Note that only users with the Admin or Support roles can access the User Activity view.
To find a user, begin entering any known ID for the user, an email address, customer ID, device ID, etc. The ID must match exactly to return a profile. If multiple profiles are returned, select the user you want from the list.
You can search for any element in your Identity Set.
To perform a search do the following:
Navigate to theActivity>User Activityscreen. The User Search dialog displays on the screen.
Enter the search terms in the search field.You can narrow your search by clicking the Any Profile field drop-down and selecting any field that is part of your Identity Set.
Enter the search terms in the search field.
You can narrow your search by clicking the Any Profile field drop-down and selecting any field that is part of your Identity Set.
You can search for users that belong to agroup identityby searching for the group identifier or group attribute for the group.
You can search for users that belong to agroup identityby searching for the group identifier or group attribute for the group.
Click the Search button. The screen refreshes and search results are displayed in the Information screen.
View individual results by clicking a row. From the individual results you can do the following:
Submit a New GDPR Request. For more information about GDPR requests, seeSubject Requests
View User Events by clicking theEventstab or by scrolling to the bottom of the screen and clicking theView User Eventsbutton
Expand any of the sections on the Information screen for more information about your results
The information shown on this screen is explained in the following sections.
The following user information will be displayed if available:
First and last seen dates (across all workspaces)
First and last seen dates (for the individual workspace)
Data Inputs and Partner Feeds the user has appeared in.
Device ID - only one Device ID will be shown, for the most recently seen device. The Advertising ID (IDFA or GAID) will be shown for preference, with the Vendor ID (IDFV or Android ID) as a fallback.
List of all devices, including the date the device was last seen, device platform (iOS, Android, etc) and whetherLimit Ad Trackingis enabled for the device.
List of all available user attributes. Display priority is given to reserved user attributes:
All other user attributes will be displayed in alphabetical order.
User attribute values may be updated by different inbound data streams. For example, a profile may be created, attributes may be added, updated, or deleted. Each change triggers a timestamp change for the altered attribute. When resolving differences in attribute values for the same profile, the value with the latest timestamp is used.
A list of campaigns, showing Partner and Campaign name.
A list of allAudiencesthe user is a member of.
The Events tab will show a timeline of historical event data from the user,up until the previous day. Events can be filtered by Date, Input, Event Type and Device. In addition to filtering, you can also choose to highlight selected event names in the timeline.
Events are grouped in batches, with the input source in bold. Click a batch heading to view common attributes for the batch, or an event name to view attributes for the event. eCommerce events show details for the transaction and also for each product, including quantity and total price per product.
Click the Link button in the details view to copy a sharable direct link to the event to your clipboard.
As with theLive StreamYou can expand any event or batch to view the raw JSON data.
The User Activity View allows you to manually edit certain properties of individual user profiles. This can be useful if you need to correct profile data and you want the updated profile data to be immediately forwarded to your downstream connections.
Whenever you modify user profile data, you must select one of your configured inputs. This allows mParticle to route your changes through that input, updating the user profile, before finally forwarding the changes to any active, connected outputs.
To edit a profile’s user attributes:
Navigate toActivity > User Activityusing the left-hand nav bar.
Find the profile you want to edit by searching for one of the profile’s identifiers under User Search.
On the Information tab for the profile, scroll to the User Attributes section and click theEditpencil icon next to the mParticle workspace where you want to make your changes.Remember that user attributes are scoped at the workspace level, so a profile that exists in multiple workspaces may contain different attributes in each workspace.
On the Information tab for the profile, scroll to the User Attributes section and click theEditpencil icon next to the mParticle workspace where you want to make your changes.
Remember that user attributes are scoped at the workspace level, so a profile that exists in multiple workspaces may contain different attributes in each workspace.
In the Edit modal, select one of your configured and active inputs. The changes you make will be sent to every output that is connected to the input you select. If you don’t want your changes sent to your downstream outputs, create or select an input that has no connected outputs.
The Edit modal displays a list of the profile’s attributes and attribute values. To change an attribute value, modify or replace it using the text box to the right of the attribute’s name.
To permanently delete an attribute from a profile, click thedeletetrash icon next to the attribute.
After you’ve made your changes, clickUpdate.
Navigate toActivity > User Activityusing the left-hand nav bar.
Find the profile you want to edit by searching for one of the profile’s identifiers under User Search.
On the Information tab for the profile, scroll to the Consent and Compliance section and click theEditpencil icon next to the mParticle workspace where you want to make your changes.Remember that user consent and compliance values are scoped at the workspace level, so a profile that exists in multiple workspaces may contain different values in each workspace.
On the Information tab for the profile, scroll to the Consent and Compliance section and click theEditpencil icon next to the mParticle workspace where you want to make your changes.
Remember that user consent and compliance values are scoped at the workspace level, so a profile that exists in multiple workspaces may contain different values in each workspace.
In the Edit modal, select one of your configured and active inputs. The changes you make will be sent to every output that is connected to the input you select. If you don’t want your changes sent to your downstream outputs, create or select an input that has no connected outputs.
The Edit modal lists the profile’s consent purposes (which are not editable) and the corresponding consent values. You can edit a consent value by entering eithertrueorfalsein the text box.
After you’ve made your changes, clickUpdate.
Navigate toActivity > User Activityusing the left-hand nav bar.
Find the profile you want to edit by searching for one of the profile’s identifiers under User Search.
On the Information tab for the profile, look for the User Details section and click theEditpencil icon.Remember that user identities values are scoped at the organization level: a user’s identities are consistent between all workspaces in your mParticle organization.
On the Information tab for the profile, look for the User Details section and click theEditpencil icon.
Remember that user identities values are scoped at the organization level: a user’s identities are consistent between all workspaces in your mParticle organization.
In the modal that appears, select one of your configured and active inputs. The changes you make will be sent to every output that is connected to the input you select. If you don’t want your changes sent to your downstream outputs, create or select an input that has no connected outputs.
To edit one of the profile’s identities, enter the new value in the text box to the right of the user identity.
To delete an identity from a profile, click thedeletetrash icon.
After you’ve made your changes, clickUpdate.
To add an identity to a user profile:
Repeat steps 1-4 ofEdit a profile’s user identities.
Use the left dropdown menu to select the type of identity to add, and enter the value of the new identity in the text box on the right.
The System Alerts dashboard reports all errors returned when forwarding data to your connected outputs. This dashboard helps you to find any connections that are failing to forward data, and it can help you to begin debugging a connection you already know is experiencing problems by highlighting the specific errors reported.
To view system alerts, log into your mParticle account and navigate toActivity > System Alertsin the left nav bar.
The System Alerts dashboard lists all of your connections sorted by their alert volume, from high to low according to alerts reported during the last 12 hours.
You can view alerts reported during different date ranges by using theDatedropdown menu.
To view alerts reported for only the production or development environment, select the environment using theEnvironmentdropdown menu. You can also look for a specific connection with the search bar.
To view details on the specific alerts reported for a connection, select it from the list labeledConnections.
The alerts displayed are sorted by volume and organized according to their type. To view the volume of alerts for each input, click the+icon next to the alert type. You can search for a specific alert using the search bar on the System Alerts dashboard.
The following alert types are supported:
The Event Forwarding report provides information on your app’s incoming event data and the data that is forwarded to enabled output event services. This is where you can verify how much data mParticle captured per event, and how much data was forwarded.  If multiple configurations are enabled for an integration, the data sent to each configuration will be shown separately. We recommend checking this report if you notice any discrepancies in your vendor dashboards.
The report displays a daily summary of events, plus counts for each message type and event name, along with the inbound and outbound counts for each enabled service.  By default a summary of data for a full day is shown, but you can also select a specific hour to display hourly data.
You may notice differences between an inbound data count and an outbound data count. There are several reasons these differences may occur. Here are some good questions to start with:
Did you enable/disable the service on the date in question?
Is the message type not supported by the integration?
Have you chosen configuration or connection settings that exclude certain message types?
Are you sendingcommerce eventsthat are expanded before being forwarded?
Commerce Event Types and Event Forwarding
Four events, called commerce events, capture information about financial transactions: product commerce events, purchase or refund commerce events, promotion commerce events, and impression commerce events.
Commerce events behave differently from other events:
If the event is forwarded using an mParticle SDK with an embedded kit that doesn’t implementlogCommerceEvent, then the event is expanded to ensure that no data is lost.
If the event is forwarded server-to-server or using an mParticle SDK with an embedded kit that does supportlogCommerceEvent, then no expansion is needed, and no data is lost.
In addition, the expansion behavior is different depending on the commerce event type:
Product commerce events and impression commerce events expand to one event per product.
Purchase or refund commerce events add an additional event with the total value.
Promotion commerce events expand to one event per promotion action type such as “click” or “view.”
For more details, see theiOS SDKorAndroid SDKdocumentation.
Commerce Event Types and Event Forwarding
Do Not Sell or Share My Personal Data
These cookies are necessary for the website to function and cannot be switched off in our systems. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.
Share Or Sale of Personal Data
Under the CPRA, you have the right to opt-out of the sale or sharing of your personal information to third parties. These cookies collect information for analytics and to personalize your experience with targeted ads. You may exercise your right to opt out of the sale or sharing of personal information by using this toggle switch. If you opt out we will not be able to offer you personalized ads and will not hand over your personal information to any third parties. Additionally, you may contact our legal department for further clarification about your rights as a California consumer by using this Exercise My Rights link.If you have enabled privacy controls on your browser (such as a plugin), we have to take that as a valid request to opt-out. Therefore we would not be able to track your activity through the web. This may affect our ability to personalize ads according to your preferences.
Targeting CookiesSwitch LabellabelThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
These cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
Performance CookiesSwitch LabellabelThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
Data Subject Request API Version 1 and 2
Data Subject Request API Version 3
Preventing Blocked HTTP Traffic with CNAME
Preventing Blocked HTTP Traffic with CNAME
Web SDK via Google Tag Manager
Preventing Blocked HTTP Traffic with CNAME
Upgrade to Version 2 of the SDK
Step 3. Set up your output
Step 8. Create a data plan
Step 9. Test your local app
Step 3. Set up your output
Step 8. Create a data plan
Step 3. Set up your output
Step 8. Create a data plan
Migrate from Segment to Client-side mParticle
Migrate from Segment to Server-side mParticle
The Developer's Guided Journey to mParticle
Download an audience from a journey
Audience A/B testing from a journey
Create a Next Best Action (NBA)
Activate Next Best Actions in Campaigns
Usage metering for value-based pricing (VBP)
Sync and Activate Analytics User Segments in mParticle
Apply All for Filter Where Clauses
Date Range and Time Settings Overview
Cumulative vs. Non-Cumulative Analysis in Segmentation
Total Count of vs. Users Who Performed
Time and Interval Settings in Dashboards
Optimize User Flow with A/B Testing
AWS Redshift (Define Your Own Schema)
AWS S3 Integration (Define Your Own Schema)
Amplitudeprovides product analytics that helps companies leverage cross-platform behavioral data to drive user growth.
To activate mParticle’s integration with Amplitude, you need the Amplitude API Key for each app that you’d like to set up.  Your API key is listed on theAmplitude Project Settings page.
The Amplitude integration requires themParticle Amplitude Kitwhen connected to a web input. If you are initializing the web SDK using theSnippet Optionthen the Kit is automatically included for you. If you areSelf Hostingthe SDK then you need to add this kit manually into your source code.
mParticle will forward User Identities and Attributes to Amplitude, even if there are no events in the batch.
Every event in Amplitude has a main Device ID field. mParticle populates this field as follows:
For Android, the Android ID (falling back to the Android Advertising ID if unavailable)
For iOS, the IDFA (falling back to the IDFV if unavailable)
For Roku, the Roku Advertising ID (falling back to the Roku Publisher ID if not available)
For FireTV, the Fire Advertising ID.
Amplitude also has dedicated fields for particular Device IDs, such as IDFA and Android ID. These will be populated if the ID is available. SeeField Mappings, for more information.
Amplitude requires either a Device ID or a User ID. User ID can be mapped as Email, Customer ID or mParticle ID. If no accepted identifiers are present, data will not be forwarded.
By default, mParticle forwards web data to Amplitude client-side, by directly invoking Amplitude’s Javascript methods. Optionally, you can choose to forward web data server-to-server in theConnection Settings. Note that if you choose this option, your incoming data must have your selected User ID to be forwarded.
By default, mParticle sends data to the Amplitude organization’s US endpoint for theHTTP API, but Amplitude offers a different endpoint for EU organizations. In mParticle, theAmplitude Organization Configuration Settingallows you to select a target Amplitude organization location.
mParticle will forward all screen views to Amplitude with the Amplitude Event Type set to “Viewed ScreenName”, whereScreenNameis the screen name passed to thelogScreenSDK method (or the name of the screen’s Activity class if you’re using automatic screen tracking on Android).
mParticle will forward all session start and session end events to Amplitude with the Amplitude Event Type set tosession_startandsession_end.
Each valid eCommerce event sent to mParticle is expanded into multiple events before being translated and forwarded to Amplitude. While this expansion applies to all eCommerce transactions, the resulting events are dependent on the type of eCommerce event being forwarded and the number of products in the event.
Note: mParticle will not attempt to forward eCommerce Events to Amplitude which contain no Products.
The eCommerce events resulting from the expansion that may be forwarded to Amplitude are:
Transaction level events (e.g.eCommerce - Purchase)
Item level events (e.g.eCommerce - Purchase - Item)
One Transaction Event is forwarded to Amplitude for every valid eCommerce event provided.
Contains a summary of the transaction, including a JSON array of the products sent in the initial eCommerce event.
One Item Event is forwarded to Amplitude for every product inside the provided eCommerce event.
Each Item event contains information about one of the products in the provided eCommerce event.
One Revenue Event is forwarded to Amplitude for every validPurchaseorRefundeCommerce event provided. Otherwise none is sent.
The name of the Revenue Event is set by Amplitude, and contains revenue information about the Purchase or Refund event.
Each valid eCommerce event sent to mParticle will result in a transaction level event being sent to Amplitude. This event contains a summary of the transaction, including a JSON array of the products sent in the initial eCommerce event.
The name given to the Transaction and Item Level Events is determined from theProduct Actionprovided on the eCommerce Event sent to mParticle.
Custom events logged via mParticle’slogEventSDK method and their attributes will be forwarded to Amplitude, with the event name passed tologEventas the Amplitude Event Type. An event namemustbe specified or an error will be returned.
Attribution Custom events will be forwarded to Amplitude prefixed with the attribution provider in the event name.  For example,[AppsFlyer] attribution.  Event Attributes that are included with the event are forwarded to Amplitude in user_properties, also prefixed with the attribution provider.
mParticle will forward all push registration events to Amplitude with the Amplitude Event Type set toPush Registration. All Field Mappings defined in this documentation will be forwarded too.
If theSend Application State Transitionssetting is enabled, Application State Transition events will be forwarded to Amplitude as follows:
Only for web requests, mParticle will extract OS and browser info from HTTP user agent.
Similar to Amplitude’s SDK behavior,os_nameandos_versionwill be populated with browser info. For that reason, mParticle will send 2 additionalCustom User Properties,web_os_nameandweb_os_version, that will contain OS info. SeeAmplitude’s doc.
mParticle will also populatedevice_brandanddevice_modelfrom the HTTP user agent if theExtract Device Family from User Agentsetting is enabled. With this setting enabled, if mParticle cannot determine the device brand or model, it will populatedevice_brandwith the same value as is set forweb_os_name. Note, the device values may differ slightly between S2S events and events sent through the Amplitude web kit.
Extract Device Family from User Agent
Do Not Sell or Share My Personal Data
These cookies are necessary for the website to function and cannot be switched off in our systems. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.
Share Or Sale of Personal Data
Under the CPRA, you have the right to opt-out of the sale or sharing of your personal information to third parties. These cookies collect information for analytics and to personalize your experience with targeted ads. You may exercise your right to opt out of the sale or sharing of personal information by using this toggle switch. If you opt out we will not be able to offer you personalized ads and will not hand over your personal information to any third parties. Additionally, you may contact our legal department for further clarification about your rights as a California consumer by using this Exercise My Rights link.If you have enabled privacy controls on your browser (such as a plugin), we have to take that as a valid request to opt-out. Therefore we would not be able to track your activity through the web. This may affect our ability to personalize ads according to your preferences.
Targeting CookiesSwitch LabellabelThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
These cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
Performance CookiesSwitch LabellabelThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
Data Subject Request API Version 1 and 2
Data Subject Request API Version 3
Preventing Blocked HTTP Traffic with CNAME
Preventing Blocked HTTP Traffic with CNAME
Web SDK via Google Tag Manager
Preventing Blocked HTTP Traffic with CNAME
Upgrade to Version 2 of the SDK
Step 3. Set up your output
Step 8. Create a data plan
Step 9. Test your local app
Step 3. Set up your output
Step 8. Create a data plan
Step 3. Set up your output
Step 8. Create a data plan
Migrate from Segment to Client-side mParticle
Migrate from Segment to Server-side mParticle
The Developer's Guided Journey to mParticle
Download an audience from a journey
Audience A/B testing from a journey
Create a Next Best Action (NBA)
Activate Next Best Actions in Campaigns
Usage metering for value-based pricing (VBP)
Sync and Activate Analytics User Segments in mParticle
Apply All for Filter Where Clauses
Date Range and Time Settings Overview
Cumulative vs. Non-Cumulative Analysis in Segmentation
Total Count of vs. Users Who Performed
Time and Interval Settings in Dashboards
Optimize User Flow with A/B Testing
AWS Redshift (Define Your Own Schema)
AWS S3 Integration (Define Your Own Schema)
This section describes the configuration settings necessary to activate mParticle’s event tracking integration with Facebook.  The event tracking integration enables conversion tracking for Facebook advertising campaigns.
Facebook has limits around the number of unique event names and attributes their platform can process as noted here:https://developers.facebook.com/docs/reference/android/current/class/AppEventsLogger/
Between 2 and 40 characters in an event name and attribute
It may takes up to 24 hours to see refreshed stats in Facebook Analytics
Event data from mParticle to Facebook is typically sent server side.  However, Web data can be sent client or server side based on your implementation and settings.  These different options require different settings:
iOS, tvOS, and Android - data is sent S2S, and you’ll need your app’s Facebook Application ID and Application Secret
Data Feeds - data is sent S2S, and you’ll need your Facebook Pixel ID
Web - for client side kit, you’ll need your Facebook Pixel ID
Web - for S2S, you’ll need your Facebook Pixel ID and Facebook Marketing API Access Token. You also need to enable both theUse Pixel Server-Side ForwardingandForward Web Requests Server Sidesettings.
Roku, Xbox, SmartTV, FireTV, Alexa - you’ll need your Facebook Pixel ID and Facebook Marketing API Access Token.
os_versionis required for iOS/tvOS events. Ifos_versionis not present, the event will be rejected and an error message will be shown inSystem Alerts.
You need to perform a few steps in Facebook to create aFacebook Pixel S2Sconnection.
Navigate to the Facebook Events Manager
Connect a New Data Source:  SelectWebwith a connection method ofConversions API.
Create an Access Token:Open the settings for the new Pixel Data Source, scroll to theConversions API>Set up manuallysection and clickCreate Access Token. Follow the steps described and copy theAccess Tokenfor setup in mParticle.
Facebook recommends sending the same pixel event twice - once from the browser and once from the server. If done incorrectly, this can result in duplicate events appearing in Facebook. The following steps walk through how to configure this within mParticle.
Using only the mParticle Web SDK (Recommended)
To do this using mParticle, you will need to perform the following steps:
Setup the mParticle Web SDK in your application
Setup two configurations for mParticle’s Facebook integration. One of these configurations must haveUse Pixel Server-Side Forwardingenabled and the other must not. Both must have an access token set.
Connect both of these configurations to yourWebinput. The configuration with server-side Pixel forwarding enabled, must also haveForward Web Requests Server Sideenabled. Similarly, the connection with Pixel server-side forwarding disabled, must haveForward Web Requests Server Sidedisabled.
Ideally, all Web data sent to mParticle will be sent through the mParticle Web SDK, but it is still possible to deduplicate events outside of this flow if necessary. To ensure redundant events sent through Facebook Pixel and the Facebook Conversions API are correctly deduplicated when they reach Facebook, two conditions must be met:
Events must have consistentevent_idvalues. For this, thefieldsource_message_idmay be used to manually set the Event ID sent to Facebook.
If you use the mParticle Web SDK and server-side web integration, then this will be automatically handled.
If you need to manually assign asource_message_idvia the web SDK and server-side separately, use the following API:
mParticle.logBaseEvent({messageType:4,// This is the messageType for custom events.  Use 3 for page viewsname:'Test Event',data:{attr1:'value1'},// custom attributeseventType:mParticle.EventType.Navigation,// optional for custom events. Do not set for page viewscustomFlags:{flag1:'flagValue1'},sourceMessageId:'custom_source_message_id'});
mParticle.logBaseEvent({messageType:4,// This is the messageType for custom events.  Use 3 for page viewsname:'Test Event',data:{attr1:'value1'},// custom attributeseventType:mParticle.EventType.Navigation,// optional for custom events. Do not set for page viewscustomFlags:{flag1:'flagValue1'},sourceMessageId:'custom_source_message_id'});
You can also assign asource_message_idto commerce events:
// 1. Create the productconstproduct1=mParticle.eCommerce.createProduct('Double Room - Econ Rate',// Name'econ-1',// SKU100.00,// Price4,// Quantity);// 2. Summarize the transactionconsttransactionAttributes={Id:'foo-transaction-id',Revenue:430.00,Tax:30};// 3. Log the purchase event// Optional custom attributes for a product action can be defined as key/value pairs witin an objectconstcustomAttributes={'sale':true};// Optional custom flags can be defined as key/value pairs within an objectconstcustomFlags={'Google.Category':'travel'};constoptions={sourceMessageId:'custom_source_message_id'}mParticle.eCommerce.logProductAction(mParticle.ProductActionType.Purchase,[product1],customAttributes,customFlags,transactionAttributes,options);
// 1. Create the productconstproduct1=mParticle.eCommerce.createProduct('Double Room - Econ Rate',// Name'econ-1',// SKU100.00,// Price4,// Quantity);// 2. Summarize the transactionconsttransactionAttributes={Id:'foo-transaction-id',Revenue:430.00,Tax:30};// 3. Log the purchase event// Optional custom attributes for a product action can be defined as key/value pairs witin an objectconstcustomAttributes={'sale':true};// Optional custom flags can be defined as key/value pairs within an objectconstcustomFlags={'Google.Category':'travel'};constoptions={sourceMessageId:'custom_source_message_id'}mParticle.eCommerce.logProductAction(mParticle.ProductActionType.Purchase,[product1],customAttributes,customFlags,transactionAttributes,options);
Note that your workspace will need to be on event batching in order to leverage passing a customsource_message_idto the Web SDK for this to work.  If you are not on web batching, please contact your customer success manager.
Visit theFacebook Business Help CenterandFacebook For Developersfor more information on the subject of deduplication.
Please run through the following steps to confirm your settings are correct:
Verify your access token is of typeSystem Userand will never expire using this page:https://developers.facebook.com/tools/debug/accesstoken/
Verify your Pixel ID is valid using this page. Please enter the ID and confirm theSend To Test Eventsworks:https://developers.facebook.com/docs/marketing-api/conversions-api/payload-helper/
If you run into issues with either of the above steps, please repeat the steps described inConfiguring Facebook Pixel Server-to-Server.
The iOS/tvOS and Android integrations forward App State Transition, Commerce, Custom, Screen View, and Session Start events.
The Web integration forwards Commerce, Custom, Screen View, and Session Start / End events.
iOS14 Update for Device Data Mapping
The Facebookadvertiser_tracking_enabledfield is set based on theatt_authorization_statusandlimit_ad_trackingfields as defined below.  Check theiOS14 Implementation guidefor more information.
Ifatt_authorization_statusis not available, thelimit_ad_trackingfield is evaluated:
mParticle will send a variety of user data fields to Facebook for advanced matching. The specific fields sent depends on if Facebook Pixel server-side forwarding is enabled or not.
mParticle will hash and send the following fields to Facebook when they are set for a user.
mParticle’s Facebook integration supportscustom mappingswhich allows you to map your events and attributes for Facebook. mParticle provides mappings for the following Facebook event types:
When setting up the custom mappings, the fb_content_type can provide additional information on the event to be used forCollaborative Ads.  The acceptable values for fb_content_type are:
If a value provided for fb_content_type is not in the above list, the value sent will beproduct.
mParticle forwards the mParticle product events Added to Cart and Added to Wishlist to Facebook using Facebook’s corresponding pre-defined event names.  mParticle Product Views are forwarded to Facebook as the pre-defined event “Viewed Content”.  The unit price, currency, product category, and SKU are passed to Facebook as well.  See below for a sample Added to Cart event call using the Facebook SDK, and an equivalent call using the mParticle SDK.
//Facebook SDK call[FBAppEvents logEvent:FBAppEventNameAddedToCart
           valueToSum:54.23parameters:@{FBAppEventParameterNameCurrency:@"USD",FBAppEventParameterNameContentType:@"shoes",FBAppEventParameterNameContentID:@"HDFU-8452"}];//Equivalent mParticle SDK callMPProduct*product=[[MPProduct alloc]initWithName:@"A Shoe"category:@"shoes"quantity:1revenueAmount:54.23];product.unitPrice=54.23;product.sku=@"HDFU-8452";[[MParticle sharedInstance]logProductEvent:MPProductEventAddedToCart product:product];
//Facebook SDK call[FBAppEvents logEvent:FBAppEventNameAddedToCart
           valueToSum:54.23parameters:@{FBAppEventParameterNameCurrency:@"USD",FBAppEventParameterNameContentType:@"shoes",FBAppEventParameterNameContentID:@"HDFU-8452"}];//Equivalent mParticle SDK callMPProduct*product=[[MPProduct alloc]initWithName:@"A Shoe"category:@"shoes"quantity:1revenueAmount:54.23];product.unitPrice=54.23;product.sku=@"HDFU-8452";[[MParticle sharedInstance]logProductEvent:MPProductEventAddedToCart product:product];
//Facebook SDK callBundleparameters=newBundle();parameters.putString(AppEventsConstants.EVENT_PARAM_CURRENCY,"USD");parameters.putString(AppEventsConstants.EVENT_PARAM_CONTENT_TYPE,"shoes");parameters.putString(AppEventsConstants.EVENT_PARAM_CONTENT_ID,"HDFU-8452");logger.logEvent(AppEventsConstants.EVENT_NAME_ADDED_TO_CART,54.23,parameters);//Equivalent mParticle SDK callMPProductproduct=newMPProduct.Builder("A Shoe","HDFU-8452").quantity(1).unitPrice(54.23).totalRevenue(54.23).productCategory("shoes").currencyCode("USD").build();mp.logProductEvent(MPProduct.Event.ADD_TO_CART,product);
//Facebook SDK callBundleparameters=newBundle();parameters.putString(AppEventsConstants.EVENT_PARAM_CURRENCY,"USD");parameters.putString(AppEventsConstants.EVENT_PARAM_CONTENT_TYPE,"shoes");parameters.putString(AppEventsConstants.EVENT_PARAM_CONTENT_ID,"HDFU-8452");logger.logEvent(AppEventsConstants.EVENT_NAME_ADDED_TO_CART,54.23,parameters);//Equivalent mParticle SDK callMPProductproduct=newMPProduct.Builder("A Shoe","HDFU-8452").quantity(1).unitPrice(54.23).totalRevenue(54.23).productCategory("shoes").currencyCode("USD").build();mp.logProductEvent(MPProduct.Event.ADD_TO_CART,product);
Purchase events logged through mParticle’s eCommerce SDK methods will be forwarded to Facebook using Facebook’s “Purchased” pre-defined event name.
All custom app events, which are logged via mParticle’slogEventSDK method, will be forwarded to Facebook as custom app events, using the event name passed to mParticle’slogEventSDK method.
//Facebook SDK call[FBAppEvents logEvent:@"battledAnOrc"];//Equivalent mParticle SDK call[[MParticle sharedInstance]logEvent:@"battledAnOrc"];
//Facebook SDK call[FBAppEvents logEvent:@"battledAnOrc"];//Equivalent mParticle SDK call[[MParticle sharedInstance]logEvent:@"battledAnOrc"];
//Facebook SDK calllogger.logEvent("battledAnOrc");//Equivalent mParticle SDK callmp.logEvent("battledAnOrc");
//Facebook SDK calllogger.logEvent("battledAnOrc");//Equivalent mParticle SDK callmp.logEvent("battledAnOrc");
For theWebplatform, mParticle will forward screen views as ‘PageView’ events.
Note:This also applies to Pixel server-side forwarding.
For theiOS/tvOSandAndroidplatforms, screen views are supported by custom mappings. Reference thecustom mappingssection for more.
There are several fields only accepted by server-to-server Web connections. These fields and the mParticle fields they are set from are listed below:
*Custom data fields can also be set via custom mappings or E-Commerce event fields. See the relevant sections for more details.
iOS14 Update for Device Data Mapping
Do Not Sell or Share My Personal Data
These cookies are necessary for the website to function and cannot be switched off in our systems. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.
Share Or Sale of Personal Data
Under the CPRA, you have the right to opt-out of the sale or sharing of your personal information to third parties. These cookies collect information for analytics and to personalize your experience with targeted ads. You may exercise your right to opt out of the sale or sharing of personal information by using this toggle switch. If you opt out we will not be able to offer you personalized ads and will not hand over your personal information to any third parties. Additionally, you may contact our legal department for further clarification about your rights as a California consumer by using this Exercise My Rights link.If you have enabled privacy controls on your browser (such as a plugin), we have to take that as a valid request to opt-out. Therefore we would not be able to track your activity through the web. This may affect our ability to personalize ads according to your preferences.
Targeting CookiesSwitch LabellabelThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
These cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
Performance CookiesSwitch LabellabelThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
Use the mParticle SDKs and APIs to collect, organize, and manage customer data.
Pick a platform, and follow the SDK quickstart tutorial to see how easy it is to collect data and forward it to a third-party integration.
From event tracking to predicting user behavior, the developer docs guide you through each stage of building a complete mParticle implementation.
Track and send customer data directly from your app to any server.
Track and send customer data between servers.
Track media events and heartbeats across three platforms.
Collect data for contexts too complex for the Server SDK.
Save time when improving data quality by deleting data associated with sets of customers.
Send seeds for your calculated attributes.
Create and manage custom sets of permissions for your mParticle account users.
Define your data schema with Data Master.
Submit data subject requests for GDPR and CCPA compliance via the OpenDSR API.
Match and resolve identities to build a single user profile for all user activities.
Programmatically update your mParticle inputs, outputs, filters, and more.
Send data to mParticle from your web site via a tracking pixel.
Access user profiles at scale to power personalized experiences.
Create groups of users based on shared attributes.
Go beyond Reverse-ETL and build a headless data infrastructure.
Access some mParticle features from a terminal.
Manage your data plans as code.
Lint your code against your data plan.
Understand how to reference the pod where your org is hosted.
Use IDSync to identify unknown users with data stored in Snowflake.
Become an mParticle partner and make your platform available for input or output.
Cleanse and transform data before it is output to another system.
Migrate your Segment implementation to mParticle.
Do Not Sell or Share My Personal Data
These cookies are necessary for the website to function and cannot be switched off in our systems. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.
Share Or Sale of Personal Data
Under the CPRA, you have the right to opt-out of the sale or sharing of your personal information to third parties. These cookies collect information for analytics and to personalize your experience with targeted ads. You may exercise your right to opt out of the sale or sharing of personal information by using this toggle switch. If you opt out we will not be able to offer you personalized ads and will not hand over your personal information to any third parties. Additionally, you may contact our legal department for further clarification about your rights as a California consumer by using this Exercise My Rights link.If you have enabled privacy controls on your browser (such as a plugin), we have to take that as a valid request to opt-out. Therefore we would not be able to track your activity through the web. This may affect our ability to personalize ads according to your preferences.
Targeting CookiesSwitch LabellabelThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
These cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
Performance CookiesSwitch LabellabelThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
Connect your customer data to the leading marketing, analytics, and data warehousing solutions with just a few clicks.
Do Not Sell or Share My Personal Data
These cookies are necessary for the website to function and cannot be switched off in our systems. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.
Share Or Sale of Personal Data
Under the CPRA, you have the right to opt-out of the sale or sharing of your personal information to third parties. These cookies collect information for analytics and to personalize your experience with targeted ads. You may exercise your right to opt out of the sale or sharing of personal information by using this toggle switch. If you opt out we will not be able to offer you personalized ads and will not hand over your personal information to any third parties. Additionally, you may contact our legal department for further clarification about your rights as a California consumer by using this Exercise My Rights link.If you have enabled privacy controls on your browser (such as a plugin), we have to take that as a valid request to opt-out. Therefore we would not be able to track your activity through the web. This may affect our ability to personalize ads according to your preferences.
Targeting CookiesSwitch LabellabelThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
These cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
Performance CookiesSwitch LabellabelThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
Data Subject Request API Version 1 and 2
Data Subject Request API Version 3
Preventing Blocked HTTP Traffic with CNAME
Preventing Blocked HTTP Traffic with CNAME
Web SDK via Google Tag Manager
Preventing Blocked HTTP Traffic with CNAME
Upgrade to Version 2 of the SDK
Step 3. Set up your output
Step 8. Create a data plan
Step 9. Test your local app
Step 3. Set up your output
Step 8. Create a data plan
Step 3. Set up your output
Step 8. Create a data plan
Migrate from Segment to Client-side mParticle
Migrate from Segment to Server-side mParticle
The Developer's Guided Journey to mParticle
Download an audience from a journey
Audience A/B testing from a journey
Create a Next Best Action (NBA)
Activate Next Best Actions in Campaigns
Usage metering for value-based pricing (VBP)
Sync and Activate Analytics User Segments in mParticle
Apply All for Filter Where Clauses
Date Range and Time Settings Overview
Cumulative vs. Non-Cumulative Analysis in Segmentation
Total Count of vs. Users Who Performed
Time and Interval Settings in Dashboards
Optimize User Flow with A/B Testing
AWS Redshift (Define Your Own Schema)
AWS S3 Integration (Define Your Own Schema)
After you create an input, you can begin capturing data.
Before you start this activity, you should have already:
mParticle collects two important kinds of data:
Event data is about actions taken by a user in your app. Some events are collected automatically by mParticle’s native SDKs. These include the Session Start events you saw in the Live stream when you firstset up your input. Other events need to be captured by writing code in your app. Of these, the most significant are:
Screen/Page Views- keep track of where a user is in your app
Custom Events- track any actions the user might take in your app, such as clicking a button or watching a video.
Commerce Events- track purchases and other product-related activity.
mParticle also captures data about your user, including their identities, information about the device they are using and any custom attributes you set. As with event data, some user data, such as information about the devices they use, is captured automatically by mParticle’s native SDKs. Two important types of user data must be captured by writing code in your app:
User identitiesare unique identifiers for your user, like an email address or customer ID. These are different from the device identities collected automatically by the SDKs, which don’t identify an individual person but a particular cell phone, browser session, or some other device.User identities help mParticle keep track of unique users of your app and allow you to track a user’s activity over time and across different devices. To learn a lot more about user and device identities, read ourIDSyncguide. For now, you just need to know that a user identity is a way of identifying aperson, independently of thedevicethey are currently using.
User Attributesare key-value pairs that can store any custom data about your user. The value of a user attribute can be:A stringA numberA listA boolean value (trueorfalse)null- attributes with anullvalue function as ‘tags’, and can be used to sort your users into categories.
User Attributesare key-value pairs that can store any custom data about your user. The value of a user attribute can be:
null- attributes with anullvalue function as ‘tags’, and can be used to sort your users into categories.
To start capturing data you will need to go back to your app code. Inthe previous stepyou should have installed and initialized the mParticle SDK in at least one of your app platforms. This means you’re already set up to capture Session Start and Session End events, as well as basic data about the device. Grab a friendly developer again, if you need one, and try to add some additional user and event data to your implementation. Here are a few things you might try, with links to the appropriate developer docs:
Add a Customer ID or Email Address for a user.Android/iOS/Web
Create a custom user attribute that tells you something about a user. For example:status: "premium".Android/iOS/Web
Create a page or screen view event that captures the name of a page or screen being viewed.Android/iOS/Web
Create a custom event to track a user action in your app. Include some custom attributes. For example, the mPTravel app sends a custom event when a user views one of its content videos. The event is called “Play Video” and it has two custom attributes: thecategoryof content, and the traveldestinationthe video promotes. Later on, you’ll see how events like these can be used to target custom messaging.Android/iOS/Web
Create a purchase event - track a purchase using mParticle’s commerce APIs.Android/iOS/Web
Verify: Look for incoming data in the Live Stream
Once you’ve added code to your app to start collecting some basic data, start up a development build of your app again and trigger some events. Have another look at the Live Stream. You should start to see new event batches, with the individual events you have added to your app.
If you have at least some data in your Live Stream, such as the session start and session end messages generated in theprevious step, but your screen views, custom events or purchases aren’t showing, it’s likely that there is an issue with your app code.
Check that your code is correctly formed, and that the methods which send events to mParticle are actually triggered by user activity in your app.
Review your development environment’s logs. These will show when an event is sent to mParticle.
Excellent, you’ve started collecting real custom datapoints from your app. At this point you might want to take a quick break to:
Explore the capabilities of theLive Stream
Learn more about theimportance of user identitiesin mParticle.
Now that you’re collecting data, it’s time to send it on byconnecting an event output.
Verify: Look for incoming data in the Live Stream
Do Not Sell or Share My Personal Data
These cookies are necessary for the website to function and cannot be switched off in our systems. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.
Share Or Sale of Personal Data
Under the CPRA, you have the right to opt-out of the sale or sharing of your personal information to third parties. These cookies collect information for analytics and to personalize your experience with targeted ads. You may exercise your right to opt out of the sale or sharing of personal information by using this toggle switch. If you opt out we will not be able to offer you personalized ads and will not hand over your personal information to any third parties. Additionally, you may contact our legal department for further clarification about your rights as a California consumer by using this Exercise My Rights link.If you have enabled privacy controls on your browser (such as a plugin), we have to take that as a valid request to opt-out. Therefore we would not be able to track your activity through the web. This may affect our ability to personalize ads according to your preferences.
Targeting CookiesSwitch LabellabelThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
These cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
Performance CookiesSwitch LabellabelThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
mParticle is a customer data platform (CDP) that simplifies how you collect and connect your user data to hundreds of vendors without needing to manage multiple integrations. We simplify the entire process for you, so you can do more with your data without the hassle of complex integrations.
New to mParticle? Explore our UI with our interactive demo.
Send your first event to mParticle
Forward data to a downstream services
View and enforce your data quality
Transform data as it enters and leaves mParticle
Get a complete view of your users
Ensure compliance with GDPR, CCPA, and your privacy policies
Real-time API to drive user personalization
Do Not Sell or Share My Personal Data
These cookies are necessary for the website to function and cannot be switched off in our systems. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.
Share Or Sale of Personal Data
Under the CPRA, you have the right to opt-out of the sale or sharing of your personal information to third parties. These cookies collect information for analytics and to personalize your experience with targeted ads. You may exercise your right to opt out of the sale or sharing of personal information by using this toggle switch. If you opt out we will not be able to offer you personalized ads and will not hand over your personal information to any third parties. Additionally, you may contact our legal department for further clarification about your rights as a California consumer by using this Exercise My Rights link.If you have enabled privacy controls on your browser (such as a plugin), we have to take that as a valid request to opt-out. Therefore we would not be able to track your activity through the web. This may affect our ability to personalize ads according to your preferences.
Targeting CookiesSwitch LabellabelThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
These cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
Performance CookiesSwitch LabellabelThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
Data Subject Request API Version 1 and 2
Data Subject Request API Version 3
Preventing Blocked HTTP Traffic with CNAME
Preventing Blocked HTTP Traffic with CNAME
Web SDK via Google Tag Manager
Preventing Blocked HTTP Traffic with CNAME
Upgrade to Version 2 of the SDK
Step 3. Set up your output
Step 8. Create a data plan
Step 9. Test your local app
Step 3. Set up your output
Step 8. Create a data plan
Step 3. Set up your output
Step 8. Create a data plan
Migrate from Segment to Client-side mParticle
Migrate from Segment to Server-side mParticle
The Developer's Guided Journey to mParticle
Download an audience from a journey
Audience A/B testing from a journey
Create a Next Best Action (NBA)
Activate Next Best Actions in Campaigns
Usage metering for value-based pricing (VBP)
Sync and Activate Analytics User Segments in mParticle
Apply All for Filter Where Clauses
Date Range and Time Settings Overview
Cumulative vs. Non-Cumulative Analysis in Segmentation
Total Count of vs. Users Who Performed
Time and Interval Settings in Dashboards
Optimize User Flow with A/B Testing
AWS Redshift (Define Your Own Schema)
AWS S3 Integration (Define Your Own Schema)
You can opt in to V5 of the Braze SDK by selecting the version in a connection setting in the mParticle UI.
For more details about upgrading to V5 of the Braze web SDK,follow these instructions, whether you self-host or load mParticle via snippet/CDN..
If you are using version 2 of the @mparticle/web-appboy-kit, you will need totransition to @mparticle/web-braze-kit per the instructions herebefore following the above instructions as well.
Brazeis a comprehensive customer engagement platform that powers relevant experiences between consumers and brands they love. Braze helps brands foster human connection through interactive conversations across channels.
Braze offers a broad range of functionality via their solution and it is critically important that you work directly with your Braze representative to ensure that you are correctly planning and implementing their features.  mParticle does not recommend enabling forwarding to Braze until you have completed the Braze planning process with your Braze team.
ThemParticle SDKallows you to include the Braze kit which allows Braze interface components (images, layout files, etc.) and as a result supports many Braze features, including:
Features are supported by the mParticle SDK only after you install themParticle Braze Kit(formerly Appboy), which then forwards data from your app to Braze.
Features are supported in two ways:
The kit itself provides functionality directly without you having to call the third-party SDK. For example, most partners have a method called or equivalent tologEvent.  When someone callsmParticle.logEvent, our kits map to the partner SDKlogEventmethod, in this case,Braze.logEvent, and automatically sends it to Braze. You don’t have to callBraze.logEventbecause mParticle does it for you after you callmParticle.logEvent.
For some features, for example some Braze banners or modals, you must callBraze.bannerMethod()orBraze.modalMethod(). Our kit loads Braze so that you can call any Braze method you need, even if our kit does not call it for you.
The mParticle S2S APIallows you to send data server side (API reference). The S2S API supports iOS, Android and Web data. In this scenario, mParticle forwards data via Braze’s REST API which supports a limited set of features.
For server-side data to be forwarded to Braze, it must include your selected External Identity Type. To relax this requirement, see the Disable External ID Constraint connection setting.
The following event types can be forwarded to Braze via S2S:
The Braze solution offers features that involve Braze-proprietary user interaction components including Newsfeed, In-App Messaging, and Feedback.
To use Braze with one of the mParticle mobile SDKs, please review the kit documentation for theAndroid SDKor theiOS SDK.
You must directly call the Braze kit to use the Newsfeed, In-App Messaging, and Feedback features. Examples of directly calling a kit are provided for bothAndroidandiOS.
Braze v9 iOS SDK Upgrade Notes
To comply with Apple’s iOS 17 privacy manifest it is required to update to Braze SDK version 9.0.0 or later which is included by the mParticle Braze Kit version 8.60 or later. Note that it is also required to update to at least version 8.24.0 of the mParticle SDK if you are not creating your own Braze instance and passing it to the mParticle Braze Kit in order for this functionality to work.
There are also additional steps required to comply which are outlined in the Braze documentationhere.
If you are creating your own Braze instance and passing it to the mParticle Kit as described in the iOS App Launch Tracking sectionbelow, you can simply follow instructions in the above Braze documentation directly.
If not, you will still need to follow the above Braze documentation, with the following exceptions:
Set thetrackingPropertyAllowListproperty on the mParticle Braze Kit before starting the mParticle SDK instead of setting it on the Braze instance directly.
// In this example, we're setting phone number and email as tracking data.// Replace the values in the allow list with the data you are trackingMPKitAppboy.setBrazeTrackingPropertyAllowList([.email,.dateOfBirth])
// In this example, we're setting phone number and email as tracking data.// Replace the values in the allow list with the data you are trackingMPKitAppboy.setBrazeTrackingPropertyAllowList([.email,.dateOfBirth])
// In this example, we're setting phone number and email as tracking data.// Replace the values in the allow list with the data you are trackingNSSet*allowList=[NSSet setWithArray:@[BRZTrackingProperty.phoneNumber,BRZTrackingProperty.email]];[MPKitAppboy setBrazeTrackingPropertyAllowList:allowList];
// In this example, we're setting phone number and email as tracking data.// Replace the values in the allow list with the data you are trackingNSSet*allowList=[NSSet setWithArray:@[BRZTrackingProperty.phoneNumber,BRZTrackingProperty.email]];[MPKitAppboy setBrazeTrackingPropertyAllowList:allowList];
In yourATTrackingManagerrequest callback, call the corresponding method on the mParticle SDK instead of setting it on the Braze instance directly.
[ATTrackingManager requestTrackingAuthorizationWithCompletionHandler:^(ATTrackingManagerAuthorizationStatus status){MPATTAuthorizationStatus mpStatus=(MPATTAuthorizationStatus)status;NSNumber*timestampMillis=@(NSDate.now.timeIntervalSince1970*1000);[MParticle.sharedInstance setATTStatus:mpStatus withATTStatusTimestampMillis:timestampMillis];}];
[ATTrackingManager requestTrackingAuthorizationWithCompletionHandler:^(ATTrackingManagerAuthorizationStatus status){MPATTAuthorizationStatus mpStatus=(MPATTAuthorizationStatus)status;NSNumber*timestampMillis=@(NSDate.now.timeIntervalSince1970*1000);[MParticle.sharedInstance setATTStatus:mpStatus withATTStatusTimestampMillis:timestampMillis];}];
Push notifications work differently for web and for mobile.
mParticle integrates with Braze to allow web push notifications to further engage your visitors. We integrated Braze’sSoft Push Prompts, which allows you to ask your user if they’d like to stay in touch before the browser alerts them to allow notifications. This is done since the browser throttles how often you can prompt the user for push notifications, and if the user denies permission, you can never ask them again. See below for directions on how to implement push notifications, which customizes Braze’simplementation instructionsto work with mParticle.
Configure your siteCreate aservice-worker.jsfile to your root directory. Inside yourservice-worker.jsfile, includeself.importScripts('https://static.mparticle.com/sdk/js/braze/service-worker-3.5.0.js');mParticle hosts Braze’s service worker in order to prevent unpredictable versioning issues. Do not use Braze’s service-worker.js CDN.
Create aservice-worker.jsfile to your root directory. Inside yourservice-worker.jsfile, include
mParticle hosts Braze’s service worker in order to prevent unpredictable versioning issues. Do not use Braze’s service-worker.js CDN.
Configure Safari PushGenerate a Safari Push Certificate following these “Registering with Apple” InstructionsIn the Braze dashboard, on theapp settings page(where your API keys are located), select your Web app. Click “Configure Safari Push” and follow the instructions, uploading the push certificate you just generated.In your mParticle dashboard, open your Braze connection settings. UnderSafari Website Push ID, type in yourWebsite Push IDyou used when generating your Safari Push Certificate (beginning withweb) and clickSave.
Generate a Safari Push Certificate following these “Registering with Apple” Instructions
In the Braze dashboard, on theapp settings page(where your API keys are located), select your Web app. Click “Configure Safari Push” and follow the instructions, uploading the push certificate you just generated.
In your mParticle dashboard, open your Braze connection settings. UnderSafari Website Push ID, type in yourWebsite Push IDyou used when generating your Safari Push Certificate (beginning withweb) and clickSave.
Create a “Prime for Push” in-app messaging Campaign on the Braze dashboard. Note that this is anIn-App MessagingCampaign, and not aPush Notificationmessaging campaign.Make it a “Modal” In-App Message. Give it whatever text and styling you wish to present to the user (“Can we stay in touch?”).Give the in-app message a Button 1 Text value of “OK” (or whatever affirmative text you wish), and set the On-Click Behavior to “Close Message.”Under the gear composer section, add a key-value pair. Give it a key ofmsg-idand a value ofpush-primer.You can create aprime-for-pushcustom event (or name it whatever you’d like) from the Braze dashboard. While still in the Braze dashboard, create a trigger action of whatever your custom event is (ie,prime-for-push). In the mParticle Braze connection settings, fill in the"Soft Push" Custom Event Namewith your custom event name (ie.prime-for-push). When this field is filled, users will be sent the Soft Push Prompt on session load.Optionally, you can change the name and location ofservice-worker.js. The following example will clarify the steps:Let’s say that you want to rename yourservice-worker.jsfile tobraze-push-worker.jsand store it in inside a directory in your root folder calledthirdParty/.In your mParticle dashboard, open your Braze connection settings. UnderPush Notification Service Worker File Location, type in/thirdParty/braze-push-worker.jsand clickSave.Warning- Setting a value here limits the scope of push notifications on your site. For instance, in the above example, because the service worker file is located within the/thirdParty/directory, asking for push notifications MAY ONLY BE CALLED from web pages that start withhttp://your-site-name.com/thirdParty/.
Create a “Prime for Push” in-app messaging Campaign on the Braze dashboard. Note that this is anIn-App MessagingCampaign, and not aPush Notificationmessaging campaign.
Make it a “Modal” In-App Message. Give it whatever text and styling you wish to present to the user (“Can we stay in touch?”).
Give the in-app message a Button 1 Text value of “OK” (or whatever affirmative text you wish), and set the On-Click Behavior to “Close Message.”
Under the gear composer section, add a key-value pair. Give it a key ofmsg-idand a value ofpush-primer.
You can create aprime-for-pushcustom event (or name it whatever you’d like) from the Braze dashboard. While still in the Braze dashboard, create a trigger action of whatever your custom event is (ie,prime-for-push). In the mParticle Braze connection settings, fill in the"Soft Push" Custom Event Namewith your custom event name (ie.prime-for-push). When this field is filled, users will be sent the Soft Push Prompt on session load.
Optionally, you can change the name and location ofservice-worker.js. The following example will clarify the steps:Let’s say that you want to rename yourservice-worker.jsfile tobraze-push-worker.jsand store it in inside a directory in your root folder calledthirdParty/.In your mParticle dashboard, open your Braze connection settings. UnderPush Notification Service Worker File Location, type in/thirdParty/braze-push-worker.jsand clickSave.Warning- Setting a value here limits the scope of push notifications on your site. For instance, in the above example, because the service worker file is located within the/thirdParty/directory, asking for push notifications MAY ONLY BE CALLED from web pages that start withhttp://your-site-name.com/thirdParty/.
Optionally, you can change the name and location ofservice-worker.js. The following example will clarify the steps:
Let’s say that you want to rename yourservice-worker.jsfile tobraze-push-worker.jsand store it in inside a directory in your root folder calledthirdParty/.
In your mParticle dashboard, open your Braze connection settings. UnderPush Notification Service Worker File Location, type in/thirdParty/braze-push-worker.jsand clickSave.
Push Notification Service Worker File Location
Warning- Setting a value here limits the scope of push notifications on your site. For instance, in the above example, because the service worker file is located within the/thirdParty/directory, asking for push notifications MAY ONLY BE CALLED from web pages that start withhttp://your-site-name.com/thirdParty/.
Firefox - starting with version 72, Firefox requires user interaction before showing a full push permission dialogue box. Seeherefor more details.
Ensure that your OS-wide notifications for the browser you are testing are not disabled.
If you have previously allowed or rejected push requests while testing, you will need to clear local storage/cookies as well as the browser’s notification preference for your development URL for optimal testing.
As long as the Braze Kit is included in your app, mParticle will pass any Push Notifications from Braze to the kit for display. However, you will need to provide credentials in the Braze dashboard.
See the mainiOSandAndroidPush Notification documentation for more detail.
On iOS, when a user launches your app by tapping on a push notification, you may see these launches recorded in the mParticle dashboard but not in Braze. This happens due to a race condition between the Braze SDK initializing and the app handling the push notification.
To work around this, you’ll need to create your own instance of Braze in yourapplicationDidFinishLaunchingmethod of your app delegate and pass it to the Braze kit before initializing the mParticle SDK. You’ll also need to tell the kit not to process push notifications and instead handle them yourself. This ensures that Braze is initialized and ready to receive the push notifications immediately upon app launch.
Note that by implementing your own instance of Braze, you will lose the ability to use the following Braze configuration options in the mParticle dashboard, as you’ll be passing those options to Braze yourself on app launch. Only implement this if you need push notification app launches reported to Braze:
Braze SDK Minimum Time Interval Between Triggers
Braze SDK Disable Automatic Location Tracking
All other Braze configuration options in the mParticle dashboard will continue to work as usual, and any of the above can be set in your app when you create the Braze instance by setting the relevant options on the Braze configuration object. See the example code for thedidFinishLaunchingWithOptionsmethod below.
The following is mostly following the instructions fromBraze’s “Manual push integration”documentation, with the addition of some mParticle specific code in thedidFinishLaunchingWithOptionsmethod.
Please note that because we are following Braze’s“Manual push integration”instructions, you should not set the configuration option,configuration.push.automation = true, as described in Braze’sAutomatic push integrationdocumentation as it will cause conflicts.
Make sure to import the Braze SDK and mParticle Braze kit in your app delegate file.
Create and configure a Braze instance immediately upon app launch and pass it to the Braze kit.
varbraze:Braze?=nilfuncapplication(_application:UIApplication,didFinishLaunchingWithOptions launchOptions:[UIApplication.LaunchOptionsKey:Any]?)->Bool{// Register for remote notificationsapplication.registerForRemoteNotifications()letcenter=UNUserNotificationCenter.current()center.setNotificationCategories(Braze.Notifications.categories)center.delegate=self// Request user authorization to send push notificationsvaroptions:UNAuthorizationOptions=[.alert,.sound,.badge]if#available(iOS12.0,*){options=UNAuthorizationOptions(rawValue:options.rawValue|UNAuthorizationOptions.provisional.rawValue)}center.requestAuthorization(options:options){granted,errorinprint("Notification authorization, granted:\(granted), error:\(String(describing:error))")}// Create the Braze configuration object// API key and endpoint were previously configured in the mParticle dashboardletconfiguration=Braze.Configuration(apiKey:"[YOUR_BRAZE_API_KEY]",endpoint:"[YOUR_BRAZE_ENDPOINT]")configuration.api.addSDKMetadata([.mparticle])configuration.api.sdkFlavor=.mparticle// Default mParticle dashboard optionsconfiguration.location.automaticLocationCollection=true// Optionally set any additional configuration options you would like here// Create a Braze instance with your chosen configuration and store the referenceletbraze=Braze(configuration:configuration)self.braze=braze// Pass the instance to the mParticle Braze kit so it can be used for other Braze functionalityMPKitAppboy.setBrazeInstance(braze)// Instruct the mParticle Braze kit to not handle push notifications, as they'll be handled in the app delegateMPKitAppboy.setShouldDisableNotificationHandling(true)// Place your existing application initialization code here}
varbraze:Braze?=nilfuncapplication(_application:UIApplication,didFinishLaunchingWithOptions launchOptions:[UIApplication.LaunchOptionsKey:Any]?)->Bool{// Register for remote notificationsapplication.registerForRemoteNotifications()letcenter=UNUserNotificationCenter.current()center.setNotificationCategories(Braze.Notifications.categories)center.delegate=self// Request user authorization to send push notificationsvaroptions:UNAuthorizationOptions=[.alert,.sound,.badge]if#available(iOS12.0,*){options=UNAuthorizationOptions(rawValue:options.rawValue|UNAuthorizationOptions.provisional.rawValue)}center.requestAuthorization(options:options){granted,errorinprint("Notification authorization, granted:\(granted), error:\(String(describing:error))")}// Create the Braze configuration object// API key and endpoint were previously configured in the mParticle dashboardletconfiguration=Braze.Configuration(apiKey:"[YOUR_BRAZE_API_KEY]",endpoint:"[YOUR_BRAZE_ENDPOINT]")configuration.api.addSDKMetadata([.mparticle])configuration.api.sdkFlavor=.mparticle// Default mParticle dashboard optionsconfiguration.location.automaticLocationCollection=true// Optionally set any additional configuration options you would like here// Create a Braze instance with your chosen configuration and store the referenceletbraze=Braze(configuration:configuration)self.braze=braze// Pass the instance to the mParticle Braze kit so it can be used for other Braze functionalityMPKitAppboy.setBrazeInstance(braze)// Instruct the mParticle Braze kit to not handle push notifications, as they'll be handled in the app delegateMPKitAppboy.setShouldDisableNotificationHandling(true)// Place your existing application initialization code here}
// In the app delegate class header//@interfaceAppDelegate()<UNUserNotificationCenterDelegate>@property(nonatomic,strong)Braze*braze;@end// In the app delegate class implementation//-(BOOL)application:(UIApplication*)application didFinishLaunchingWithOptions:(NSDictionary*)launchOptions{// Register for remote notifications[application registerForRemoteNotifications];UNUserNotificationCenter*center=UNUserNotificationCenter.currentNotificationCenter;[center setNotificationCategories:BRZNotifications.categories];center.delegate=self;// Request user authorization to send push notificationsUNAuthorizationOptions options=UNAuthorizationOptionAlert|UNAuthorizationOptionSound|UNAuthorizationOptionBadge;if(@available(iOS12.0,*)){options=options|UNAuthorizationOptionProvisional;}[center requestAuthorizationWithOptions:options completionHandler:^(BOOL granted,NSError*_Nullable error){NSLog(@"Notification authorization, granted: %d, error: %@)",granted,error);}];// Create the Braze configuration object// API key and endpoint were previously configured in the mParticle dashboardBRZConfiguration*configuration=[[BRZConfiguration alloc]initWithApiKey:@"[YOUR_BRAZE_API_KEY]"endpoint:@"[YOUR_BRAZE_ENDPOINT]"];[configuration.api addSDKMetadata:@[BRZSDKMetadata.mparticle]];configuration.api.sdkFlavor=BRZSDKFlavorMparticle;// Default mParticle dashboard optionsconfiguration.location.automaticLocationCollection=YES;// Optionally set any additional configuration options you would like here// Create a Braze instance with your chosen configuration and store the referenceself.braze=[[Braze alloc]initWithConfiguration:configuration];// Pass the instance to the mParticle Braze kit so it can be used for other Braze functionality[MPKitAppboy setBrazeInstance:self.braze];// Instruct the mParticle Braze kit to not handle push notifications, as they'll be handled in the app delegate[MPKitAppboy setShouldDisableNotificationHandling:YES];// Place your existing application initialization code here}
// In the app delegate class header//@interfaceAppDelegate()<UNUserNotificationCenterDelegate>@property(nonatomic,strong)Braze*braze;@end// In the app delegate class implementation//-(BOOL)application:(UIApplication*)application didFinishLaunchingWithOptions:(NSDictionary*)launchOptions{// Register for remote notifications[application registerForRemoteNotifications];UNUserNotificationCenter*center=UNUserNotificationCenter.currentNotificationCenter;[center setNotificationCategories:BRZNotifications.categories];center.delegate=self;// Request user authorization to send push notificationsUNAuthorizationOptions options=UNAuthorizationOptionAlert|UNAuthorizationOptionSound|UNAuthorizationOptionBadge;if(@available(iOS12.0,*)){options=options|UNAuthorizationOptionProvisional;}[center requestAuthorizationWithOptions:options completionHandler:^(BOOL granted,NSError*_Nullable error){NSLog(@"Notification authorization, granted: %d, error: %@)",granted,error);}];// Create the Braze configuration object// API key and endpoint were previously configured in the mParticle dashboardBRZConfiguration*configuration=[[BRZConfiguration alloc]initWithApiKey:@"[YOUR_BRAZE_API_KEY]"endpoint:@"[YOUR_BRAZE_ENDPOINT]"];[configuration.api addSDKMetadata:@[BRZSDKMetadata.mparticle]];configuration.api.sdkFlavor=BRZSDKFlavorMparticle;// Default mParticle dashboard optionsconfiguration.location.automaticLocationCollection=YES;// Optionally set any additional configuration options you would like here// Create a Braze instance with your chosen configuration and store the referenceself.braze=[[Braze alloc]initWithConfiguration:configuration];// Pass the instance to the mParticle Braze kit so it can be used for other Braze functionality[MPKitAppboy setBrazeInstance:self.braze];// Instruct the mParticle Braze kit to not handle push notifications, as they'll be handled in the app delegate[MPKitAppboy setShouldDisableNotificationHandling:YES];// Place your existing application initialization code here}
Add the required push notification delegate methods
funcapplication(_application:UIApplication,didRegisterForRemoteNotificationsWithDeviceToken deviceToken:Data){self.braze?.notifications.register(deviceToken:deviceToken)}funcapplication(_application:UIApplication,didReceiveRemoteNotification userInfo:[AnyHashable:Any],fetchCompletionHandler completionHandler:@escaping(UIBackgroundFetchResult)->Void){ifletbraze=self.braze,braze.notifications.handleBackgroundNotification(userInfo:userInfo,fetchCompletionHandler:completionHandler){return}completionHandler(.noData)}//...//extensionAppDelegate:UNUserNotificationCenterDelegate{funcuserNotificationCenter(_center:UNUserNotificationCenter,didReceive response:UNNotificationResponse,withCompletionHandler completionHandler:@escaping()->Void){ifletbraze=self.braze,braze.notifications.handleUserNotification(response:response,withCompletionHandler:completionHandler){return}completionHandler()}funcuserNotificationCenter(_center:UNUserNotificationCenter,willPresent notification:UNNotification,withCompletionHandler completionHandler:@escaping(UNNotificationPresentationOptions)->Void){if#available(iOS14,*){completionHandler([.list,.banner])}else{completionHandler(.alert)}}}
funcapplication(_application:UIApplication,didRegisterForRemoteNotificationsWithDeviceToken deviceToken:Data){self.braze?.notifications.register(deviceToken:deviceToken)}funcapplication(_application:UIApplication,didReceiveRemoteNotification userInfo:[AnyHashable:Any],fetchCompletionHandler completionHandler:@escaping(UIBackgroundFetchResult)->Void){ifletbraze=self.braze,braze.notifications.handleBackgroundNotification(userInfo:userInfo,fetchCompletionHandler:completionHandler){return}completionHandler(.noData)}//...//extensionAppDelegate:UNUserNotificationCenterDelegate{funcuserNotificationCenter(_center:UNUserNotificationCenter,didReceive response:UNNotificationResponse,withCompletionHandler completionHandler:@escaping()->Void){ifletbraze=self.braze,braze.notifications.handleUserNotification(response:response,withCompletionHandler:completionHandler){return}completionHandler()}funcuserNotificationCenter(_center:UNUserNotificationCenter,willPresent notification:UNNotification,withCompletionHandler completionHandler:@escaping(UNNotificationPresentationOptions)->Void){if#available(iOS14,*){completionHandler([.list,.banner])}else{completionHandler(.alert)}}}
-(void)application:(UIApplication*)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData*)deviceToken{[self.braze.notifications registerDeviceToken:deviceToken];}-(void)application:(UIApplication*)application didReceiveRemoteNotification:(NSDictionary*)userInfo fetchCompletionHandler:(void(^)(UIBackgroundFetchResult))completionHandler{BOOL processedByBraze=self.braze!=nil&&[self.braze.notifications handleBackgroundNotificationWithUserInfo:userInfo fetchCompletionHandler:completionHandler];if(processedByBraze){return;}completionHandler(UIBackgroundFetchResultNoData);}//...//-(void)userNotificationCenter:(UNUserNotificationCenter*)center didReceiveNotificationResponse:(UNNotificationResponse*)response withCompletionHandler:(void(^)(void))completionHandler{BOOL processedByBraze=self.braze!=nil&&[self.braze.notifications handleUserNotificationWithResponse:response withCompletionHandler:completionHandler];if(processedByBraze){return;}completionHandler();}-(void)userNotificationCenter:(UNUserNotificationCenter*)center willPresentNotification:(UNNotification*)notification withCompletionHandler:(void(^)(UNNotificationPresentationOptions))completionHandler{if(@available(iOS14.0,*)){completionHandler(UNNotificationPresentationOptionList|UNNotificationPresentationOptionBanner);}else{completionHandler(UNNotificationPresentationOptionAlert);}}
-(void)application:(UIApplication*)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData*)deviceToken{[self.braze.notifications registerDeviceToken:deviceToken];}-(void)application:(UIApplication*)application didReceiveRemoteNotification:(NSDictionary*)userInfo fetchCompletionHandler:(void(^)(UIBackgroundFetchResult))completionHandler{BOOL processedByBraze=self.braze!=nil&&[self.braze.notifications handleBackgroundNotificationWithUserInfo:userInfo fetchCompletionHandler:completionHandler];if(processedByBraze){return;}completionHandler(UIBackgroundFetchResultNoData);}//...//-(void)userNotificationCenter:(UNUserNotificationCenter*)center didReceiveNotificationResponse:(UNNotificationResponse*)response withCompletionHandler:(void(^)(void))completionHandler{BOOL processedByBraze=self.braze!=nil&&[self.braze.notifications handleUserNotificationWithResponse:response withCompletionHandler:completionHandler];if(processedByBraze){return;}completionHandler();}-(void)userNotificationCenter:(UNUserNotificationCenter*)center willPresentNotification:(UNNotification*)notification withCompletionHandler:(void(^)(UNNotificationPresentationOptions))completionHandler{if(@available(iOS14.0,*)){completionHandler(UNNotificationPresentationOptionList|UNNotificationPresentationOptionBanner);}else{completionHandler(UNNotificationPresentationOptionAlert);}}
The Braze kits foriOSandAndroidsupport Braze’s automatic location tracking features, provided that the appropriate app-level permissions are granted by the user.
For Android push notifications you will need to provide your Server Key in your app settings page underPush Notification Settings.
For iOS push notifications you will need to upload your APNs Push SSL certificate to Braze. See theBraze documentationfor more.
Special Considerations for mParticle A/B Testing With Braze and the mParticle SDK
mParticle supports the ability to conduct A/B testing with different integrations by sending a sample of users and their data to one integration and a different sample of users and their data to a different integration.  If you are using the mParticle SDK for Braze deploymentandcalling Braze methods directly, when instrumenting with the mParticle SDKyou must ensure that the Braze kit is active in the App before calling a Braze method.  This is very important and ensures that you are not inadvertently calling Braze methods for apps/users that are not part of an Braze A/B sample.
mParticle supports the ability to forward server-side events for the Roku platform. Note that only data that includes your selected External Identity Type can be forwarded to Braze.
mParticle will always forward events if sent via the mParticle SDK, provided you have included the Braze kit, but will only forward events sent via the mParticle S2S API if the following conditions apply:
The App Group REST API Key setting is specified.
Either your set External Identity Type, or a push token is specified.
Braze haslimits on the number of characters in a property key- they must be less than or equal to 255 characters, with no leading dollar signs. When forwarding via a client-side kit, mParticle will remove the dollar sign ($) when forwarding property keys for user attributes, custom, and e-commerce events. When forwarding server-to-server, mParticle will remove the dollar sign ($) from mParticle reserved attributes.
Braze maintains several instances.   As part of theConfiguration Settings, you need to specify which one your data should be forwarded to.  You can tell yourBraze Instancefrom the URL of your Braze Dashboard.
Check with your Braze account manager if you are unsure which Braze instance you are using.
There is also the ability to specify a Custom instance, which allows you to specify separate endpoints for REST, SDK and Javascript.
Usinghttps://or a trailing/in your endpoint address will cause errors.
In order to activate the Braze integration, you will need your Braze App Identifier API key and your “App Group REST API Key” if using the S2S API.
Click on Developer Console in the left navigation, then API Settings, Identification, and choose the Identifier for the platform you’re building to.
If you are sending data to mParticle via the S2S API, your “App Group REST API Key” value is required.  Click on the Developer Console in the left navigation to get this value.
Depending on the setting value forBundle Commerce Event Data(seeConnection Settingsfor more), Commerce Events may be expanded based on the number of products, promotions, or impressions, respectively. Ex:
Iffalse, a single incoming event with 2 unique products/promotions/impressions would result in at least 2 outgoing Braze events.
Intrue, a single incoming event with 2 unique products/promotions/impressions would result in 1 outgoing event with a nestedproducts[],promotions[]orimpressions[]array, respectively.
A purchase event is mapped and optionally-expanded to Braze purchase event(s) as described above.
In addition to theCommon Commerce Fields, the following information is also captured, if defined:
All other product-based commerce event types are mapped and optionally-expanded to Braze custom event(s) as described above. Note:
If expansion is active and it’s a refund, an additional event representing thetotalis also generated.
As such, all relevant product and transaction information is conveyed via thepropertiesfield.
In addition to theCommon Commerce Fields, the following information is also captured, if defined:
All product-based commerce events, regardless of type, capture these common fields in thepropertiesdictionary in the following way:
Note: For web kit data, in order to forward theTransactionId, you must include thetransactionAttributesas the fifth argument below. See ourAPI docsfor how to build transaction attributes.
mParticle.eCommerce.logProductAction(mParticle.ProductActionType.AddToCart,[product1,product2],customAttributes,customFlags,//can also be `null`, but can't be blanktransactionAttributes);
mParticle.eCommerce.logProductAction(mParticle.ProductActionType.AddToCart,[product1,product2],customAttributes,customFlags,//can also be `null`, but can't be blanktransactionAttributes);
Whenpromotionsare expanded, eachpromotionis converted to its own outgoing Braze event.
Alternatively, if expansion isn’t toggled,promotionsare included in a nested collection in a single outgoing Braze event.
Whenimpressionsare expanded, eachproductfrom eachimpressionis converted to its own outgoing Braze event.
Alternatively, if expansion isn’t toggled,impressionsand their associatedproductsare included in a nested collection in a single outgoing Braze event.
Your screen view events will be passed to Braze using the screen name that you passed to ourlogScreenSDK method, as the event name.
If you are using automatic screen tracking in our Android SDK, the automatically-generated screen view events will be forwarded to Braze using the name of the associated Activity class.
To send session start and end events for S2S to Braze, enable theForward Session Eventsconnection setting. After enabling this setting, session start and end events are forwarded to Braze as custom events with the namesSession StartandSession End. When available, session IDs are also sent in thesession_idproperty on all session starts and ends, screen view, and custom events.
However, note that mParticle SDK kits do not support session events, which are never forwarded with a kit, whether or notForward Session Eventsis enabled.
All custom events will be forwarded to Braze using the event name that you passed to yourlogEventSDK method.  All event attributes will be forwarded to Braze as Braze custom event properties using the attribute names you passed to yourlogEventSDK method as well.
Note: Braze documentation indicates that the following reserved keywords can’t be used as custom event properties:
To learn more, visit the Braze documentation:
The table below describes how the mParticle integration maps user attributes to Braze’s profile attributes.
Braze advises tocoerce data typeson user attributes shared with Braze before sending Production volume data. This ensures that the custom attributes received by Braze are of the expected data type. This can impact segment building and triggering campaigns.  If incorrect data types are identified after data has been flowing, there can be extra work to true up the users with the legacy data type on those attributes.  To give Braze’s type detection a better opportunity to evaluate data types properly, you can enable the following 2 Connection Settings:Enable API Custom Attribute Type DetectionandEnable Kit Custom Attribute Type Detection.
Enable API Custom Attribute Type Detection
Enable Kit Custom Attribute Type Detection
By default, mParticle forwards all available user attributes and user identities to Braze, including attributes added during profile enrichment. You can disable this behavior in theConnection Settings.   Only data which is sent to Braze Server to Server can be enriched.
A User Attribute can be mapped to a Braze Subscription Group ID. Requests sent to mParticle containing the mapped User Attribute, with a validtrueorfalsevalue, will determine if the user in the request should be subscribed (true) or unsubscribed (false) from the group. This allows for dynamic subscription management based on user attributes.
Create the Subscription Group in Braze, if it doesn’t already exist.
Map the desired User Attribute to the Subscription Group ID in the mParticle dashboard.Note that the User Attribute must be sent to mParticle at least once before it is available for mapping.
Map the desired User Attribute to the Subscription Group ID in the mParticle dashboard.
Note that the User Attribute must be sent to mParticle at least once before it is available for mapping.
Send the mapped User Attribute on your event batch to mParticle with a boolean value.true: User will be subscribed to the Braze Subscription Group.false: User will be unsubscribed from the Braze Subscription Group.Other non-boolean values will be ignored.
Send the mapped User Attribute on your event batch to mParticle with a boolean value.
true: User will be subscribed to the Braze Subscription Group.
false: User will be unsubscribed from the Braze Subscription Group.
Other non-boolean values will be ignored.
A misconfigured Subscription Group mapping can affect how your data is forwarded to Braze. If you notice your Subscription Groups are not being updated, check the following:
Invalid Subscription Group ID: Ensure the mapped Subscription Group IDs are correct in your Connection Settings.
Deleted Subscription Group: If a Subscription Group is deleted in Braze, you must update or remove the mapping in the mParticle dashboard.
Invalid User Attribute: Ensure the mapped User Attribute is being sent to mParticle with a boolean value.
Please note that Braze will only return an error in these cases when the Subscription Group attribute update is theonlyitem in the request sent to Braze. If the request contains valid events and/or purchases, Braze will process these and skip the Subscription Group update. This also means that you will only see Subscription Group errors in theSystem Alertspage when the invalid Subscription Group update is theonlyitem in the request.
Braze uses the$google_ad_user_dataand$google_ad_personalizationcustom attribute keys to receive consent status for Google’s EU User Consent Policy. The Boolean sent to these keys signify that a user has granted or denied consent to a marketer. As per theirCollecting consent for EEA, UK, and Switzerland end usersdocumentation, this value must be sent to Google as a Custom Attribute.
To configure user consent forwarding under this value, a mapping should be set-up leveraging mParticle’s notion of Consent Purposes. To learn more about handling user consent within mParticle’s platform, see the following docs:Data Privacy Controls.
Once a Consent Purpose is set up, user consent information can be associated with it in subsequent Event Batches. The Consent Purpose data mapping can then be configured for downstream forwarding via the Consent Mapping connection setting.
Braze Web Kit Critical Updates and Timelines
Braze occasionally makes breaking changes to their SDK, so if you call Braze directly in your code, you will have to update your code to ensure your website performs as expected when updating versions of Braze.
Opt In to Braze SDK Version 5
We recommend you use version 5 of the Braze SDK.  You only need to make code changes if you directly call the Braze SDK from your code. Otherwise, you can simply selectVersion 5from the mParticle connection settings.
If you are upgrading from V3, you should check the breaking changes from theBraze V4 Changelogas well asBraze V5 Changelog, in addition to theV4/5 migration guideto learn about the breaking changes.  The most significant breaking changes are the replacement of theappboyclass name withbrazefrom V3 to V4, in addition to the removal and renaming of several APIs.  If you are updating from V4 to V5, there are fewer changes, but you’d follow the same defensive code recommendations below.
You can opt into the latest major version of the Braze Web SDK whether you implement mParticle’s Web SDK using npm or our snippet/CDN.
Customers who self-host mParticle via npm - You should add @mparticle/web-braze-kit version 5.0.0 or greater in your package.json.  You must also selectVersion 5underBraze Web SDK Versionin the Braze connection settings.
Customers who load mParticle via snippet/CDN - You must  selectVersion 5underBraze Web SDK Versionin the Braze connection settings.
Note that the following is only one example, and demonstrates an upgrade from V3 to V5.  Everywhere you manually callappboy(or other deprecated API) needs to be updated similar to the below. If you are using NPM, you can skip to step 4.  Please be sure to test your site fully in development prior to releasing.
Step 1: Legacy code sample. Find all the places where your code references theappboy.displaynamespace.  Braze has removed all instances of thedisplaynamespace:
Step 2: Roll out code changes to be used before you opt in to using Version 4 of the Braze Web SDK so that it works under both versions:
Step 3: Whether you are using the snippet or self-hosting, you need to navigate to your Braze connection settings and selectVersion 5from theBraze Web SDK Versiondrop down.
Step 4: After you opt in, you can simplify your code. We recommend testing and waiting at least 24 hours between opting in and removing previous instances ofappboyand doing thorough testing of your application in a development environment to ensure everything is working:
Step 4: Push Notifications via service-worker.js
If you use Push Notifications, we have updated theservice-worker.jsfile.  In our testing, Braze’s push notifications work as expected regardless of what version of the service-worker is used, but we recommend updating this file to ensure future compatibility.  In yourservice-worker.jsfile, update the code to referencehttps://static.mparticle.com/sdk/js/braze/service-worker-5.5.0.jsinstead ofhttps://static.mparticle.com/sdk/js/braze/service-worker-3.5.0.js.  Yourservice-worker.jsfile should now contain:
The legacy @mparticle/web-appboy-kit from NPM includes version 2 of the Braze Web SDK.  As part of this update, we’ve created a newBraze web kit repoto replace our deprecatedAppboy web kit repo.  If you are still using@mparticle/web-appboy-kit, you will need to consider the breaking changes Braze made between V2 and V3 of the Braze SDK (foundhere) as well as the instructions above to get from V2 to V5 of the Braze SDK.
Braze Web Kit Critical Updates and Timelines
Opt In to Braze SDK Version 5
Do Not Sell or Share My Personal Data
These cookies are necessary for the website to function and cannot be switched off in our systems. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.
Share Or Sale of Personal Data
Under the CPRA, you have the right to opt-out of the sale or sharing of your personal information to third parties. These cookies collect information for analytics and to personalize your experience with targeted ads. You may exercise your right to opt out of the sale or sharing of personal information by using this toggle switch. If you opt out we will not be able to offer you personalized ads and will not hand over your personal information to any third parties. Additionally, you may contact our legal department for further clarification about your rights as a California consumer by using this Exercise My Rights link.If you have enabled privacy controls on your browser (such as a plugin), we have to take that as a valid request to opt-out. Therefore we would not be able to track your activity through the web. This may affect our ability to personalize ads according to your preferences.
Targeting CookiesSwitch LabellabelThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
These cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
Performance CookiesSwitch LabellabelThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
mParticle is a customer data platform (CDP) that simplifies how you collect and connect your user data to hundreds of vendors without needing to manage multiple integrations. We simplify the entire process for you, so you can do more with your data without the hassle of complex integrations.
New to mParticle? Explore our UI with our interactive demo.
Send your first event to mParticle
Forward data to a downstream services
View and enforce your data quality
Transform data as it enters and leaves mParticle
Get a complete view of your users
Ensure compliance with GDPR, CCPA, and your privacy policies
Real-time API to drive user personalization
Do Not Sell or Share My Personal Data
These cookies are necessary for the website to function and cannot be switched off in our systems. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.
Share Or Sale of Personal Data
Under the CPRA, you have the right to opt-out of the sale or sharing of your personal information to third parties. These cookies collect information for analytics and to personalize your experience with targeted ads. You may exercise your right to opt out of the sale or sharing of personal information by using this toggle switch. If you opt out we will not be able to offer you personalized ads and will not hand over your personal information to any third parties. Additionally, you may contact our legal department for further clarification about your rights as a California consumer by using this Exercise My Rights link.If you have enabled privacy controls on your browser (such as a plugin), we have to take that as a valid request to opt-out. Therefore we would not be able to track your activity through the web. This may affect our ability to personalize ads according to your preferences.
Targeting CookiesSwitch LabellabelThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
These cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
Performance CookiesSwitch LabellabelThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
Connect your customer data to the leading marketing, analytics, and data warehousing solutions with just a few clicks.
Do Not Sell or Share My Personal Data
These cookies are necessary for the website to function and cannot be switched off in our systems. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.
Share Or Sale of Personal Data
Under the CPRA, you have the right to opt-out of the sale or sharing of your personal information to third parties. These cookies collect information for analytics and to personalize your experience with targeted ads. You may exercise your right to opt out of the sale or sharing of personal information by using this toggle switch. If you opt out we will not be able to offer you personalized ads and will not hand over your personal information to any third parties. Additionally, you may contact our legal department for further clarification about your rights as a California consumer by using this Exercise My Rights link.If you have enabled privacy controls on your browser (such as a plugin), we have to take that as a valid request to opt-out. Therefore we would not be able to track your activity through the web. This may affect our ability to personalize ads according to your preferences.
Targeting CookiesSwitch LabellabelThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
These cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
Performance CookiesSwitch LabellabelThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
Data Subject Request API Version 1 and 2
Data Subject Request API Version 3
Preventing Blocked HTTP Traffic with CNAME
Preventing Blocked HTTP Traffic with CNAME
Web SDK via Google Tag Manager
Preventing Blocked HTTP Traffic with CNAME
Upgrade to Version 2 of the SDK
Step 3. Set up your output
Step 8. Create a data plan
Step 9. Test your local app
Step 3. Set up your output
Step 8. Create a data plan
Step 3. Set up your output
Step 8. Create a data plan
Migrate from Segment to Client-side mParticle
Migrate from Segment to Server-side mParticle
The Developer's Guided Journey to mParticle
Download an audience from a journey
Audience A/B testing from a journey
Create a Next Best Action (NBA)
Activate Next Best Actions in Campaigns
Usage metering for value-based pricing (VBP)
Sync and Activate Analytics User Segments in mParticle
Apply All for Filter Where Clauses
Date Range and Time Settings Overview
Cumulative vs. Non-Cumulative Analysis in Segmentation
Total Count of vs. Users Who Performed
Time and Interval Settings in Dashboards
Optimize User Flow with A/B Testing
AWS Redshift (Define Your Own Schema)
AWS S3 Integration (Define Your Own Schema)
The Profile API can be used to query identities, user attributes, audience memberships, and other data available on an mParticle User Profile, anywhere you can make an HTTP request. Profile API can be used to drive one-to-one personalized experiences for your users across any channel:
Deliver customized product or content recommendations
Identify churn-risk customers in an automated voice support flow and launch a win-back campaign.
Deliver personalized offers in brick and mortar stores by integrating your point-of-sale systems.
The base URL for the Profile API ishttps://api.mparticle.com.
The Profile API is authenticated with a bearer token. To create a bearer token, first create a set of API credentials in the UI.
Log in to your mParticle account.
Click theUser Profileicon at the bottom of the left nav bar, clickSettings, and select the API Credentials tab.
Enter a descriptive name for the Display name.
Check the box next toProfile API, and then expand the available workspaces by clicking the+button. Check the box next to each workspace you need to access user profile data for.
ClickSave, and copy the Client ID and Client Secret displayed in the modal window before clickingDone.
To create a bearer token, send a POST request to mParticle’s SSO token endpoint athttps://sso.auth.mparticle.com/oauth/token.
The JSON body of the request must contain:
client_id- the client ID, issued by mParticle when creating the API credentials
client_secret- the client secret, issued by mParticle when creating the API credentials
audience- set to a value of"https://api.mparticle.com"
grant_type- set to a value of"client_credentials"
POST /oauth/token HTTP/1.1
Host: sso.auth.mparticle.com
Content-Type: application/json{"client_id":"your_client_id","client_secret":"your_client_secret","audience":"https://api.mparticle.com","grant_type":"client_credentials"}
POST /oauth/token HTTP/1.1
Host: sso.auth.mparticle.com
Content-Type: application/json{"client_id":"your_client_id","client_secret":"your_client_secret","audience":"https://api.mparticle.com","grant_type":"client_credentials"}
A successful POST request to the token endpoint results in a JSON response as follows:
Subsequent requests to the API can then be authorized by setting the authorization header to:
mParticle imposes default service limits on the Profile API. For the specific limits on retrieving user profiles using the Profile API, seeDefault Service Limits.
Do not submit client-side queries to Profile API from your application’s frontend. Instead, maximize performance in your app by creating a backend personalization service to submit these queries, acting as an intermediary between your app and the mParticle Profile API. This service can be built directly into your app’s existing backend framework, or it can an independent service.
Your app’s client requests user information (like product recommendations) from your personalization service by providing an identifier for the current user.
Your personalization service queries the Profile API using the supplied identifier. Based on information in the returned profile, your personalization service determines the best behavior for your app.
Your personalization service send only the information necessary to implement the desired personalization to your app’s frontend. For example, an array of product recommendations.
A simple example personalization service implemented with Node and Express is available onGitHub.
Get a profile by mParticle ID
List of supported fields that can be returned with a user profile:
A successful request receives a200response with a JSON object for the user profile.
{"mpid":9080350317581165000,"created_timestamp_ms":1574704283462,"last_stored_timestamp_ms":1575301484215,"is_opted_out":false,"limit_ad_tracking":null,"device_identities":[{"type":"android_id","encoding":"none","value":"8789c459016a94b0"},{"type":"unknown","encoding":"none","value":"0c48aafbd6c69b3e1921fab5ccb528397eb1000854db2b99b1efc8507884b07a"},{"type":"google_advertising_id","encoding":"none","value":"481c8a31-7d5d-4d96-93a0-2de7427167fc"},{"type":"unknown","encoding":"none","value":"1b4469f3fb1f7bee7ba6705d1ce4b9d8a23e76592c34aa6c4a4eea3d0a07aa64"}],"user_identities":[{"type":"customer_id","encoding":"none","value":"Example-Customer-mxr15"},{"type":"email","encoding":"none","value":"Example-Customer-mxr15@example.com"}],"account_user_attributes":null,"user_attributes":{"ml_product_recs":["123849","294933","937592","500422"],"view_preference":"Dark Mode","tp_age":"18-34","tp_gender":"male","last_purchase_category":"Home Decor","churn_risk_score":"4","ltv":"342.1","$city":"New York","$state":"NY","$country":"USA","$firstname":"Marky","$lastname":"Mark"},"audience_memberships":[{"audience_id":17802,"audience_name":"Meret final CA test","expiration_timestamp_ms":null},{"audience_id":17918,"audience_name":"Decor Remarketing","expiration_timestamp_ms":null}]}
{"mpid":9080350317581165000,"created_timestamp_ms":1574704283462,"last_stored_timestamp_ms":1575301484215,"is_opted_out":false,"limit_ad_tracking":null,"device_identities":[{"type":"android_id","encoding":"none","value":"8789c459016a94b0"},{"type":"unknown","encoding":"none","value":"0c48aafbd6c69b3e1921fab5ccb528397eb1000854db2b99b1efc8507884b07a"},{"type":"google_advertising_id","encoding":"none","value":"481c8a31-7d5d-4d96-93a0-2de7427167fc"},{"type":"unknown","encoding":"none","value":"1b4469f3fb1f7bee7ba6705d1ce4b9d8a23e76592c34aa6c4a4eea3d0a07aa64"}],"user_identities":[{"type":"customer_id","encoding":"none","value":"Example-Customer-mxr15"},{"type":"email","encoding":"none","value":"Example-Customer-mxr15@example.com"}],"account_user_attributes":null,"user_attributes":{"ml_product_recs":["123849","294933","937592","500422"],"view_preference":"Dark Mode","tp_age":"18-34","tp_gender":"male","last_purchase_category":"Home Decor","churn_risk_score":"4","ltv":"342.1","$city":"New York","$state":"NY","$country":"USA","$firstname":"Marky","$lastname":"Mark"},"audience_memberships":[{"audience_id":17802,"audience_name":"Meret final CA test","expiration_timestamp_ms":null},{"audience_id":17918,"audience_name":"Decor Remarketing","expiration_timestamp_ms":null}]}
Get a profile by immutable ID
Allows you to retrieve a profile without the mParticle ID. To use this method, your account must have animmutable identityconfigured in your identity strategy. An immutable identity is set only once and cannot be changed once it is set. It is usually the Customer ID.
List of supported fields that can be returned with a user profile:
curl\-X POST\-H"Authorization: Bearer {accessToken}"\"https://api.mparticle.com/userprofile/v1/resolve/{orgId}/{accountId}/{workspaceId}?fields=device_identities,user_identities,user_attributes,audience_memberships,attribution"\-d"{\"environment_type\":\"production\", \\"identity\": {\"type\":\"customer_id\",\"value\":\"12345\"}}"
curl\-X POST\-H"Authorization: Bearer {accessToken}"\"https://api.mparticle.com/userprofile/v1/resolve/{orgId}/{accountId}/{workspaceId}?fields=device_identities,user_identities,user_attributes,audience_memberships,attribution"\-d"{\"environment_type\":\"production\", \\"identity\": {\"type\":\"customer_id\",\"value\":\"12345\"}}"
A successful request receives a200response with a JSON object for the user profile.
{"mpid":9080350317581165000,"created_timestamp_ms":1574704283462,"last_stored_timestamp_ms":1575301484215,"is_opted_out":false,"limit_ad_tracking":null,"device_identities":[{"type":"android_id","encoding":"none","value":"8789c459016a94b0"},{"type":"unknown","encoding":"none","value":"0c48aafbd6c69b3e1921fab5ccb528397eb1000854db2b99b1efc8507884b07a"},{"type":"google_advertising_id","encoding":"none","value":"481c8a31-7d5d-4d96-93a0-2de7427167fc"},{"type":"unknown","encoding":"none","value":"1b4469f3fb1f7bee7ba6705d1ce4b9d8a23e76592c34aa6c4a4eea3d0a07aa64"}],"user_identities":[{"type":"customer_id","encoding":"none","value":"Example-Customer-mxr15"},{"type":"email","encoding":"none","value":"Example-Customer-mxr15@example.com"}],"account_user_attributes":null,"user_attributes":{"ml_product_recs":["123849","294933","937592","500422"],"view_preference":"Dark Mode","tp_age":"18-34","tp_gender":"male","last_purchase_category":"Home Decor","churn_risk_score":"4","ltv":"342.1","$city":"New York","$state":"NY","$country":"USA","$firstname":"Marky","$lastname":"Mark"},"audience_memberships":[{"audience_id":17802,"audience_name":"Meret final CA test","expiration_timestamp_ms":null},{"audience_id":17918,"audience_name":"Decor Remarketing","expiration_timestamp_ms":null}]}
{"mpid":9080350317581165000,"created_timestamp_ms":1574704283462,"last_stored_timestamp_ms":1575301484215,"is_opted_out":false,"limit_ad_tracking":null,"device_identities":[{"type":"android_id","encoding":"none","value":"8789c459016a94b0"},{"type":"unknown","encoding":"none","value":"0c48aafbd6c69b3e1921fab5ccb528397eb1000854db2b99b1efc8507884b07a"},{"type":"google_advertising_id","encoding":"none","value":"481c8a31-7d5d-4d96-93a0-2de7427167fc"},{"type":"unknown","encoding":"none","value":"1b4469f3fb1f7bee7ba6705d1ce4b9d8a23e76592c34aa6c4a4eea3d0a07aa64"}],"user_identities":[{"type":"customer_id","encoding":"none","value":"Example-Customer-mxr15"},{"type":"email","encoding":"none","value":"Example-Customer-mxr15@example.com"}],"account_user_attributes":null,"user_attributes":{"ml_product_recs":["123849","294933","937592","500422"],"view_preference":"Dark Mode","tp_age":"18-34","tp_gender":"male","last_purchase_category":"Home Decor","churn_risk_score":"4","ltv":"342.1","$city":"New York","$state":"NY","$country":"USA","$firstname":"Marky","$lastname":"Mark"},"audience_memberships":[{"audience_id":17802,"audience_name":"Meret final CA test","expiration_timestamp_ms":null},{"audience_id":17918,"audience_name":"Decor Remarketing","expiration_timestamp_ms":null}]}
User profiles expire and will not be returned by the Profile API if they are not accessed or updated for a period of 90 days. The default 90 day expiration period may be adjusted depending on your contract with mParticle. For more information about your account’s profile expiration period, contact your account representative.
Get a profile by mParticle ID
Get a profile by immutable ID
Do Not Sell or Share My Personal Data
These cookies are necessary for the website to function and cannot be switched off in our systems. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.
Share Or Sale of Personal Data
Under the CPRA, you have the right to opt-out of the sale or sharing of your personal information to third parties. These cookies collect information for analytics and to personalize your experience with targeted ads. You may exercise your right to opt out of the sale or sharing of personal information by using this toggle switch. If you opt out we will not be able to offer you personalized ads and will not hand over your personal information to any third parties. Additionally, you may contact our legal department for further clarification about your rights as a California consumer by using this Exercise My Rights link.If you have enabled privacy controls on your browser (such as a plugin), we have to take that as a valid request to opt-out. Therefore we would not be able to track your activity through the web. This may affect our ability to personalize ads according to your preferences.
Targeting CookiesSwitch LabellabelThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
These cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
Performance CookiesSwitch LabellabelThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
Use the mParticle SDKs and APIs to collect, organize, and manage customer data.
Pick a platform, and follow the SDK quickstart tutorial to see how easy it is to collect data and forward it to a third-party integration.
From event tracking to predicting user behavior, the developer docs guide you through each stage of building a complete mParticle implementation.
Track and send customer data directly from your app to any server.
Track and send customer data between servers.
Track media events and heartbeats across three platforms.
Collect data for contexts too complex for the Server SDK.
Save time when improving data quality by deleting data associated with sets of customers.
Send seeds for your calculated attributes.
Create and manage custom sets of permissions for your mParticle account users.
Define your data schema with Data Master.
Submit data subject requests for GDPR and CCPA compliance via the OpenDSR API.
Match and resolve identities to build a single user profile for all user activities.
Programmatically update your mParticle inputs, outputs, filters, and more.
Send data to mParticle from your web site via a tracking pixel.
Access user profiles at scale to power personalized experiences.
Create groups of users based on shared attributes.
Go beyond Reverse-ETL and build a headless data infrastructure.
Access some mParticle features from a terminal.
Manage your data plans as code.
Lint your code against your data plan.
Understand how to reference the pod where your org is hosted.
Use IDSync to identify unknown users with data stored in Snowflake.
Become an mParticle partner and make your platform available for input or output.
Cleanse and transform data before it is output to another system.
Migrate your Segment implementation to mParticle.
Do Not Sell or Share My Personal Data
These cookies are necessary for the website to function and cannot be switched off in our systems. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work. These cookies do not store any personally identifiable information.
Share Or Sale of Personal Data
Under the CPRA, you have the right to opt-out of the sale or sharing of your personal information to third parties. These cookies collect information for analytics and to personalize your experience with targeted ads. You may exercise your right to opt out of the sale or sharing of personal information by using this toggle switch. If you opt out we will not be able to offer you personalized ads and will not hand over your personal information to any third parties. Additionally, you may contact our legal department for further clarification about your rights as a California consumer by using this Exercise My Rights link.If you have enabled privacy controls on your browser (such as a plugin), we have to take that as a valid request to opt-out. Therefore we would not be able to track your activity through the web. This may affect our ability to personalize ads according to your preferences.
Targeting CookiesSwitch LabellabelThese cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
These cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant adverts on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising.
Performance CookiesSwitch LabellabelThese cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.
These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance.